<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.111.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon_next.png><meta itemprop=name content="平衡二叉树和红黑树"><meta itemprop=description content="平衡二叉树和红黑树"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zzzicode.github.io/imgs/avatar.png"><meta itemprop=keywords content="平衡二叉树,红黑树"><meta property="og:type" content="article"><meta property="og:title" content="平衡二叉树和红黑树"><meta property="og:description" content="平衡二叉树和红黑树"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zzzicode.github.io/post/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91/"><meta property="og:site_name" content="zzzi的小站"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="zzzi"><meta property="article:published_time" content="2023-05-27 12:38:42 +0800 CST"><meta property="article:modified_time" content="2023-05-27 12:38:42 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4b7f3d9c4ef8db1505229a7dcd2c4e3ab17cd4960dd8a78b503c013770ad56a6.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"math":{"js":{"file":"es5/tex-mml-chtml.js","name":"mathjax","version":"3.2.0"},"render":"mathjax"},"path":"%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91","permalink":"https://zzzicode.github.io/post/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91/","title":"平衡二叉树和红黑树"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>平衡二叉树和红黑树 - zzzi的小站</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>zzzi的小站</h1><i class=logo-line></i></a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>223</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#平衡二叉树>平衡二叉树</a><ul><li><a href=#插入>插入</a></li><li><a href=#删除>删除</a></li><li><a href=#avl总结>AVL总结</a></li></ul></li><li><a href=#红黑树>红黑树</a><ul><li><a href=#性质>性质</a></li><li><a href=#插入httpsjuejincnpost7035463218604556325><a href=https://juejin.cn/post/7035463218604556325>插入</a></a><ul><li><a href=#空树>空树</a></li><li><a href=#存在相同节点>存在相同节点</a></li><li><a href=#插入父节点为黑色>插入父节点为黑色</a></li><li><a href=#插入父节点为红色>插入父节点为红色</a></li><li><a href=#插入总结>插入总结</a></li></ul></li><li><a href=#删除httpsblogcsdnnetqq_40843865articledetails102498310><a href=https://blog.csdn.net/qq_40843865/article/details/102498310>删除</a></a><ul><li><a href=#组合1红节点无孩子>组合1：红节点无孩子</a></li><li><a href=#组合2黑节点无孩子>组合2：黑节点无孩子</a></li><li><a href=#组合3红节点一个孩子>组合3：红节点一个孩子</a></li><li><a href=#组合4黑节点一个孩子>组合4：黑节点一个孩子</a></li><li><a href=#组合56待删节点有两个孩子>组合5&amp;6：待删节点有两个孩子</a></li><li><a href=#小总结>小总结</a></li><li><a href=#详解组合2>详解组合2</a></li><li><a href=#删除总结>删除总结</a></li></ul></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=zzzi src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>zzzi</p><div class=site-description itemprop=description>make_tuple("工作","论文")</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>223</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>4</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zzziCode title="Github → https://github.com/zzziCode" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zzzicode.github.io/post/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%92%8C%E7%BA%A2%E9%BB%91%E6%A0%91/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="zzzi"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="zzzi"><meta itemprop=description content="make_tuple(&#34;工作&#34;,&#34;论文&#34;)"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="平衡二叉树和红黑树"><meta itemprop=description content="平衡二叉树和红黑树"></span><header class=post-header><h1 class=post-title itemprop="name headline">平衡二叉树和红黑树</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=发表于>发表于：</span>
<time title="创建时间：2023-05-27 12:38:42 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-05-27 12:38:42 +0800 CST">2023-05-27</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title=分类于>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0 itemprop=url rel=index><span itemprop=name>学习笔记</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span>
<span>4604</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>10分钟</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><blockquote><p>😄平衡二叉树和红黑树</p></blockquote><p>介绍平衡二叉树的插入和删除操作，红黑树的基础理论以及红黑树的插入和删除</p><h2 id=平衡二叉树>平衡二叉树
<a class=header-anchor href=#%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%a0%91></a></h2><h3 id=插入>插入
<a class=header-anchor href=#%e6%8f%92%e5%85%a5></a></h3><ol><li>首先在树上进行搜索，找到要插入的位置，插入之后若出现不平衡则调整</li><li>插入的节点肯定是在叶子节点上，从当前插入节点自底向上找到第一棵不平衡子树的根节点root</li><li>当前节点到根节点有一条路径，从这条路径自顶向下找到从root开始的三个节点</li><li>三个节点形成一个平衡二叉树x，然后将不平衡子树的剩余节点直接插入x中即可，插入时需要保留原来的父子和兄弟关系</li></ol><blockquote><p>以上方法是通法，不再需要考虑<code>LL,LR,RR,RL</code>分类的情况</p></blockquote><p>举例：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271249583.png alt=image-20230527124921543 style=zoom:50%><p>插入63,出现不平衡情况：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271250153.png alt=image-20230527125012115 style=zoom:50%><p>从<code>63</code>向上找到第一个不平衡子树的根节点为<code>50</code>，50到63的路径为：[50,68,66,60,63]，前三个节点为[50,68,66]，组成一个二叉树：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271253585.png alt=image-20230527125321524 style=zoom:50%><p>之后将剩下的[21,26,30,60,63,67,70,90]直接插入即可，插入时原来的父子和兄弟关系需要保留：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271257087.png alt=image-20230527125735045 style=zoom:50%><h3 id=删除>删除
<a class=header-anchor href=#%e5%88%a0%e9%99%a4></a></h3><ol><li>按照二叉搜索树的方式进行删除，最复杂的情况就是待删除节点左右子树都不为空，此时将此节点的左子树接入右子树的最左边节点，
<a href=https://www.programmercarl.com/0450.%E5%88%A0%E9%99%A4%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9.html title="<strong>参考</strong>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>参考</strong>
<i class="fa fa-external-link-alt"></i></a></li><li>判断整棵树是否平衡，不平衡的话借鉴插入的思想，自底向上找到最小的不平衡二叉树进行调整，调整的思路与插入时一样</li><li>将最小不平衡子树的<strong>最底层叶子节点</strong>当作终点找到一条路径，然后调整，如果最底层叶子节点有多个，那么就任选一个，但是推荐选靠右的27</li></ol><p>举例，删除2：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271316537.png alt=image-20230527131623502 style=zoom:50%><p>删除之后不平衡，最小不平衡子树的根节点为11，最底层叶子节点为17和27，任选一条路径调整即可，这里推荐选择靠右的27：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271318334.png alt=image-20230527131809299 style=zoom:50%><p>调整之后为：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271323076.png alt=image-20230527132316034 style=zoom:50%><h3 id=avl总结>AVL总结
<a class=header-anchor href=#avl%e6%80%bb%e7%bb%93></a></h3><p>平衡二叉树的调整时插入和删除的基础，插入和删除<strong>参考</strong>二叉搜索树的插入和删除，之后就是将插入和删除之后的树调整成平衡二叉树，主要步骤如下：</p><ol><li>自底向上找到最小的不平衡二叉树的根节点root</li><li>从root出发找一条到最底层节点的路径，取出前三个节点形成平衡二叉树x</li><li>剩下的节点在不改变父子和兄弟关系的前提下插入x即可</li><li>插入只用调整一次，删除可能需要调整多次</li></ol><blockquote><p>二叉排序树的插入和删除+平衡二叉树的调整</p></blockquote><h2 id=红黑树>红黑树
<a class=header-anchor href=#%e7%ba%a2%e9%bb%91%e6%a0%91></a></h2><p>为了提高系统的查询效率，引入红黑树，那么为什么不使用平衡二叉树呢，因为平衡二叉树的调整太消耗时间，一旦节点变化，那么就要调整，导致平衡二叉树花费了大量的时间进行调整，所以出现频繁的插入和删除时，平衡二叉树性能并不是很好</p><p>基于以上分析引入了红黑树，他继承了平衡二叉树的平衡特性和搜索特性，不会出现二叉搜索树的极端情况，同时又放宽平衡的条件，使得面对大量的插入和删除的情况时性能也变得很好</p><h3 id=性质>性质
<a class=header-anchor href=#%e6%80%a7%e8%b4%a8></a></h3><ol><li>节点有红黑两种颜色</li><li>根节点一定是黑色的</li><li>叶子节点（不存储元素）一定是黑色的</li><li>红色节点的两个孩子节点都是黑色的，黑色节点的孩子可红可黑</li><li>从一个节点出发，到任意一个叶子节点的路径上都包含相同数量的黑色节点</li></ol><p>基于以上原则，会将待插入节点设置为红色在进行插入</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271423654.png alt=image-20230527142311583 style=zoom:50%><p>最后一个属性类似于平衡二叉树中的平衡因子，保证红黑树的平衡性</p><p>一旦出现上述五个性质中的一个不满足，就视为不平衡，需要进行调整，一共有三种调整方式：<font color=red>变色、左旋、右旋</font>，旋转类似于平衡二叉树的旋转</p><h3 id=插入httpsjuejincnpost7035463218604556325><a href=https://juejin.cn/post/7035463218604556325 title=插入 rel="noopener external nofollow noreferrer" target=_blank class=exturl>插入
<i class="fa fa-external-link-alt"></i></a>
<a class=header-anchor href=#%e6%8f%92%e5%85%a5httpsjuejincnpost7035463218604556325></a></h3><p>红黑树插入时默认待插入节点是红色的，并且插入节点时与二叉搜索树一样要先搜索插入位置，然后插入之后将其调整，一共分为以下几种情况：</p><h4 id=空树>空树
<a class=header-anchor href=#%e7%a9%ba%e6%a0%91></a></h4><p>此时可以直接插入，待插入节点变成根节点，但是由于根节点只能是黑色，待插入节点默认是红色，所以需要<strong>变色</strong>：</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271435934.png alt=image-20230527143515874></p><h4 id=存在相同节点>存在相同节点
<a class=header-anchor href=#%e5%ad%98%e5%9c%a8%e7%9b%b8%e5%90%8c%e8%8a%82%e7%82%b9></a></h4><p>分为两种情况</p><ol><li>节点颜色为黑色，待插入节点默认为红色，所以需要先变色 ，再更新</li><li>节点颜色为红色，待插入节点默认为红色，直接更新</li></ol><p>插入100，属于第一种情况，直接更新节点的信息即可：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271436001.png alt=image-20230527143644957 style=zoom:67%><h4 id=插入父节点为黑色>插入父节点为黑色
<a class=header-anchor href=#%e6%8f%92%e5%85%a5%e7%88%b6%e8%8a%82%e7%82%b9%e4%b8%ba%e9%bb%91%e8%89%b2></a></h4><p>由于待插入节点默认为红色，并且父节点为黑色，所以红黑树的五个性质一定满足， <strong>直接插入</strong>即可，插入之后一定符合平衡条件</p><p>插入101：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271444762.png alt=image-20230527144439723 style=zoom:67%><h4 id=插入父节点为红色>插入父节点为红色
<a class=header-anchor href=#%e6%8f%92%e5%85%a5%e7%88%b6%e8%8a%82%e7%82%b9%e4%b8%ba%e7%ba%a2%e8%89%b2></a></h4><p>简单分析以下，如果插入的父节点为红色节点，那么父节点不可能时根节点（性质1）</p><p>同时父节点的父节点一定不是红色节点（性质4），也就是说父节点一定在红黑树的中间位置，</p><p>此时有两种情况：</p><ul><li><p>父节点和叔叔节点都为红色（爷爷节点是黑色），对应在上图，父节点就是47</p></li><li><p>父节点为红色，叔叔节点为空（黑色），对应在上图，父节点就是84</p><ul><li>插入之后形成LL或者RR</li><li>插入之后形成LR或者RL</li></ul></li></ul><p><font color=red>对于情况1，进行如下处理：</font></p><ol><li>父亲和叔叔变黑</li><li>爷爷变红</li><li>矛盾向上转移，可以出现红黑相连和黑黑相连，不能出现红红相连</li></ol><blockquote><p>总结:可以出现连续的黑色，不能出现连续的红色，并且连续的红色尽量让其出现在上层，</p></blockquote><p>向树中插入7：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271555336.png alt=image-20230527155504291 style=zoom:67%><p>父亲和叔叔节点变黑，爷爷节点变红：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271554712.png alt=image-20230527155432667 style=zoom:67%><p>爷爷节点9红色，所以爷爷节点9的父亲节点12需要变成黑色，12 的父亲节点16需要变成红色：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271556772.png alt=image-20230527155639649 style=zoom:67%><p>此时再进行<strong>旋转</strong>，从较高的一边选取三个节点形成红黑树，之后剩下的节点插入这个红黑树即可，参考平衡二叉树的调整：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271559399.png alt=image-20230527155910354 style=zoom:67%><p><font color=red>对于情况2，需要进行以下处理：</font></p><p>取决于待插入节点的大小，可插入到父亲节点的左孩子或者右孩子，于是又出现两种情况：</p><p><font color=blue>1.插入之后形成LL或者RR</font></p><ul><li>直接将父亲节点变成黑色</li><li>爷爷节点变成红色</li><li>进行旋转，以父亲节点的黑色为根节点形成小红黑树插入到大红黑树</li></ul><p>向树中插入13：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271604601.png alt=image-20230527160451528 style=zoom:45%><p>经历三步之后形成新的红黑树</p><p><font color=blue>2.插入之后形成LR或者RL</font></p><ul><li>先将待插入节点进行旋转，使其变成交换父亲和孩子的关系，使其变成LL或者RR</li><li>直接将父亲节点变成黑色</li><li>爷爷节点变成红色</li><li>进行旋转，以父亲节点的黑色为根节点形成小红黑树插入到大红黑树</li></ul><blockquote><p>总结：先将LR或者RL变成RR或者LL之后再进行调整</p></blockquote><p>向树中插入16：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305271611370.png alt=image-20230527161125302 style=zoom:67%><p>经历四步形成新的红黑树</p><h4 id=插入总结>插入总结
<a class=header-anchor href=#%e6%8f%92%e5%85%a5%e6%80%bb%e7%bb%93></a></h4><p>向红黑树中插入节点，主要是当插入位置的父亲节点是红色时比较麻烦，红色又分为两种情况：</p><ol><li>叔叔节点是红色，此时父亲和叔叔一起变成黑色，爷爷变成红色，就这样一直红黑交替的向上变化，一直到根节点，之后再借鉴平衡二叉树的思想调整</li><li>叔叔节点是黑色，又分为两种情况<ul><li>LL或者RR，此时直接进行变色再旋转：父亲变色、爷爷变色、旋转</li><li>LR或者RL，此时先变成LL或者RR，然后再变色和旋转：旋转、父亲变色、爷爷变色、旋转</li></ul></li></ol><h3 id=删除httpsblogcsdnnetqq_40843865articledetails102498310><a href=https://blog.csdn.net/qq_40843865/article/details/102498310 title=删除 rel="noopener external nofollow noreferrer" target=_blank class=exturl>删除
<i class="fa fa-external-link-alt"></i></a>
<a class=header-anchor href=#%e5%88%a0%e9%99%a4httpsblogcsdnnetqq_40843865articledetails102498310></a></h3><p>红黑树的删除相比于插入来说情况更多，插入总结来说只有四种情况，并且只有插入位置的父节点是红色的情况才略显复杂。</p><p>而删除一共有六种组合，待删除节点有2种颜色：红和黑。待删除结点的孩子节点有三种情况：无孩子，一个孩子，两个孩子。所以共有6种情况，下面逐一分析：</p><h4 id=组合1红节点无孩子>组合1：红节点无孩子
<a class=header-anchor href=#%e7%bb%84%e5%90%881%e7%ba%a2%e8%8a%82%e7%82%b9%e6%97%a0%e5%ad%a9%e5%ad%90></a></h4><p>这种情况最简单，删除无孩子的红色节点，不影响红黑树中黑色节点的数量</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272054212.png alt=image-20230527205426161></p><h4 id=组合2黑节点无孩子>组合2：黑节点无孩子
<a class=header-anchor href=#%e7%bb%84%e5%90%882%e9%bb%91%e8%8a%82%e7%82%b9%e6%97%a0%e5%ad%a9%e5%ad%90></a></h4><blockquote><p>😄下文详细分析</p></blockquote><h4 id=组合3红节点一个孩子>组合3：红节点一个孩子
<a class=header-anchor href=#%e7%bb%84%e5%90%883%e7%ba%a2%e8%8a%82%e7%82%b9%e4%b8%80%e4%b8%aa%e5%ad%a9%e5%ad%90></a></h4><p>这种情况不可能出现，因为一旦出现，当前节点到叶子节点的黑色节点数就不一样，不满足性质5</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272048361.png alt=image-20230527204851310></p><h4 id=组合4黑节点一个孩子>组合4：黑节点一个孩子
<a class=header-anchor href=#%e7%bb%84%e5%90%884%e9%bb%91%e8%8a%82%e7%82%b9%e4%b8%80%e4%b8%aa%e5%ad%a9%e5%ad%90></a></h4><p>此时黑节点的这个孩子节点一定是红色节点，如果是黑色节点的话，左右两边到叶子节点的黑色节点的数量就不相同，有孩子的一边黑色节点数为2，无孩子的一边黑色节点数为1，不满足性质5，所以只能是如图的情况：</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272051264.png alt=image-20230527205141228></p><p>此时只需要将当前节点替换成孩子节点，然后孩子节点变成黑色即可</p><h4 id=组合56待删节点有两个孩子>组合5&amp;6：待删节点有两个孩子
<a class=header-anchor href=#%e7%bb%84%e5%90%8856%e5%be%85%e5%88%a0%e8%8a%82%e7%82%b9%e6%9c%89%e4%b8%a4%e4%b8%aa%e5%ad%a9%e5%ad%90></a></h4><p>此时不用考虑待删节点的颜色，而是将待删节点用中序遍历的后继节点代替，之后删除这个后继节点即可，但是后继节点的位置不同又会出现不同的情况</p><ol><li>后继节点没有孩子节点</li><li>后继节点有一个左孩子</li></ol><p>不可能出现后继节点有一个右孩子，如果有的话当前节点就不可能是后继节点</p><p><font color=red>第一种情况</font>，后继节点没有孩子节点，可以转化为组合1或者组合2</p><p>当后继节点为红色时，转化为组合1</p><p>当后继节点为黑色时，转化为组合2</p><p><font color=red>第二种情况</font>，后继节点有一个左孩子，此时只能转化为<strong>组合4</strong>，组合3是不可能的</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272122724.png alt=image-20230527212217666 style=zoom:67%><h4 id=小总结>小总结
<a class=header-anchor href=#%e5%b0%8f%e6%80%bb%e7%bb%93></a></h4><p>除了组合2删除单独的黑色节点需要详细分析，剩下的组合5&amp;6转化为了组合1、组合2、组合4，而组合1直接删除，组合4只需要用孩子替换当前节点并变色即可，最复杂的就是组合2：黑节点无孩子，因为删除黑色节点会打乱红黑树的平衡</p><h4 id=详解组合2>详解组合2
<a class=header-anchor href=#%e8%af%a6%e8%a7%a3%e7%bb%84%e5%90%882></a></h4><p>由于当前节点删除后，相当于变成了一个空节点，红黑树中的空节点是黑色节点，所以这里我们也用黑色空节点代替删除的节点，之后的工作就是调整红黑树使其平衡</p><p><font color=red>情形一：兄弟节点为黑色，且有红色儿子（当前节点的侄子）,可分为方向一致和方向不一致</font></p><p>此时删除当前节点node，从node的父节点算起，被删除一侧的黑色节点数与兄弟节点一侧的黑色节点树相比少1，造成了不平衡</p><p>进行如下操作：</p><ol><li>红儿子任选一个，加上brother，father，三个节点形成平衡二叉树</li><li>叶子节点变成黑色</li><li>插入到现有红黑树，看根节点涂什么颜色合适</li></ol><p>此时将三个节点（孩子节点任选一个）提取出来当作平衡二叉树，最小的放左边，最大的放右边，中间的当根节点，之后在插入红黑树中，进行染色</p><p>总结：删除之后剩下三个节点：<code>father，brother，nephew</code>，将这三个节点先变成平衡二叉树，在编程红黑树</p><p>son与brother方向一致（L或者RR），直接旋转：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272134097.png alt=image-20230527213429051 style=zoom:67%><p>son与father方向不一致，LR、RL变成LL或RR：</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272142917.png alt=image-20230527214209876 style=zoom:67%><p>变成LL或RR之后在进行旋转</p><p><font color=red>情形二：兄弟节点为黑色，没有儿子</font></p><p>红黑树不平衡的情况是因为被删除的一侧少了一个黑色节点，而兄弟节点是黑色的，所以出现不平衡，此时需要减少兄弟一侧的黑色节点数，解决办法就是将兄弟变成红色，分为两种情况：</p><ol><li><p><strong>父节点为红色</strong>，兄弟节点直接变成红色之后，父节点变成黑色，此时不论父节点的父节点是什么颜色，只会出现两种情况，黑黑或者红黑，都满足红黑树的性质</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202305272153772.png alt=image-20230527215304686 style=zoom:67%><blockquote><p>也就是父节点和兄弟节点变化颜色即可</p></blockquote></li><li><p><strong>父节点为黑色</strong></p></li></ol><p><del><font color=red>情形三：兄弟节点为红色</font></del></p><p><del>此时兄弟节点是红色，当前节点是黑色，父节点只能是黑色</del></p><p><del>进行如下操作：</del></p><ol><li><del>brother旋转当根节点，当前节点变成游离节点</del></li><li><del>father变成红色，brother变成黑色（根节点）</del></li><li><del>其余节点颜色不变，参考二叉排序树插入剩下节点</del></li><li><del>游离节点的删除变成上面的任意一种情况</del></li></ol><h4 id=删除总结>删除总结
<a class=header-anchor href=#%e5%88%a0%e9%99%a4%e6%80%bb%e7%bb%93></a></h4><p>删除分为六种组合，其中组合3不可能出现，剩下五种组合，组合5&amp;6可以转化为组合1，2，4.而组合1、4又比较简单。所以只剩下了组合2.</p><p>对于组合2来说，待删除节点固定为黑色，兄弟节点颜色不一样并且孩子节点的分布也不一样，所以又需要划分情况：</p><ol><li><p>兄弟节点为黑色，孩子节点与兄弟节点方向一致</p></li><li><p>兄弟节点为黑色，孩子节点与兄弟节点方向不一致</p></li><li><p>兄弟节点为黑色，无孩子节点</p><ul><li>父节点为红色</li><li>父节点为黑色（<font color=purple>未解决</font>😤😤😤）</li></ul></li><li><p>兄弟节点为红色，此时父节点一定为黑色（<font color=purple>未解决</font>😤😤😤）</p></li></ol><h2 id=总结>总结
<a class=header-anchor href=#%e6%80%bb%e7%bb%93></a></h2><p>平衡二叉树的插入就是先插入，然后调整，调整的思路就是找到最小不平衡子树到插入节点的一条路径，然后取出前三个节点形成一个平衡二叉树，剩下的元素在不改变父子和兄弟关系的前提下逐一插入二叉树即可</p><p>平衡二叉树的删除就是先进行二叉搜索树的删除，之后借鉴平衡二叉树插入的思想进行调整，直到平衡，可能会调整多次</p><p>红黑树的插入中一共有四种情况，最麻烦的就是插入位置的父节点为红色，因为默认插入的新节点为红色，所以需要进行调整，根据叔叔节点的颜色又分为不同的情况，叔叔节点为红色时，父亲和叔叔一起从红变黑，爷爷节点从黑变红，一层一层向上，直到根节点，之后再借鉴平衡二叉树的思想进行调整。叔叔节点为黑色（空节点），只需要将当前节点，父亲节点，爷爷节点三个形成一个红黑树，插入原有红黑树即可。</p><p>红黑树的删除一共有六种情况，除了组合3不可能，组合5&amp;6可转化为组合1、2、4。剩下的组合1、2、4中最麻烦的就是组合2。</p><p>组合2分为兄弟节点为黑色（又分为三种情况）和兄弟节点为红色。</p><p>还剩下几种情况未解决。。。。。。😂😂😂</p></div><footer class=post-footer><div class=post-tags><a href=/tags/%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%a0%91>平衡二叉树</a>
<a href=/tags/%e7%ba%a2%e9%bb%91%e6%a0%91>红黑树</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/51.n%E7%9A%87%E5%90%8E/ rel=next title=51.N皇后><i class="fa fa-chevron-left"></i> 51.N皇后</a></div><div class="post-nav-prev post-nav-item"><a href=/post/332.%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B/ rel=prev title=332.重新安排行程>332.重新安排行程
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2024</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>zzzi提供技术支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zzzicode.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.b0e26367f0461fb41ac6f947dc2af3620375dc44aa8945e6c2b1480d342c65d1.js defer></script>
<script type=text/javascript src=/js/math.min.a6ada19a368d85dad9ead2040d86ae561a867fafef89391d1aa2aa5909366509.js defer></script></body></html>