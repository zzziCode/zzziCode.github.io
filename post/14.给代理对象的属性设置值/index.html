<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.111.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon_next.png><meta itemprop=name content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"><meta itemprop=description content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zzzicode.github.io/imgs/avatar.png"><meta itemprop=keywords content="spring,æºç "><meta property="og:type" content="article"><meta property="og:title" content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"><meta property="og:description" content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zzzicode.github.io/post/14.%E7%BB%99%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%E5%80%BC/"><meta property="og:site_name" content="zzziçš„å°ç«™"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="zzzi"><meta property="article:published_time" content="2023-11-13 20:35:39 +0800 CST"><meta property="article:modified_time" content="2023-11-13 20:35:39 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4b7f3d9c4ef8db1505229a7dcd2c4e3ab17cd4960dd8a78b503c013770ad56a6.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"math":{"js":{"file":"es5/tex-mml-chtml.js","name":"mathjax","version":"3.2.0"},"render":"mathjax"},"path":"14.%E7%BB%99%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%E5%80%BC","permalink":"https://zzzicode.github.io/post/14.%E7%BB%99%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%E5%80%BC/","title":"14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼ - zzziçš„å°ç«™</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>zzziçš„å°ç«™</h1><i class=logo-line></i></a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£
<span class=badge>228</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#åŸå› >åŸå› </a></li><li><a href=#æ€è·¯>æ€è·¯</a><ul><li><a href=#ç±»çš„å˜åŒ–>ç±»çš„å˜åŒ–</a><ul><li><a href=#ä¿®æ”¹çš„ç±»>ä¿®æ”¹çš„ç±»</a></li></ul></li><li><a href=#beançš„åˆ›å»ºå’Œè·å–>beançš„åˆ›å»ºå’Œè·å–</a></li></ul></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=zzzi src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>zzzi</p><div class=site-description itemprop=description>make_tuple("å·¥ä½œ","è®ºæ–‡")</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>228</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>5</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>54</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zzziCode title="Github â†’ https://github.com/zzziCode" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>å‡¡æ¢¦æ˜Ÿå°˜</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zzzicode.github.io/post/14.%E7%BB%99%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%E5%80%BC/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="zzzi"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="zzzi"><meta itemprop=description content="make_tuple(&#34;å·¥ä½œ&#34;,&#34;è®ºæ–‡&#34;)"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"><meta itemprop=description content="14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼"></span><header class=post-header><h1 class=post-title itemprop="name headline">14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š</span>
<time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-13 20:35:39 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-11-13 20:35:39 +0800 CST">2023-11-13</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title=åˆ†ç±»äº>åˆ†ç±»äºï¼š</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0 itemprop=url rel=index><span itemprop=name>å­¦ä¹ ç¬”è®°</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=å­—æ•°><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>å­—æ•°ï¼š</span>
<span>3754</span></span>
<span class=post-meta-item title=é˜…è¯»><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>é˜…è¯»ï¼š&ap;</span>
<span>8åˆ†é’Ÿ</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><blockquote><p>ğŸŸ 14.ç»™ä»£ç†å¯¹è±¡çš„å±æ€§è®¾ç½®å€¼</p></blockquote><p>â€‹ ä¸Šä¸€èŠ‚ä¸­ä½¿ç”¨æ³¨è§£çš„å½¢å¼è¿›è¡Œå±æ€§å¡«å……ï¼Œä½†æ˜¯å¡«å……çš„æ˜¯æ™®é€šçš„beanï¼Œä¹Ÿå°±æ˜¯è¯´ä»£ç†å¯¹è±¡çš„å±æ€§è¿˜éƒ½æ˜¯<code>null</code>ï¼Œè¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬å°±æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ”¹å˜ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œä½¿å¾—åˆ›å»ºçš„beanä»£ç†å¯¹è±¡å†…éƒ¨çš„è¢«ä»£ç†å¯¹è±¡çš„å±æ€§ä¹Ÿä¸ä¸ºç©ºï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ç›´æ¥è®©ä»£ç†å¯¹è±¡æœ¬èº«çš„å±æ€§ä¸ä¸ºç©ºï¼Œè€Œæ˜¯å¢åŠ ä¸€ä¸ª<code>target</code>ï¼Œ<code>target</code>çš„å†…éƒ¨å±æ€§ä¸ä¸ºç©ºï¼Œç›¸å…³çš„ä»£ç æˆ‘æ”¾åˆ°äº†
<a href=https://github.com/zzziCode/small-spring title=ä»“åº“ rel="noopener external nofollow noreferrer" target=_blank class=exturl>ä»“åº“
<i class="fa fa-external-link-alt"></i>
</a>ä¸­</p><blockquote><p>å°±æ˜¯å°†ä»£ç†å¯¹è±¡çš„åˆ›å»ºå»¶åï¼Œç„¶åæœ€ç»ˆè¢«ä»£ç†å¯¹è±¡ä¸­çš„å±æ€§å°±å¯ä»¥å¡«å……å®Œæ¯•ï¼Œè¿™æ ·ä»£ç†å¯¹è±¡æ‰§è¡Œæ—¶è¢«è‡ªå·±çš„æ–¹æ³•æ‹¦æˆªå™¨æ‹¦æˆªä¹‹åï¼Œå†…éƒ¨targetå°±æ˜¯<strong>å±æ€§å¡«å……</strong>è¿‡åçš„å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡è‡ªèº«çš„å±æ€§ä¸ºç©ºï¼Œä½†æ˜¯targetå¹¶ä¸ä¸ºç©º</p></blockquote><h2 id=åŸå› >åŸå› 
<a class=header-anchor href=#%e5%8e%9f%e5%9b%a0></a></h2><p>â€‹ ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬å®ç°äº†é€šè¿‡æ³¨è§£æ³¨å…¥å±æ€§çš„åŠŸèƒ½ï¼Œè¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬è§£å†³ä¹‹å‰é—ç•™çš„é—®é¢˜ï¼Œä¸»è¦æ˜¯ä»£ç†å¯¹è±¡çš„åˆ›å»ºè¿˜åœ¨beançš„ç”Ÿå‘½å‘¨æœŸä¹‹å¤–ï¼Œå¹¶ä¸”åˆ›å»ºçš„ä»£ç†å¯¹è±¡å†…éƒ¨å¹¶æ²¡æœ‰å¡«å……è¿‡çš„å±æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºç§»åŠ¨åˆ°å±æ€§å¡«å……å®Œæ¯•ä¹‹åä¸”åˆå§‹åŒ–ä¹‹åçš„<code>postProcessAfterInitialization</code>æ–¹æ³•ä¸­ï¼Œæ ¸å¿ƒç±»è¿˜æ˜¯<code>DefaultAdvisorAutoProxyCreator</code>ï¼Œåªæ˜¯åˆ›å»ºä»£ç†å¯¹è±¡çš„æ–¹æ³•å˜æˆäº†<code>postProcessAfterInitialization</code>ï¼Œç»è¿‡è¿™æ ·çš„æ“ä½œï¼Œä»£ç†å¯¹è±¡çš„åˆ›å»ºä¼šåœ¨è¢«ä»£ç†å¯¹è±¡å±æ€§å¡«å……ä¹‹åï¼Œæ­¤æ—¶æˆ‘ä»¬å°†ä»£ç†å¯¹è±¡ä¸­çš„<code>target</code>èµ‹å€¼ä¸ºå±æ€§å¡«å……ä¹‹åçš„è¢«ä»£ç†å¯¹è±¡ï¼Œè¿™æ ·å°±è§£å†³äº†ä»£ç†å¯¹è±¡ä¸­çš„å±æ€§æ²¡æœ‰å€¼çš„é—®é¢˜ï¼Œæ–°çš„æ¨¡å—å…³ç³»å›¾å¦‚ä¸‹ï¼š</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141414636.png alt=img style=zoom:67%><h2 id=æ€è·¯>æ€è·¯
<a class=header-anchor href=#%e6%80%9d%e8%b7%af></a></h2><p>â€‹ å°†ä»£ç†å¯¹è±¡çš„åˆ›å»º<strong>å»¶å</strong>ä¹‹åï¼Œå†…éƒ¨<code>target</code>ä¿å­˜äº†å±æ€§å¡«å……ä¹‹åçš„è¢«ä»£ç†å¯¹è±¡ï¼Œåœ¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•æ—¶ï¼Œæœ€ç»ˆä¼šåˆ°è¾¾<code>JDK</code>ä¸­çš„<code>invoke</code>æ–¹æ³•æˆ–è€…<code>Cglib</code>ä¸­çš„<code>intercept</code>æ–¹æ³•ä¸­ï¼Œåœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œæ–¹æ³•åŒ¹é…ä¹‹åï¼Œå¦‚æœåŒ¹é…æˆåŠŸåˆ™ä¼šæ‰§è¡Œæ–¹æ³•æ‹¦æˆªå™¨çš„<code>invoke</code>æ–¹æ³•æ¥æ‰§è¡Œé€šçŸ¥æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œå†…éƒ¨æœ€ç»ˆä¼šè°ƒç”¨<code>target</code>çš„åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œç”±äºä¹‹å‰çš„<code>target</code>æ˜¯å¡«å……çš„æ—¶å€™æ–°å»ºçš„ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ‰€ä»¥å‡ºç°äº†ä»£ç†å¯¹è±¡å†…éƒ¨çš„å±æ€§ä¸ºç©ºçš„æƒ…å†µï¼š
<img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535327.png alt=image-20231114141734924></p><p>åœ¨æœ¬èŠ‚ä¸­AOPçš„å¼•å…¥æ—¶æœºå»¶åäº†ï¼Œ<code>target</code>å¡«å……çš„æ˜¯å·²ç»å‚æ•°å¡«å……è¿‡åçš„è¢«ä»£ç†<strong>æœ‰å‚</strong>å¯¹è±¡ï¼Œæ‰€ä»¥è§£å†³äº†ä¹‹å‰çš„é—®é¢˜ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535329.png alt=image-20231114141843416></p><p>â€‹ æ€»ç»“æ¥è¯´<strong>æ ¸å¿ƒæ­¥éª¤</strong>å°±æ˜¯æ›´æ”¹äº†æ–¹æ³•æ‹¦æˆªå™¨ä¸­çš„<code>target</code>ï¼Œä½¿å…¶å­˜å‚¨å±æ€§å¡«å……è¿‡åçš„beanï¼Œä¸ºäº†å®ç°è¿™ä¸ªç›®çš„å°±å°†åˆ›å»ºä»£ç†å¯¹è±¡çš„æ­¥éª¤å»¶åï¼Œç­‰å¾…åŸå§‹beanå±æ€§å¡«å……ä¹‹åå†åˆ›å»ºï¼Œè¿™æ ·åœ¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œè¢«æ‹¦æˆªæ—¶ï¼Œè§¦å‘<code>target</code>çš„åŸå§‹æ–¹æ³•è°ƒç”¨ï¼Œ<code>target</code>ä¸­å°±æœ‰å€¼äº†</p><h3 id=ç±»çš„å˜åŒ–>ç±»çš„å˜åŒ–
<a class=header-anchor href=#%e7%b1%bb%e7%9a%84%e5%8f%98%e5%8c%96></a></h3><p>ä¸‹é¢ä»‹ç»ä¸ºäº†å®ç°å¸¦å‚çš„ä»£ç†å¯¹è±¡çš„åˆ›å»ºï¼Œé¡¹ç›®ä¸­ç±»çš„å˜åŒ–ï¼Œç”±äºæœ¬èŠ‚ä¸­åªæ˜¯å»¶ç¼“äº†ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ–°å¢ä»»ä½•ç±»ï¼Œåªæ˜¯å°†ä¹‹å‰ä»£ç†å¯¹è±¡åˆ›å»ºçš„ä»£ç ç§»åŠ¨äº†ä½ç½®å¹¶ä¿®æ”¹äº†ä¸€äº›ç»†å¾®çš„åœ°æ–¹ã€‚</p><h4 id=ä¿®æ”¹çš„ç±»>ä¿®æ”¹çš„ç±»
<a class=header-anchor href=#%e4%bf%ae%e6%94%b9%e7%9a%84%e7%b1%bb></a></h4><ol><li><p><code>InstantiationAwareBeanPostProcessor</code>ï¼šæ¥å£ä¸­æ–°å¢äº†ä¸€ä¸ªæ–¹æ³•<code>postProcessAfterInstantiation</code>ï¼Œåœ¨å®ç°ç±»ä¸­æš‚æ—¶æ²¡åšä»»ä½•å®ç°ï¼Œç›´æ¥è¿”å›true</p></li><li><p><code>DefaultAdvisorAutoProxyCreator</code>ï¼šå°†ä»£ç†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ç§»åŠ¨åˆ°äº†<code>postProcessAfterInitialization</code>æ–¹æ³•ä¸­ï¼Œæ–¹æ³•å†…éƒ¨targetå¡«å……çš„æ˜¯å½¢å‚ä¸­çš„beanï¼Œä¹Ÿå°±æ˜¯å‚æ•°å¡«å……è¿‡åçš„beanã€‚åŸå…ˆåˆ›å»ºä»£ç†å¯¹è±¡çš„æ–¹æ³•<code>postProcessBeforeInstantiation</code>ç›´æ¥è¿”å›nullï¼Œç›¸å½“äºä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºå»¶åäº†ï¼Œä¹‹ååˆ›å»ºä»£ç†å¯¹è±¡çš„é€»è¾‘è¿˜æ˜¯å’ŒåŸæ¥ä¸€æ ·ï¼Œå…ˆä½¿ç”¨<code>AspectJExpressionPointcutAdvisor</code>ä¸­é…ç½®çš„ï¼›ç±»åŒ¹é…å™¨åŒ¹é…å½“å‰beanæ˜¯ä¸æ˜¯éœ€è¦è¢«ä»£ç†ï¼Œéœ€è¦çš„è¯å°±å°è£…ä¸€ä¸ª<code>AdvisedSupport</code>ï¼Œå†…éƒ¨ä¿å­˜åˆ›å»ºä»£ç†å¯¹è±¡æ‰€éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå°†å…¶äº¤ç»™<code>ProxyFactory</code>åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å†…éƒ¨çš„targetç°åœ¨å±æ€§å¡«å……è¿‡äº†ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>postProcessAfterInitialization</span><span style=color:#f92672>(</span>Object bean<span style=color:#f92672>,</span> String beanName<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> BeansException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Class<span style=color:#f92672>&lt;?&gt;</span> beanClass <span style=color:#f92672>=</span> bean<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>isInfrastructureClass<span style=color:#f92672>(</span>beanClass<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> bean<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//æ‹¿åˆ°é…ç½®çš„ä»£ç†ä¿¡æ¯
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Collection<span style=color:#f92672>&lt;</span>AspectJExpressionPointcutAdvisor<span style=color:#f92672>&gt;</span> advisors <span style=color:#f92672>=</span> beanFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getBeansOfType</span><span style=color:#f92672>(</span>AspectJExpressionPointcutAdvisor<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>values</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>AspectJExpressionPointcutAdvisor advisor <span style=color:#f92672>:</span> advisors<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//æ‹¿åˆ°ç±»åŒ¹é…å™¨ï¼Œä»è€Œåˆ¤æ–­å½“å‰ç±»æ˜¯å¦éœ€è¦ä»£ç†
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ClassFilter classFilter <span style=color:#f92672>=</span> advisor<span style=color:#f92672>.</span><span style=color:#a6e22e>getPointcut</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getClassFilter</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//å½“å‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¸åŒ¹é…å½“å‰beanï¼Œå°è¯•ä¸‹ä¸€ä¸ª
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>classFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>matches</span><span style=color:#f92672>(</span>beanClass<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//åœ¨è¿™é‡Œå°±æ˜¯åŒ¹é…æˆåŠŸï¼Œå‡†å¤‡åˆ›å»ºä»£ç†å¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        AdvisedSupport advisedSupport <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AdvisedSupport<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**@author zzzi
</span></span></span><span style=display:flex><span><span style=color:#75715e>             * @date 2023/11/14 13:47
</span></span></span><span style=display:flex><span><span style=color:#75715e>             * è¿™é‡Œä¿å­˜çš„æ˜¯å·²ç»å±æ€§å¡«å……è¿‡çš„bean
</span></span></span><span style=display:flex><span><span style=color:#75715e>             */</span>
</span></span><span style=display:flex><span>        TargetSource targetSource <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TargetSource<span style=color:#f92672>(</span>bean<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//å¡«å……åˆ›å»ºä»£ç†å¯¹è±¡æ‰€éœ€è¦çš„å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        advisedSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>setTargetSource</span><span style=color:#f92672>(</span>targetSource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        advisedSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethodInterceptor</span><span style=color:#f92672>((</span>MethodInterceptor<span style=color:#f92672>)</span> advisor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAdvice</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        advisedSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethodMatcher</span><span style=color:#f92672>(</span>advisor<span style=color:#f92672>.</span><span style=color:#a6e22e>getPointcut</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getMethodMatcher</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        advisedSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>setProxyTargetClass</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è°ƒç”¨ä»£ç†å·¥å‚ä¸­çš„æ–¹æ³•å¾—åˆ°ä¸€ä¸ªä»£ç†å¯¹è±¡å¹¶è¿”å›
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ProxyFactory<span style=color:#f92672>(</span>advisedSupport<span style=color:#f92672>).</span><span style=color:#a6e22e>getProxy</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//å½“å‰beanæ²¡æœ‰åˆ›å»ºæˆåŠŸä»£ç†å¯¹è±¡ï¼Œå°±è¿”å›ç©º
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> bean<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>TargetSource</code>ï¼šåˆ›å»ºä»£ç†å¯¹è±¡æ—¶ï¼Œè¦å¾—åˆ°è¢«ä»£ç†å¯¹è±¡å®ç°äº†å“ªäº›æ¥å£ï¼Œè€Œ<code>Cglib</code>æ˜¯é€šè¿‡ç»§æ‰¿å®ç°çš„ï¼Œæ‰€ä»¥è¦å¢åŠ ä¸€æ­¥åˆ¤æ–­ï¼Œä»è€Œæ‹¿åˆ°çœŸæ­£çš„è¢«ä»£ç†å¯¹è±¡æ‰€å®ç°çš„æ¥å£ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> Class<span style=color:#f92672>&lt;?&gt;[]</span> getTargetClass<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Class<span style=color:#f92672>&lt;?&gt;</span> clazz <span style=color:#f92672>=</span> target<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**@author zzzi
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @date 2023/11/14 13:49
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * è·å–çœŸæ­£çš„è¢«ä»£ç†å¯¹è±¡çš„ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>    clazz <span style=color:#f92672>=</span> ClassUtils<span style=color:#f92672>.</span><span style=color:#a6e22e>isCglibProxyClass</span><span style=color:#f92672>(</span>clazz<span style=color:#f92672>)</span> <span style=color:#f92672>?</span> clazz<span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>()</span> <span style=color:#f92672>:</span> clazz<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> clazz<span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>AbstractAutowireCapableBeanFactory</code>ï¼š<code>createBean</code>æ–¹æ³•ä¸­åœ¨ç©ºbeanåˆ›å»ºä¹‹åæ–°å¢ä¸€æ­¥ï¼Œå¹¶ä¸”ä¿®æ”¹é»˜è®¤çš„beanå¯¹è±¡åˆ›å»ºé€»è¾‘ä¸º<code>JDK</code>ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>boolean</span> continueWithPropertyPopulation <span style=color:#f92672>=</span> applyBeanPostProcessorsAfterInstantiation<span style=color:#f92672>(</span>beanName<span style=color:#f92672>,</span> bean<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>continueWithPropertyPopulation<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> bean<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//ä¿®æ”¹é»˜è®¤çš„beanå¯¹è±¡åˆ›å»ºé€»è¾‘ä¸ºJDK
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>private</span> InstantiationStrategy instantiationStrategy <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SimpleInstantiationStrategy<span style=color:#f92672>();</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><p>â€‹ å‰©ä¸‹çš„æ“ä½œä¸ä¹‹å‰åˆ›å»ºåŠ¨æ€ä»£ç†ä¸€æ ·ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªé€šçŸ¥ï¼Œå£°æ˜å¦‚ä½•å¢å¼ºè¢«ä»£ç†å¯¹è±¡ï¼Œç„¶ååœ¨xmlæ–‡ä»¶ä¸­é…ç½®beanï¼Œé€šçŸ¥ï¼Œæ–¹æ³•æ‹¦æˆªå™¨ï¼Œåˆ‡é¢ã€‚ç„¶åç›´æ¥æ‰§è¡Œï¼Œå½“æŸä¸€ä¸ªbeanè¢«åˆ‡é¢ä¸­çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼åŒ¹é…æˆåŠŸæ—¶å°±ä¼šç»™ä»–åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¯¹å¤–æ²¡æœ‰äº§ç”Ÿä»»ä½•å¼‚æ ·ï¼ŒåæœŸè·å–è¿™ä¸ªbeançš„æ—¶å€™ï¼Œè·å–çš„ä¹Ÿæ˜¯ä»£ç†å¯¹è±¡ï¼Œæ‰§è¡Œå…¶ä¸­çš„æ–¹æ³•ä¼šæ‰§è¡Œæ–¹æ³•åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸçš„æ–¹æ³•æ‰§è¡Œæ–¹æ³•æ‹¦æˆªå™¨ä¸­çš„é€»è¾‘ï¼Œä»è€Œæ‰§è¡Œé€šçŸ¥å’Œè¢«ä»£ç†å¯¹è±¡çš„åŸå§‹æ–¹æ³•ã€‚ç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯å¢å¼ºbeanä¹‹åçš„ç»“æœäº†ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å†…éƒ¨è¢«ä»£ç†çš„å¯¹è±¡å±æ€§å¡«å……è¿‡äº†</p><h3 id=beançš„åˆ›å»ºå’Œè·å–>beançš„åˆ›å»ºå’Œè·å–
<a class=header-anchor href=#bean%e7%9a%84%e5%88%9b%e5%bb%ba%e5%92%8c%e8%8e%b7%e5%8f%96></a></h3><p>ä¸‹é¢é€šè¿‡debugçš„æ–¹å¼æè¿°æ–°çš„ä»£ç†å¯¹è±¡åˆ›å»ºæµç¨‹ï¼Œè¢«ä»£ç†çš„å¯¹è±¡æ˜¯<code>userService</code>ï¼š</p><ol><li><p>æ‰«æé…ç½®æ–‡ä»¶ï¼Œæ‹¿åˆ°æ‰€æœ‰beançš„æ³¨å†Œä¿¡æ¯åˆ°æ³¨å†Œè¡¨ä¸­ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535330.png alt=image-20231114150605475></p></li><li><p><code>invokeBeanFactoryPostProcessors</code>æ‰§è¡Œå®ä¾‹åŒ–å‰çš„ä¿®æ”¹æ“ä½œï¼Œä¸»è¦æ˜¯æ›¿æ¢xmlé…ç½®ä¸­çš„å ä½ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸²å¤„ç†å™¨ä¿å­˜åˆ°å®¹å™¨ä¸­ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535331.png alt=image-20231114150729673></p></li><li><p><strong>ä¿å­˜</strong>å®ä¾‹åŒ–åçš„ä¿®æ”¹é€»è¾‘ï¼Œè¿™é‡Œæœ‰<strong>ä¸¤ä¸ª</strong>ä¿®æ”¹é€»è¾‘ï¼Œä¸€ä¸ªæ˜¯åˆ©ç”¨<strong>æ³¨è§£å¡«å……å±æ€§</strong>çš„<code>AutowiredAnnotationBeanPostProcessor</code>ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯<code>postProcessPropertyValues</code>ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯<strong>åˆ›å»ºä»£ç†å¯¹è±¡</strong>çš„<code>DefaultAdvisorAutoProxyCreator</code>ï¼Œæ ¸å¿ƒæ–¹æ³•åœ¨<code>postProcessAfterInitialization</code>ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535333.png alt=image-20231114150950924></p></li><li><p>åˆå§‹åŒ–æ‰€æœ‰çš„beanå¯¹è±¡ï¼Œè¿™é‡Œåªå¯¹<code>userService</code>è¿›è¡Œäº†ä»£ç†ï¼Œæ‰€ä»¥åªä»‹ç»<code>userService</code>çš„åˆå§‹åŒ–æ­¥éª¤ï¼š</p><ol><li><p><code>resolveBeforeInstantiation</code>è¿”å›ç©ºï¼Œä»€ä¹ˆä¹Ÿä¸åš</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535334.png alt=image-20231114152851691></p></li><li><p><code>createBeanInstance</code>åˆ›å»ºç©ºbeanï¼Œç°åœ¨çš„beanè¿˜æ˜¯æ²¡æœ‰è¢«ä»£ç†çš„ç©ºbean</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535335.png alt=image-20231114152914545></p></li><li><p><code>applyBeanPostProcessorsAfterInstantiation</code>ä¸­è§¦å‘æ‰€æœ‰<code>postProcessAfterInstantiation</code>æ–¹æ³•çš„æ‰§è¡Œï¼Œæ²¡æœ‰åšä»»ä½•æ”¹å˜</p></li><li><p><code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code>å’Œ<code>applyPropertyValues</code>ç»™åˆšæ‰çš„ç©ºbeanå¡«å……å±æ€§ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535336.png alt=image-20231114151427109></p></li><li><p><code>initializeBean</code>ä¸­æ‰§è¡Œäº†ä¸‹é¢å‡ æ­¥ï¼š</p><ul><li><p>å®¹å™¨èµ„æºæ³¨å…¥ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535337.png alt=image-20231114151512378></p></li><li><p><code>applyBeanPostProcessorsBeforeInitialization</code>æ‰§è¡Œåˆå§‹åŒ–å‰çš„æ“ä½œï¼Œè¿™é‡Œå°è¯•è¿›è¡Œåº”ç”¨ä¸Šä¸‹æ–‡çš„å®¹å™¨èµ„æºæ³¨å…¥</p></li><li><p><code>invokeInitMethods</code>æ‰§è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœbeanæºå¸¦æœ‰åˆå§‹åŒ–æ–¹æ³•å°±åœ¨è¿™é‡Œæ‰§è¡Œ</p></li><li><p><code>applyBeanPostProcessorsAfterInitialization</code>æ‰§è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»ºï¼Œæ˜¯<strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼Œæœ¬èŠ‚ä¸­å°†AOPçš„åˆ›å»º<strong>å»¶å</strong>åˆ°è¿™é‡Œï¼Œä¿è¯è¢«ä»£ç†å¯¹è±¡å·²ç»<strong>å®Œæˆ</strong>äº†å±æ€§æ³¨å…¥ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535338.png alt=image-20231114151708224></p><p>ä»£ç†å¯¹è±¡åˆ›å»ºæˆåŠŸä¹‹åï¼Œè‡ªèº«çš„å±æ€§<strong>ä¸ºç©º</strong>ï¼Œä½†æ˜¯å†…éƒ¨<code>target</code>ä¸­çš„å±æ€§<strong>ä¸æ˜¯ç©º</strong>ï¼ŒåæœŸæ‰§è¡Œæ–¹æ³•æ—¶ï¼Œè¢«æ–¹æ³•æ‹¦æˆªå™¨æ‹¦æˆªä¹‹åï¼Œåœ¨å†…éƒ¨è°ƒç”¨åŸå§‹æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œä¼šè°ƒç”¨<code>target</code>çš„åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œ<strong>è€Œ<code>target</code>ä¸­å‚æ•°å·²ç»å¡«å……</strong>ï¼Œè§£å†³äº†ä¹‹å‰ä»£ç†å¯¹è±¡ä¸­å‚æ•°ä¸ºç©ºçš„é—®é¢˜</p></li></ul></li><li><p>å¦‚æœå½“å‰è¢«ä»£ç†çš„å¯¹è±¡æ˜¯å•ä¾‹çš„è¯ï¼Œé‚£ä¹ˆå°†åˆ›å»ºå®Œæˆçš„ä»£ç†å¯¹è±¡ä¿å­˜åˆ°<strong>å•ä¾‹æ± </strong>ä¸­</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535339.png alt=image-20231114152219160></p></li></ol></li><li><p>åˆ›å»ºå®Œæˆä¹‹åï¼Œä»å•ä¾‹æ± ä¸­è·å–åˆ°beanå¯¹è±¡ï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡ï¼Œæœ€ç»ˆçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311141535340.png alt=image-20231114152328360></p><p>userServiceåˆ›å»ºå®Œä»£ç†å¯¹è±¡ä¹‹åçš„ç»“æ„ä¸ºï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202403111607991.png alt=image-20240311160755989></p></li></ol><h2 id=æ€»ç»“>æ€»ç»“
<a class=header-anchor href=#%e6%80%bb%e7%bb%93></a></h2><p>â€‹ æœ¬èŠ‚ä¸­ä¸ºäº†ç»™åŠ¨æ€ä»£ç†çš„å¯¹è±¡è¿›è¡Œå±æ€§å¡«å……ï¼Œå¦è¾Ÿè¹Šå¾„ï¼Œä¸ç›´æ¥å¡«å……ä»£ç†å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œè€Œæ˜¯å¡«å……å†…éƒ¨<code>target</code>è¢«ä»£ç†å¯¹è±¡çš„å±æ€§ï¼Œè€Œè¿™ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å±æ€§å¡«å……å·²ç»åœ¨<code>createBean</code>ä¸­åšè¿‡äº†ï¼Œæ‰€ä»¥å°†ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºå»¶åï¼Œå½“è¢«ä»£ç†å¯¹è±¡çš„å±æ€§å¡«å……å®Œæ¯•ä¹‹åå†è¿›è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»ºï¼Œå¹¶ä¸”å°†<code>target</code>èµ‹å€¼ä¸ºè¿™ä¸ªå±æ€§å¡«å……å®Œæ¯•ä¹‹åçš„è¢«ä»£ç†å¯¹è±¡ï¼Œè¿™æ ·æ—¢ä¿è¯äº†ä¸æ”¹å˜beanæ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸåˆä¿è¯äº†AOPè¿‡åçš„è¢«ä»£ç†å¯¹è±¡å†…éƒ¨çš„å±æ€§æœ‰å€¼ã€‚åæœŸæ‰§è¡Œè¢«ä»£ç†å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ—¶ä¼šè°ƒç”¨<code>target</code>ä¸­çš„åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œè€Œ<code>target</code>ä¸­ä¿å­˜çš„æ˜¯å±æ€§å¡«å……è¿‡åçš„è¢«ä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥æœ€ç»ˆçš„åŸå§‹æ–¹æ³•æ‰§è¡Œæ—¶å°±å¯ä»¥ä½¿ç”¨é‡Œé¢çš„ä¸€äº›å±æ€§ï¼Œä»è€Œè§£å†³äº†ä¹‹å‰çš„é—®é¢˜</p><blockquote><p>æ ¸å¿ƒå°±æ˜¯å°†ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºå»¶åï¼Œ<code>target</code>ä¿å­˜çš„æ˜¯å±æ€§å¡«å……ä¹‹åçš„è¢«ä»£ç†å¯¹è±¡</p></blockquote></div><footer class=post-footer><div class=post-tags><a href=/tags/spring>spring</a>
<a href=/tags/%e6%ba%90%e7%a0%81>æºç </a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/15.%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/ rel=next title=15.ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–><i class="fa fa-chevron-left"></i> 15.ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–</a></div><div class="post-nav-prev post-nav-item"><a href=/post/13.%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7%E4%BF%A1%E6%81%AF/ rel=prev title=13.é€šè¿‡æ³¨è§£æ³¨å…¥å±æ€§ä¿¡æ¯>13.é€šè¿‡æ³¨è§£æ³¨å…¥å±æ€§ä¿¡æ¯
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2024</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>zzziæä¾›æŠ€æœ¯æ”¯æŒ</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zzzicode.github.io/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"è¯·æ–‡æ˜å‘è¨€å“Ÿ ãƒ¾(â‰§â–½â‰¦*)o","reaction":true,"reactiontext":["ç‚¹èµ","è¸©ä¸€ä¸‹","å¾—æ„","ä¸å±‘","å°´å°¬","ç¡è§‰"],"reactiontitle":"ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"å¿«æ¥å‘è¡¨ä½ çš„æ„è§å§ (â‰§âˆ€â‰¦)ã‚","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.b0e26367f0461fb41ac6f947dc2af3620375dc44aa8945e6c2b1480d342c65d1.js defer></script>
<script type=text/javascript src=/js/math.min.a6ada19a368d85dad9ead2040d86ae561a867fafef89391d1aa2aa5909366509.js defer></script></body></html>