<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.111.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon_next.png><meta itemprop=name content="Spring02"><meta itemprop=description content="spring02"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zzzicode.github.io/imgs/avatar.png"><meta itemprop=keywords content="spring"><meta property="og:type" content="article"><meta property="og:title" content="Spring02"><meta property="og:description" content="spring02"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zzzicode.github.io/post/spring02/"><meta property="og:site_name" content="zzziçš„å°ç«™"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="zzzi"><meta property="article:published_time" content="2023-10-05 16:33:25 +0800 CST"><meta property="article:modified_time" content="2023-10-05 16:33:25 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4b7f3d9c4ef8db1505229a7dcd2c4e3ab17cd4960dd8a78b503c013770ad56a6.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"math":{"js":{"file":"es5/tex-mml-chtml.js","name":"mathjax","version":"3.2.0"},"render":"mathjax"},"path":"spring02","permalink":"https://zzzicode.github.io/post/spring02/","title":"Spring02"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Spring02 - zzziçš„å°ç«™</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>zzziçš„å°ç«™</h1><i class=logo-line></i></a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£
<span class=badge>217</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#iocdié…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean>IOC/DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean</a><ul><li><a href=#æ¡ˆä¾‹æ•°æ®æºå¯¹è±¡ç®¡ç†>æ¡ˆä¾‹:æ•°æ®æºå¯¹è±¡ç®¡ç†</a><ul><li><a href=#ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#æ€è·¯åˆ†æ>æ€è·¯åˆ†æ</a></li><li><a href=#å®ç°druidç®¡ç†>å®ç°Druidç®¡ç†</a></li><li><a href=#å®ç°c3p0ç®¡ç†>å®ç°C3P0ç®¡ç†</a></li></ul></li><li><a href=#åŠ è½½propertiesæ–‡ä»¶>åŠ è½½propertiesæ–‡ä»¶</a><ul><li><a href=#ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–>ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–</a></li><li><a href=#è¯»å–å•ä¸ªå±æ€§>è¯»å–å•ä¸ªå±æ€§</a></li><li><a href=#åŠ è½½propertiesæ–‡ä»¶å°ç»“>åŠ è½½propertiesæ–‡ä»¶å°ç»“</a></li></ul></li></ul></li><li><a href=#æ ¸å¿ƒå®¹å™¨>æ ¸å¿ƒå®¹å™¨</a><ul><li><a href=#ç¯å¢ƒå‡†å¤‡-1>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#å®¹å™¨>å®¹å™¨</a><ul><li><a href=#å®¹å™¨çš„åˆ›å»ºæ–¹å¼>å®¹å™¨çš„åˆ›å»ºæ–¹å¼</a></li><li><a href=#beançš„ä¸‰ç§è·å–æ–¹å¼>Beançš„ä¸‰ç§è·å–æ–¹å¼</a></li><li><a href=#å®¹å™¨ç±»å±‚æ¬¡ç»“æ„>å®¹å™¨ç±»å±‚æ¬¡ç»“æ„</a></li><li><a href=#beanfactoryçš„ä½¿ç”¨>BeanFactoryçš„ä½¿ç”¨</a></li></ul></li><li><a href=#æ ¸å¿ƒå®¹å™¨æ€»ç»“>æ ¸å¿ƒå®¹å™¨æ€»ç»“</a><ul><li><a href=#å®¹å™¨ç›¸å…³>å®¹å™¨ç›¸å…³</a></li><li><a href=#beanç›¸å…³>beanç›¸å…³</a></li><li><a href=#ä¾èµ–æ³¨å…¥ç›¸å…³>ä¾èµ–æ³¨å…¥ç›¸å…³</a></li></ul></li></ul></li><li><a href=#iocdiæ³¨è§£å¼€å‘>IOC/DIæ³¨è§£å¼€å‘</a><ul><li><a href=#31-ç¯å¢ƒå‡†å¤‡>3.1 ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#32-æ³¨è§£å¼€å‘å®šä¹‰bean>3.2 æ³¨è§£å¼€å‘å®šä¹‰bean</a><ul><li><a href=#æ­¥éª¤1åˆ é™¤åŸxmlé…ç½®>æ­¥éª¤1:åˆ é™¤åŸXMLé…ç½®</a></li><li><a href=#æ­¥éª¤2daoä¸Šæ·»åŠ æ³¨è§£>æ­¥éª¤2:Daoä¸Šæ·»åŠ æ³¨è§£</a></li><li><a href=#æ­¥éª¤3é…ç½®springçš„æ³¨è§£åŒ…æ‰«æ>æ­¥éª¤3:é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ</a></li><li><a href=#æ­¥éª¤4è¿è¡Œç¨‹åº-1>æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº</a></li><li><a href=#æ­¥éª¤5serviceä¸Šæ·»åŠ æ³¨è§£>æ­¥éª¤5:Serviceä¸Šæ·»åŠ æ³¨è§£</a></li><li><a href=#æ­¥éª¤6è¿è¡Œç¨‹åº>æ­¥éª¤6:è¿è¡Œç¨‹åº</a></li><li><a href=#çŸ¥è¯†ç‚¹1componentç­‰>çŸ¥è¯†ç‚¹1:@Componentç­‰</a></li></ul></li><li><a href=#32-çº¯æ³¨è§£å¼€å‘æ¨¡å¼>3.2 çº¯æ³¨è§£å¼€å‘æ¨¡å¼</a><ul><li><a href=#321-æ€è·¯åˆ†æ>3.2.1 æ€è·¯åˆ†æ</a></li><li><a href=#322-å®ç°æ­¥éª¤>3.2.2 å®ç°æ­¥éª¤</a></li><li><a href=#çŸ¥è¯†ç‚¹1configuration>çŸ¥è¯†ç‚¹1ï¼š@Configuration</a></li><li><a href=#çŸ¥è¯†ç‚¹2componentscan>çŸ¥è¯†ç‚¹2ï¼š@ComponentScan</a></li></ul></li><li><a href=#33-æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†>3.3 æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</a><ul><li><a href=#331-ç¯å¢ƒå‡†å¤‡>3.3.1 ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#332-beançš„ä½œç”¨èŒƒå›´>3.3.2 Beançš„ä½œç”¨èŒƒå›´</a></li><li><a href=#333-beançš„ç”Ÿå‘½å‘¨æœŸ>3.3.3 Beançš„ç”Ÿå‘½å‘¨æœŸ</a></li></ul></li><li><a href=#34-æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥>3.4 æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥</a><ul><li><a href=#341-ç¯å¢ƒå‡†å¤‡>3.4.1 ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#342-æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥>3.4.2 æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥</a></li><li><a href=#343-æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥>3.4.3 æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥</a></li><li><a href=#344-ç®€å•æ•°æ®ç±»å‹æ³¨å…¥>3.4.4 ç®€å•æ•°æ®ç±»å‹æ³¨å…¥</a></li><li><a href=#345-æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶>3.4.5 æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶</a></li><li><a href=#çŸ¥è¯†ç‚¹1autowired>çŸ¥è¯†ç‚¹1ï¼š@Autowired</a></li><li><a href=#çŸ¥è¯†ç‚¹2qualifier>çŸ¥è¯†ç‚¹2ï¼š@Qualifier</a></li><li><a href=#çŸ¥è¯†ç‚¹3value>çŸ¥è¯†ç‚¹3ï¼š@Value</a></li><li><a href=#çŸ¥è¯†ç‚¹4propertysource>çŸ¥è¯†ç‚¹4ï¼š@PropertySource</a></li></ul></li></ul></li><li><a href=#iocdiæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean>IOC/DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</a><ul><li><a href=#ç¯å¢ƒå‡†å¤‡-2>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean>æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</a><ul><li><a href=#æ­¥éª¤1å¯¼å…¥å¯¹åº”çš„jaråŒ…>æ­¥éª¤1:å¯¼å…¥å¯¹åº”çš„jaråŒ…</a></li><li><a href=#æ­¥éª¤2åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•>æ­¥éª¤2:åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•</a></li><li><a href=#æ­¥éª¤3åœ¨æ–¹æ³•ä¸Šæ·»åŠ beanæ³¨è§£>æ­¥éª¤3:åœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>@Bean</code>æ³¨è§£</a></li><li><a href=#æ­¥éª¤4ä»iocå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°>æ­¥éª¤4:ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°</a></li></ul></li><li><a href=#å¼•å…¥å¤–éƒ¨é…ç½®ç±»>å¼•å…¥å¤–éƒ¨é…ç½®ç±»</a><ul><li><a href=#431-ä½¿ç”¨åŒ…æ‰«æå¼•å…¥>4.3.1 ä½¿ç”¨åŒ…æ‰«æå¼•å…¥</a></li><li><a href=#432-ä½¿ç”¨importå¼•å…¥>4.3.2 ä½¿ç”¨<code>@Import</code>å¼•å…¥</a></li></ul></li><li><a href=#çŸ¥è¯†ç‚¹1bean>çŸ¥è¯†ç‚¹1ï¼š@Bean</a></li><li><a href=#çŸ¥è¯†ç‚¹2import>çŸ¥è¯†ç‚¹2ï¼š@Import</a></li><li><a href=#æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº>æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº</a><ul><li><a href=#ç®€å•æ•°æ®ç±»å‹>ç®€å•æ•°æ®ç±»å‹</a></li><li><a href=#å¼•ç”¨æ•°æ®ç±»å‹>å¼•ç”¨æ•°æ®ç±»å‹</a></li></ul></li></ul></li><li><a href=#æ³¨è§£å¼€å‘æ€»ç»“>æ³¨è§£å¼€å‘æ€»ç»“</a></li><li><a href=#springæ•´åˆ>Springæ•´åˆ</a><ul><li><a href=#springæ•´åˆmybatisæ€è·¯åˆ†æ>Springæ•´åˆMybatisæ€è·¯åˆ†æ</a><ul><li><a href=#ç¯å¢ƒå‡†å¤‡-3>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#æ•´åˆæ€è·¯åˆ†æ>æ•´åˆæ€è·¯åˆ†æ</a></li></ul></li><li><a href=#springæ•´åˆmybatis>Springæ•´åˆMybatis</a><ul><li><a href=#æ­¥éª¤1é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…>æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…</a></li><li><a href=#æ­¥éª¤2åˆ›å»ºspringçš„ä¸»é…ç½®ç±»>æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»</a></li><li><a href=#æ­¥éª¤3åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»>æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»</a></li><li><a href=#æ­¥éª¤4ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»>æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»</a></li><li><a href=#æ­¥éª¤5åˆ›å»ºmybatisé…ç½®ç±»å¹¶é…ç½®sqlsessionfactory>æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory</a></li><li><a href=#æ­¥éª¤6ä¸»é…ç½®ç±»ä¸­å¼•å…¥mybatisé…ç½®ç±»>æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»</a></li><li><a href=#æ­¥éª¤7ç¼–å†™è¿è¡Œç±»>æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»</a></li><li><a href=#æ­¥éª¤8è¿è¡Œç¨‹åº>æ­¥éª¤8:è¿è¡Œç¨‹åº</a></li></ul></li><li><a href=#springæ•´åˆjunit>Springæ•´åˆJunit</a><ul><li><a href=#ç¯å¢ƒå‡†å¤‡-4>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#æ•´åˆjunitæ­¥éª¤>æ•´åˆJunitæ­¥éª¤</a></li><li><a href=#çŸ¥è¯†ç‚¹1runwith>çŸ¥è¯†ç‚¹1ï¼š@RunWith</a></li><li><a href=#çŸ¥è¯†ç‚¹2contextconfiguration>çŸ¥è¯†ç‚¹2ï¼š@ContextConfiguration</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=zzzi src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>zzzi</p><div class=site-description itemprop=description>make_tuple("å·¥ä½œ","è®ºæ–‡")</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>217</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>5</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>46</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zzziCode title="Github â†’ https://github.com/zzziCode" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>å‡¡æ¢¦æ˜Ÿå°˜</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zzzicode.github.io/post/spring02/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="zzzi"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="zzzi"><meta itemprop=description content="make_tuple(&#34;å·¥ä½œ&#34;,&#34;è®ºæ–‡&#34;)"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Spring02"><meta itemprop=description content="spring02"></span><header class=post-header><h1 class=post-title itemprop="name headline">Spring02</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š</span>
<time title="åˆ›å»ºæ—¶é—´ï¼š2023-10-05 16:33:25 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-10-05 16:33:25 +0800 CST">2023-10-05</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title=åˆ†ç±»äº>åˆ†ç±»äºï¼š</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0 itemprop=url rel=index><span itemprop=name>å­¦ä¹ ç¬”è®°</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=å­—æ•°><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>å­—æ•°ï¼š</span>
<span>21292</span></span>
<span class=post-meta-item title=é˜…è¯»><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>é˜…è¯»ï¼š&ap;</span>
<span>43åˆ†é’Ÿ</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><blockquote><p>ğŸ‘‹ spring02</p></blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨IOCå’ŒDIç®¡ç†Beanï¼Œå¹¶ä¸”äº†è§£ä»€ä¹ˆæ˜¯springä¸­çš„æ³¨è§£å¼€å‘ï¼Œæœ€åå°†mybatiså’Œjunitæ•´åˆåˆ°springä¸­</p><h2 id=iocdié…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean>IOC/DIé…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean
<a class=header-anchor href=#iocdi%e9%85%8d%e7%bd%ae%e7%ae%a1%e7%90%86%e7%ac%ac%e4%b8%89%e6%96%b9bean></a></h2><p>å‰é¢æ‰€è®²çš„çŸ¥è¯†ç‚¹éƒ½æ˜¯åŸºäºæˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œç°åœ¨å¦‚æœæœ‰éœ€æ±‚è®©æˆ‘ä»¬å»ç®¡ç†ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„ç±»ï¼Œè¯¥å¦‚ä½•ç®¡ç†?</p><h3 id=æ¡ˆä¾‹æ•°æ®æºå¯¹è±¡ç®¡ç†>æ¡ˆä¾‹:æ•°æ®æºå¯¹è±¡ç®¡ç†
<a class=header-anchor href=#%e6%a1%88%e4%be%8b%e6%95%b0%e6%8d%ae%e6%ba%90%e5%af%b9%e8%b1%a1%e7%ae%a1%e7%90%86></a></h3><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸‹å¯¹äºç¬¬ä¸‰æ–¹beanè¯¥å¦‚ä½•è¿›è¡Œé…ç½®ç®¡ç†ã€‚</p><p>ä»¥åæˆ‘ä»¬ä¼šç”¨åˆ°å¾ˆå¤šç¬¬ä¸‰æ–¹çš„bean,æœ¬æ¬¡æ¡ˆä¾‹å°†ä½¿ç”¨å’±ä»¬å‰é¢æåˆ°è¿‡çš„æ•°æ®æº<code>Druid(å¾·é²ä¼Š)</code>å’Œ<code>C3P0</code>æ¥é…ç½®å­¦ä¹ ä¸‹ã€‚</p><h4 id=ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87></a></h4><p>å­¦ä¹ ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636404.png alt=1629860338328></p></li><li><p>pom.xmlæ·»åŠ ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>resourcesä¸‹æ·»åŠ springçš„é…ç½®æ–‡ä»¶applicationContext.xml</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ç¼–å†™ä¸€ä¸ªè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=æ€è·¯åˆ†æ>æ€è·¯åˆ†æ
<a class=header-anchor href=#%e6%80%9d%e8%b7%af%e5%88%86%e6%9e%90></a></h4><p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬æ¥å¯¹æ•°æ®æºè¿›è¡Œé…ç½®ç®¡ç†ï¼Œå…ˆæ¥åˆ†æä¸‹æ€è·¯:</p><blockquote><p>éœ€æ±‚:ä½¿ç”¨Springçš„IOCå®¹å™¨æ¥ç®¡ç†Druidè¿æ¥æ± å¯¹è±¡</p><p>1.ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ï¼Œéœ€è¦åœ¨pom.xmlæ·»åŠ ä¾èµ–</p><p>2.åœ¨é…ç½®æ–‡ä»¶ä¸­å°†ã€ç¬¬ä¸‰æ–¹çš„ç±»ã€‘åˆ¶ä½œæˆä¸€ä¸ª<code>bean</code>ï¼Œè®©IOCå®¹å™¨è¿›è¡Œç®¡ç†</p><p>3.æ•°æ®åº“è¿æ¥éœ€è¦åŸºç¡€çš„å››è¦ç´ <code>é©±åŠ¨</code>ã€<code>è¿æ¥</code>ã€<code>ç”¨æˆ·å</code>å’Œ<code>å¯†ç </code>ï¼Œã€å¦‚ä½•æ³¨å…¥ã€‘åˆ°å¯¹åº”çš„beanä¸­</p><p>4.ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡ï¼Œå°†å…¶æ‰“å°åˆ°æ§åˆ¶å°æŸ¥çœ‹ç»“æœ</p></blockquote><p><strong>æ€è€ƒ:</strong></p><ul><li>ç¬¬ä¸‰æ–¹çš„ç±»æŒ‡çš„æ˜¯ä»€ä¹ˆ?</li><li>å¦‚ä½•æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ ?</li></ul><h4 id=å®ç°druidç®¡ç†>å®ç°Druidç®¡ç†
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0druid%e7%ae%a1%e7%90%86></a></h4><p>å¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜ï¼ŒæŠŠä¸‹é¢çš„æ¡ˆä¾‹å®ç°ä¸‹:</p><h5 id=æ­¥éª¤1å¯¼å…¥druidçš„ä¾èµ–>æ­¥éª¤1:å¯¼å…¥<code>druid</code>çš„ä¾èµ–
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%af%bc%e5%85%a5druid%e7%9a%84%e4%be%9d%e8%b5%96></a></h5><p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>com.alibaba<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>druid<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.1.16<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2é…ç½®ç¬¬ä¸‰æ–¹bean>æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e9%85%8d%e7%bd%ae%e7%ac%ac%e4%b8%89%e6%96%b9bean></a></h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>DruidDataSource</code>çš„é…ç½®</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--ç®¡ç†DruidDataSourceå¯¹è±¡--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--ç›¸å½“äºè°ƒç”¨è¿™ä¸ªç±»ä¸­çš„setteræ–¹æ³•æ¥æ³¨å…¥--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driverClassName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è¯´æ˜:</strong></p><ul><li>driverClassName:æ•°æ®åº“é©±åŠ¨</li><li>url:æ•°æ®åº“è¿æ¥åœ°å€</li><li>username:æ•°æ®åº“è¿æ¥ç”¨æˆ·å</li><li>password:æ•°æ®åº“è¿æ¥å¯†ç </li><li>æ•°æ®åº“è¿æ¥çš„å››è¦ç´ è¦å’Œè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ä¿¡æ¯ä¸€è‡´ã€‚</li></ul><h5 id=æ­¥éª¤3ä»iocå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡>æ­¥éª¤3:ä»IOCå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e4%bb%8eioc%e5%ae%b9%e5%99%a8%e4%b8%ad%e8%8e%b7%e5%8f%96%e5%af%b9%e5%ba%94%e7%9a%84bean%e5%af%b9%e8%b1%a1></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>       ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>       DataSource dataSource <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>DataSource<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;dataSource&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>       System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>dataSource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤4è¿è¡Œç¨‹åº>æ­¥éª¤4:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f></a></h5><p>æ‰“å°å¦‚ä¸‹ç»“æœ: è¯´æ˜ç¬¬ä¸‰æ–¹beanå¯¹è±¡å·²ç»è¢«springçš„IOCå®¹å™¨è¿›è¡Œç®¡ç†</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636405.png alt=1629887733081></p><p>åšå®Œæ¡ˆä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆšæ‰æ€è€ƒçš„ä¸¤ä¸ªé—®é¢˜ç­”æ¡ˆè¯´ä¸‹:</p><ul><li><p>ç¬¬ä¸‰æ–¹çš„ç±»æŒ‡çš„æ˜¯ä»€ä¹ˆ?</p><blockquote><p>DruidDataSource</p></blockquote></li><li><p>å¦‚ä½•æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ ?</p><blockquote><p>setteræ³¨å…¥</p></blockquote></li></ul><h4 id=å®ç°c3p0ç®¡ç†>å®ç°C3P0ç®¡ç†
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0c3p0%e7%ae%a1%e7%90%86></a></h4><p>å®Œæˆäº†DruidDataSourceçš„ç®¡ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åŠ æ·±ä¸‹ç»ƒä¹ ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥ç®¡ç†<code>C3P0</code>æ•°æ®æºï¼Œå…·ä½“çš„å®ç°æ­¥éª¤æ˜¯ä»€ä¹ˆå‘¢?</p><blockquote><p>éœ€æ±‚:ä½¿ç”¨Springçš„IOCå®¹å™¨æ¥ç®¡ç†C3P0è¿æ¥æ± å¯¹è±¡</p><p>å®ç°æ–¹æ¡ˆå’Œä¸Šé¢åŸºæœ¬ä¸€è‡´ï¼Œé‡ç‚¹è¦å…³æ³¨ç®¡ç†çš„æ˜¯å“ªä¸ªbeanå¯¹è±¡`?</p></blockquote><h5 id=æ­¥éª¤1å¯¼å…¥c3p0çš„ä¾èµ–>æ­¥éª¤1:å¯¼å…¥<code>C3P0</code>çš„ä¾èµ–
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%af%bc%e5%85%a5c3p0%e7%9a%84%e4%be%9d%e8%b5%96></a></h5><p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>c3p0<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>c3p0<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>0.9.1.2<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>å¯¹äºæ–°çš„æŠ€æœ¯ï¼Œä¸çŸ¥é“å…·ä½“çš„åæ ‡è¯¥å¦‚ä½•æŸ¥æ‰¾?</strong></p><ul><li><p>ç›´æ¥ç™¾åº¦æœç´¢</p></li><li><p>ä»mvnçš„ä»“åº“<code>https://mvnrepository.com/</code>ä¸­è¿›è¡Œæœç´¢</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636407.png alt=1629888540286></p></li></ul><h5 id=æ­¥éª¤2é…ç½®ç¬¬ä¸‰æ–¹bean-1>æ­¥éª¤2:é…ç½®ç¬¬ä¸‰æ–¹bean
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e9%85%8d%e7%bd%ae%e7%ac%ac%e4%b8%89%e6%96%b9bean-1></a></h5><p>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dataSource&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.mchange.v2.c3p0.ComboPooledDataSource&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driverClass&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;jdbcUrl&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;maxPoolSize&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;1000&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„:</strong></p><ul><li>ComboPooledDataSourceçš„å±æ€§æ˜¯é€šè¿‡setteræ–¹å¼è¿›è¡Œæ³¨å…¥</li><li>æƒ³æ³¨å…¥å±æ€§å°±éœ€è¦åœ¨ComboPooledDataSourceç±»æˆ–å…¶ä¸Šå±‚ç±»ä¸­æœ‰æä¾›å±æ€§å¯¹åº”çš„setteræ–¹æ³•</li><li>C3P0çš„å››ä¸ªå±æ€§å’ŒDruidçš„å››ä¸ªå±æ€§çš„nameåç§°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œsetterçš„æ–¹æ³•åç§°ä¸ä¸€æ ·</li></ul><h5 id=æ­¥éª¤3è¿è¡Œç¨‹åº>æ­¥éª¤3:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f></a></h5><p>ç¨‹åºä¼šæŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636408.png alt=1629889170229></p><p>æŠ¥çš„é”™ä¸º<strong>ClassNotFoundException</strong>,ç¿»è¯‘å‡ºæ¥æ˜¯<code>ç±»æ²¡æœ‰å‘ç°çš„å¼‚å¸¸</code>ï¼Œå…·ä½“çš„ç±»ä¸º<code>com.mysql.jdbc.Driver</code>ã€‚é”™è¯¯çš„åŸå› æ˜¯ç¼ºå°‘mysqlçš„é©±åŠ¨åŒ…ã€‚</p><p>åˆ†æå‡ºé”™è¯¯çš„åŸå› ï¼Œå…·ä½“çš„è§£å†³æ–¹æ¡ˆå°±æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨pom.xmlæŠŠé©±åŠ¨åŒ…å¼•å…¥å³å¯ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>mysql<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>mysql-connector-java<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>5.1.47<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ·»åŠ å®Œmysqlçš„é©±åŠ¨åŒ…ä»¥åï¼Œå†æ¬¡è¿è¡ŒApp,å°±å¯ä»¥æ‰“å°å‡ºç»“æœ:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636409.png alt=1629903845404></p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>æ•°æ®è¿æ¥æ± åœ¨é…ç½®å±æ€§çš„æ—¶å€™ï¼Œé™¤äº†å¯ä»¥æ³¨å…¥æ•°æ®åº“è¿æ¥å››è¦ç´ å¤–è¿˜å¯ä»¥é…ç½®å¾ˆå¤šå…¶ä»–çš„å±æ€§ï¼Œå…·ä½“éƒ½æœ‰å“ªäº›å±æ€§ç”¨åˆ°çš„æ—¶å€™å†å»æŸ¥ï¼Œä¸€èˆ¬é…ç½®åŸºç¡€çš„å››ä¸ªï¼Œå…¶ä»–éƒ½æœ‰è‡ªå·±çš„é»˜è®¤å€¼</li><li>Druidå’ŒC3P0åœ¨æ²¡æœ‰å¯¼å…¥mysqlé©±åŠ¨åŒ…çš„å‰æä¸‹ï¼Œä¸€ä¸ªæ²¡æŠ¥é”™ä¸€ä¸ªæŠ¥é”™ï¼Œè¯´æ˜Druidåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ²¡æœ‰å»åŠ è½½é©±åŠ¨ï¼Œè€ŒC3P0åˆšå¥½ç›¸å</li><li>Druidç¨‹åºè¿è¡Œè™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å½“è°ƒç”¨DruidDataSourceçš„getConnection()æ–¹æ³•è·å–è¿æ¥çš„æ—¶å€™ï¼Œä¹Ÿä¼šæŠ¥æ‰¾ä¸åˆ°é©±åŠ¨ç±»çš„é”™è¯¯</li></ul><h3 id=åŠ è½½propertiesæ–‡ä»¶>åŠ è½½propertiesæ–‡ä»¶
<a class=header-anchor href=#%e5%8a%a0%e8%bd%bdproperties%e6%96%87%e4%bb%b6></a></h3><p>ä¸ŠèŠ‚ä¸­æˆ‘ä»¬å·²ç»å®Œæˆä¸¤ä¸ªæ•°æ®æº<code>druid</code>å’Œ<code>C3P0</code>çš„é…ç½®ï¼Œä½†æ˜¯å…¶ä¸­åŒ…å«äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹:</p><ul><li>è¿™ä¸¤ä¸ªæ•°æ®æºä¸­éƒ½ä½¿ç”¨åˆ°äº†ä¸€äº›å›ºå®šçš„å¸¸é‡å¦‚æ•°æ®åº“è¿æ¥å››è¦ç´ ï¼ŒæŠŠè¿™äº›å€¼å†™åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ä¸åˆ©äºåæœŸç»´æŠ¤</li><li>éœ€è¦å°†è¿™äº›å€¼æå–åˆ°ä¸€ä¸ªå¤–éƒ¨çš„propertiesé…ç½®æ–‡ä»¶ä¸­</li><li>Springæ¡†æ¶å¦‚ä½•ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å±æ€§å€¼æ¥é…ç½®å°±æ˜¯æ¥ä¸‹æ¥è¦è§£å†³çš„é—®é¢˜ã€‚</li></ul><p>é—®é¢˜æå‡ºæ¥åï¼Œå…·ä½“è¯¥å¦‚ä½•å®ç°?</p><h4 id=ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–>ç¬¬ä¸‰æ–¹beanå±æ€§ä¼˜åŒ–
<a class=header-anchor href=#%e7%ac%ac%e4%b8%89%e6%96%b9bean%e5%b1%9e%e6%80%a7%e4%bc%98%e5%8c%96></a></h4><h5 id=å®ç°æ€è·¯>å®ç°æ€è·¯
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af></a></h5><blockquote><p>éœ€æ±‚:å°†æ•°æ®åº“è¿æ¥å››è¦ç´ æå–åˆ°propertiesé…ç½®æ–‡ä»¶ï¼Œspringæ¥åŠ è½½é…ç½®ä¿¡æ¯å¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥å®Œæˆå±æ€§æ³¨å…¥ã€‚</p><p>1.åœ¨resourcesä¸‹åˆ›å»ºä¸€ä¸ªjdbc.properties(æ–‡ä»¶çš„åç§°å¯ä»¥ä»»æ„)</p><p>2.å°†æ•°æ®åº“è¿æ¥å››è¦ç´ é…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­</p><p>3.åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­åŠ è½½propertiesæ–‡ä»¶</p><p>4.ä½¿ç”¨åŠ è½½åˆ°çš„å€¼å®ç°å±æ€§æ³¨å…¥</p><p>å…¶ä¸­ç¬¬3ï¼Œ4æ­¥éª¤æ˜¯éœ€è¦å¤§å®¶é‡ç‚¹å…³æ³¨ï¼Œå…·ä½“æ˜¯å¦‚ä½•å®ç°ã€‚</p></blockquote><h5 id=å®ç°æ­¥éª¤>å®ç°æ­¥éª¤
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0%e6%ad%a5%e9%aa%a4></a></h5><h6 id=æ­¥éª¤1å‡†å¤‡propertiesé…ç½®æ–‡ä»¶>æ­¥éª¤1:å‡†å¤‡propertiesé…ç½®æ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%87%86%e5%a4%87properties%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h6><p>resourcesä¸‹åˆ›å»ºä¸€ä¸ªjdbc.propertiesæ–‡ä»¶,å¹¶æ·»åŠ å¯¹åº”çš„å±æ€§é”®å€¼å¯¹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>jdbc.driver</span><span style=color:#f92672>=</span><span style=color:#e6db74>com.mysql.jdbc.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:mysql://127.0.0.1:3306/spring_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤2å¼€å¯contextå‘½åç©ºé—´>æ­¥éª¤2:å¼€å¯<code>context</code>å‘½åç©ºé—´
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%bc%80%e5%90%afcontext%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4></a></h6><p>åœ¨applicationContext.xmlä¸­å¼€<code>context</code>å‘½åç©ºé—´</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤3åŠ è½½propertiesé…ç½®æ–‡ä»¶>æ­¥éª¤3:åŠ è½½propertiesé…ç½®æ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e5%8a%a0%e8%bd%bdproperties%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h6><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<code>context</code>å‘½åç©ºé—´ä¸‹çš„æ ‡ç­¾æ¥åŠ è½½propertiesé…ç½®æ–‡ä»¶</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤4å®Œæˆå±æ€§æ³¨å…¥>æ­¥éª¤4:å®Œæˆå±æ€§æ³¨å…¥
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e5%ae%8c%e6%88%90%e5%b1%9e%e6%80%a7%e6%b3%a8%e5%85%a5></a></h6><p>ä½¿ç”¨<code>${key}</code>æ¥è¯»å–propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å¹¶å®Œæˆå±æ€§æ³¨å…¥</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dataSource&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--ä¸å†æ˜¯ç›´æ¥å°†å±æ€§å€¼å†™æ­»ï¼Œç›¸å½“äºä»é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥åˆ°è¿™é‡Œï¼Œç„¶åä»è¿™é‡Œå†æ³¨å…¥åˆ°ç¬¬ä¸‰æ–¹beanä¸­--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driverClassName&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.driver}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.url}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.username}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.password}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ï¼Œè¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å°±å·²ç»å®Œæˆã€‚</p><h4 id=è¯»å–å•ä¸ªå±æ€§>è¯»å–å•ä¸ªå±æ€§
<a class=header-anchor href=#%e8%af%bb%e5%8f%96%e5%8d%95%e4%b8%aa%e5%b1%9e%e6%80%a7></a></h4><h5 id=å®ç°æ€è·¯-1>å®ç°æ€è·¯
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af-1></a></h5><p>å¯¹äºä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹:</p><blockquote><p>éœ€æ±‚:ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–keyä¸ºnameçš„å€¼ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°BookDaoä¸­å¹¶åœ¨saveæ–¹æ³•ä¸­è¿›è¡Œæ‰“å°ã€‚</p><p>1.åœ¨é¡¹ç›®ä¸­æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><p>2.ä¸ºBookDaoImplæ·»åŠ ä¸€ä¸ªnameå±æ€§å¹¶æä¾›setteræ–¹æ³•</p><p>3.åœ¨jdbc.propertiesä¸­æ·»åŠ æ•°æ®æ³¨å…¥åˆ°bookDaoä¸­æ‰“å°æ–¹ä¾¿æŸ¥è¯¢ç»“æœ</p><p>4.åœ¨applicationContext.xmlæ·»åŠ é…ç½®å®Œæˆé…ç½®æ–‡ä»¶åŠ è½½ã€å±æ€§æ³¨å…¥(${key})</p></blockquote><h5 id=å®ç°æ­¥éª¤-1>å®ç°æ­¥éª¤
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0%e6%ad%a5%e9%aa%a4-1></a></h5><h6 id=æ­¥éª¤1åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»>æ­¥éª¤1:åœ¨é¡¹ç›®ä¸­æ·»å¯¹åº”çš„ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%9c%a8%e9%a1%b9%e7%9b%ae%e4%b8%ad%e6%b7%bb%e5%af%b9%e5%ba%94%e7%9a%84%e7%b1%bb></a></h6><p>BookDaoå’ŒBookDaoImplç±»ï¼Œå¹¶åœ¨BookDaoImplç±»ä¸­æ·»åŠ <code>name</code>å±æ€§ä¸setteræ–¹æ³•</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤2å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥>æ­¥éª¤2:å®Œæˆé…ç½®æ–‡ä»¶çš„è¯»å–ä¸æ³¨å…¥
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%ae%8c%e6%88%90%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e8%af%bb%e5%8f%96%e4%b8%8e%e6%b3%a8%e5%85%a5></a></h6><p>åœ¨applicationContext.xmlæ·»åŠ é…ç½®ï¼Œ<code>beançš„é…ç½®ç®¡ç†</code>ã€<code>è¯»å–å¤–éƒ¨properties</code>ã€<code>ä¾èµ–æ³¨å…¥</code>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--å°†å±æ€§å€¼æ³¨å…¥è¿›å»--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--è¿™é‡Œçš„å±æ€§å€¼ä¸ºnameï¼Œæ˜¯å› ä¸ºsetteræ–¹æ³•åä¸ºsetName--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.driver}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤3è¿è¡Œç¨‹åº-1>æ­¥éª¤3:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f-1></a></h6><p>åœ¨Appç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–bookDaoå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•ï¼ŒæŸ¥çœ‹å€¼æ˜¯å¦å·²ç»è¢«è·å–åˆ°å¹¶æ‰“å°æ§åˆ¶å°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636410.png alt=1629975492444></p><h5 id=æ³¨æ„äº‹é¡¹>æ³¨æ„äº‹é¡¹
<a class=header-anchor href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9></a></h5><p>è‡³æ­¤ï¼Œè¯»å–propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å°±å·²ç»å®Œæˆï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰äº›æ³¨æ„äº‹é¡¹:</p><ul><li><p>é—®é¢˜ä¸€:é”®å€¼å¯¹çš„keyä¸º<code>username</code>å¼•å‘çš„é—®é¢˜</p><p>1.åœ¨propertiesä¸­é…ç½®é”®å€¼å¯¹çš„æ—¶å€™ï¼Œå¦‚æœkeyè®¾ç½®ä¸º<code>username</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>username</span><span style=color:#f92672>=</span><span style=color:#e6db74>root666</span>
</span></span></code></pre></td></tr></table></div></div><p>2.åœ¨applicationContext.xmlæ³¨å…¥è¯¥å±æ€§</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${username}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>3.è¿è¡Œåï¼Œåœ¨æ§åˆ¶å°æ‰“å°çš„å´ä¸æ˜¯<code>root666</code>ï¼Œè€Œæ˜¯è‡ªå·±ç”µè„‘çš„ç”¨æˆ·å</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636411.png alt=1629975934694></p><p>4.å‡ºç°é—®é¢˜çš„åŸå› æ˜¯<code>&lt;context:property-placeholder/></code>æ ‡ç­¾ä¼šåŠ è½½ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œè€Œä¸”ç¯å¢ƒå˜é‡çš„å€¼ä¼šè¢«ä¼˜å…ˆåŠ è½½ï¼Œå¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡?</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> String<span style=color:#f92672>&gt;</span> env <span style=color:#f92672>=</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>getenv</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>env<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¤§å®¶å¯ä»¥è‡ªè¡Œè¿è¡Œï¼Œåœ¨æ‰“å°å‡ºæ¥çš„ç»“æœä¸­ä¼šæœ‰ä¸€ä¸ªUSERNAME=XXX[è‡ªå·±ç”µè„‘çš„ç”¨æˆ·åç§°]</p><p>5.è§£å†³æ–¹æ¡ˆ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>system-properties-mode:è®¾ç½®ä¸ºNEVER,è¡¨ç¤ºä¸åŠ è½½ç³»ç»Ÿå±æ€§ï¼Œå°±å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯é¿å…ä½¿ç”¨<code>username</code>ä½œä¸ºå±æ€§çš„<code>key</code>ã€‚</p></li><li><p>é—®é¢˜äºŒ:å½“æœ‰å¤šä¸ªpropertiesé…ç½®æ–‡ä»¶éœ€è¦è¢«åŠ è½½ï¼Œè¯¥å¦‚ä½•é…ç½®?</p><p>1.è°ƒæ•´ä¸‹é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨resourcesä¸‹æ·»åŠ <code>jdbc.properties</code>,<code>jdbc2.properties</code>,å†…å®¹å¦‚ä¸‹:</p><p>jdbc.properties</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>jdbc.driver</span><span style=color:#f92672>=</span><span style=color:#e6db74>com.mysql.jdbc.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:mysql://127.0.0.1:3306/spring_db</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span></code></pre></td></tr></table></div></div><p>jdbc2.properties</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>username</span><span style=color:#f92672>=</span><span style=color:#e6db74>root666</span>
</span></span></code></pre></td></tr></table></div></div><p>2.ä¿®æ”¹applicationContext.xml</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ–¹å¼ä¸€ --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;jdbc.properties,jdbc2.properties&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ–¹å¼äºŒ--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;*.properties&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ–¹å¼ä¸‰ --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;classpath:*.properties&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ–¹å¼å››--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;classpath*:*.properties&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>	
</span></span></code></pre></td></tr></table></div></div><p><strong>è¯´æ˜:</strong></p><ul><li>æ–¹å¼ä¸€:å¯ä»¥å®ç°ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å¤šçš„è¯ï¼Œæ¯ä¸ªéƒ½éœ€è¦é…ç½®</li><li>æ–¹å¼äºŒ:<code>*.properties</code>ä»£è¡¨æ‰€æœ‰ä»¥propertiesç»“å°¾çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼Œå¯ä»¥è§£å†³æ–¹å¼ä¸€çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸æ ‡å‡†</li><li>æ–¹å¼ä¸‰:æ ‡å‡†çš„å†™æ³•ï¼Œ<code>classpath:</code>ä»£è¡¨çš„æ˜¯ä»æ ¹è·¯å¾„ä¸‹å¼€å§‹æŸ¥æ‰¾ï¼Œä½†æ˜¯åªèƒ½æŸ¥è¯¢å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„</li><li>æ–¹å¼å››:ä¸ä»…å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®è¿˜å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ‰€æœ‰é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹çš„propertiesé…ç½®æ–‡ä»¶</li></ul></li></ul><h4 id=åŠ è½½propertiesæ–‡ä»¶å°ç»“>åŠ è½½propertiesæ–‡ä»¶å°ç»“
<a class=header-anchor href=#%e5%8a%a0%e8%bd%bdproperties%e6%96%87%e4%bb%b6%e5%b0%8f%e7%bb%93></a></h4><p>æœ¬èŠ‚ä¸»è¦è®²è§£çš„æ˜¯propertiesé…ç½®æ–‡ä»¶çš„åŠ è½½ï¼Œéœ€è¦æŒæ¡çš„å†…å®¹æœ‰:</p><ul><li><p>å¦‚ä½•å¼€å¯<code>context</code>å‘½åç©ºé—´</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636412.png alt=1629980280952></p></li><li><p>å¦‚ä½•åŠ è½½propertiesé…ç½®æ–‡ä»¶</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;context:property-placeholder</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;&#34;</span> <span style=color:#a6e22e>system-properties-mode=</span><span style=color:#e6db74>&#34;NEVER&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>å¦‚ä½•åœ¨applicationContext.xmlå¼•å…¥propertiesé…ç½®æ–‡ä»¶ä¸­çš„å€¼</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>${key}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=æ ¸å¿ƒå®¹å™¨>æ ¸å¿ƒå®¹å™¨
<a class=header-anchor href=#%e6%a0%b8%e5%bf%83%e5%ae%b9%e5%99%a8></a></h2><p>å‰é¢å·²ç»å®Œæˆbeanä¸ä¾èµ–æ³¨å…¥çš„ç›¸å…³çŸ¥è¯†å­¦ä¹ ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯IOCå®¹å™¨ä¸­çš„<strong>æ ¸å¿ƒå®¹å™¨</strong>ã€‚</p><p>è¿™é‡Œæ‰€è¯´çš„æ ¸å¿ƒå®¹å™¨ï¼Œå¤§å®¶å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸º<code>ApplicationContext</code>ï¼Œå‰é¢è™½ç„¶å·²ç»ç”¨åˆ°è¿‡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ ï¼Œæ¥ä¸‹æ¥å’±ä»¬ä»ä»¥ä¸‹å‡ ä¸ªé—®é¢˜å…¥æ‰‹æ¥å­¦ä¹ ä¸‹å®¹å™¨çš„ç›¸å…³çŸ¥è¯†:</p><ul><li>å¦‚ä½•åˆ›å»ºå®¹å™¨?</li><li>åˆ›å»ºå¥½å®¹å™¨åï¼Œå¦‚ä½•ä»å®¹å™¨ä¸­è·å–beanå¯¹è±¡?</li><li>å®¹å™¨ç±»çš„å±‚æ¬¡ç»“æ„æ˜¯ä»€ä¹ˆ?</li><li>BeanFactoryæ˜¯ä»€ä¹ˆ?</li></ul><h3 id=ç¯å¢ƒå‡†å¤‡-1>ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87-1></a></h3><p>åœ¨å­¦ä¹ å’Œè§£å†³ä¸Šè¿°é—®é¢˜ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>resourcesä¸‹æ·»åŠ applicationContext.xml</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ BookDaoå’ŒBookDaoImplç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636413.png alt=1629982672522></p><h3 id=å®¹å™¨>å®¹å™¨
<a class=header-anchor href=#%e5%ae%b9%e5%99%a8></a></h3><h4 id=å®¹å™¨çš„åˆ›å»ºæ–¹å¼>å®¹å™¨çš„åˆ›å»ºæ–¹å¼
<a class=header-anchor href=#%e5%ae%b9%e5%99%a8%e7%9a%84%e5%88%9b%e5%bb%ba%e6%96%b9%e5%bc%8f></a></h4><p>æ¡ˆä¾‹ä¸­åˆ›å»º<code>ApplicationContext</code>çš„æ–¹å¼ä¸º:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ–¹å¼ç¿»è¯‘ä¸º:<strong>ç±»è·¯å¾„ä¸‹çš„XMLé…ç½®æ–‡ä»¶</strong></p><p>é™¤äº†ä¸Šé¢è¿™ç§æ–¹å¼ï¼ŒSpringè¿˜æä¾›äº†å¦å¤–ä¸€ç§åˆ›å»ºæ–¹å¼ä¸º:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileSystemXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ–¹å¼ç¿»è¯‘ä¸º:<strong>æ–‡ä»¶ç³»ç»Ÿä¸‹çš„XMLé…ç½®æ–‡ä»¶</strong></p><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè¿è¡Œï¼Œä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636414.png alt=1629983245121></p><p>ä»é”™è¯¯ä¿¡æ¯ä¸­èƒ½å‘ç°ï¼Œè¿™ç§æ–¹å¼æ˜¯ä»é¡¹ç›®è·¯å¾„ä¸‹å¼€å§‹æŸ¥æ‰¾<code>applicationContext.xml</code>é…ç½®æ–‡ä»¶çš„ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶ä¿®æ”¹ä¸º:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileSystemXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;D:\\workspace\\spring\\spring_10_container\\src\\main\\resources\\applicationContext.xml&#34;</span><span style=color:#f92672>);</span> 
</span></span></code></pre></td></tr></table></div></div><p>**è¯´æ˜:**å¤§å®¶ç»ƒä¹ çš„æ—¶å€™ï¼Œå†™è‡ªå·±çš„å…·ä½“è·¯å¾„ã€‚</p><p>è¿™ç§æ–¹å¼è™½èƒ½å®ç°ï¼Œä½†æ˜¯å½“é¡¹ç›®çš„ä½ç½®å‘ç”Ÿå˜åŒ–å,ä»£ç ä¹Ÿéœ€è¦è·Ÿç€æ”¹,è€¦åˆåº¦è¾ƒé«˜,ä¸æ¨èä½¿ç”¨ã€‚</p><h4 id=beançš„ä¸‰ç§è·å–æ–¹å¼>Beançš„ä¸‰ç§è·å–æ–¹å¼
<a class=header-anchor href=#bean%e7%9a%84%e4%b8%89%e7%a7%8d%e8%8e%b7%e5%8f%96%e6%96%b9%e5%bc%8f></a></h4><p>æ–¹å¼ä¸€ï¼Œå°±æ˜¯ç›®å‰æ¡ˆä¾‹ä¸­è·å–çš„æ–¹å¼:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜æ˜¯æ¯æ¬¡è·å–çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹å¼å‘¢?</p><p>æ–¹å¼äºŒï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>BookDao bookDao <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#960050;background-color:#1e0010>ï¼Œ</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³ç±»å‹å¼ºè½¬é—®é¢˜ï¼Œä½†æ˜¯å‚æ•°åˆå¤šåŠ äº†ä¸€ä¸ªï¼Œç›¸å¯¹æ¥è¯´æ²¡æœ‰ç®€åŒ–å¤šå°‘ã€‚</p><p>æ–¹å¼ä¸‰:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>BookDao bookDao <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ–¹å¼å°±ç±»ä¼¼æˆ‘ä»¬ä¹‹å‰æ‰€å­¦ä¹ ä¾èµ–æ³¨å…¥ä¸­çš„æŒ‰ç±»å‹æ³¨å…¥ã€‚å¿…é¡»è¦ç¡®ä¿IOCå®¹å™¨ä¸­è¯¥ç±»å‹å¯¹åº”çš„beanå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªã€‚ä½†æ˜¯æ­£å¸¸æƒ…å†µä¸‹ç¡®å®åªæœ‰ä¸€ä¸ª</p><h4 id=å®¹å™¨ç±»å±‚æ¬¡ç»“æ„>å®¹å™¨ç±»å±‚æ¬¡ç»“æ„
<a class=header-anchor href=#%e5%ae%b9%e5%99%a8%e7%b1%bb%e5%b1%82%e6%ac%a1%e7%bb%93%e6%9e%84></a></h4><p>(1)åœ¨IDEAä¸­åŒå‡»<code>shift</code>,è¾“å…¥BeanFactory</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636415.png alt=1629985148294></p><p>(2)ç‚¹å‡»è¿›å…¥BeanFactoryç±»ï¼Œctrl+h,å°±èƒ½æŸ¥çœ‹åˆ°å¦‚ä¸‹ç»“æ„çš„å±‚æ¬¡å…³ç³»</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636416.png alt=1629984980781></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®¹å™¨ç±»ä¹Ÿæ˜¯ä»æ— åˆ°æœ‰<strong>æ ¹æ®éœ€è¦ä¸€å±‚å±‚å åŠ </strong>ä¸Šæ¥çš„ï¼Œå¤§å®¶é‡ç‚¹ç†è§£ä¸‹è¿™ç§è®¾è®¡æ€æƒ³ã€‚åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç»§æ‰¿æˆ–è€…å®ç°ï¼Œç„¶åæ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œæœ€åä½¿å¾—ä»£ç å˜å¾—æ›´åŠ å¼ºå¤§</p><h4 id=beanfactoryçš„ä½¿ç”¨>BeanFactoryçš„ä½¿ç”¨
<a class=header-anchor href=#beanfactory%e7%9a%84%e4%bd%bf%e7%94%a8></a></h4><p>ä½¿ç”¨BeanFactoryæ¥åˆ›å»ºIOCå®¹å™¨çš„å…·ä½“å®ç°æ–¹å¼ä¸º:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppForBeanFactory</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è·å–çš„ä¸å†æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªèµ„æºå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Resource resources <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathResource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BeanFactory bf <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> XmlBeanFactory<span style=color:#f92672>(</span>resources<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> bf<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†æ›´å¥½çš„çœ‹å‡º<code>BeanFactory</code>å’Œ<code>ApplicationContext</code>ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨BookDaoImplæ·»åŠ å¦‚ä¸‹æ„é€ å‡½æ•°:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>BookDaoImpl</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;constructor&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸å»è·å–beanå¯¹è±¡ï¼Œæ‰“å°ä¼šå‘ç°ï¼š</p><ul><li><p>BeanFactoryæ˜¯å»¶è¿ŸåŠ è½½ï¼Œåªæœ‰åœ¨è·å–beanå¯¹è±¡çš„æ—¶å€™æ‰ä¼šå»åˆ›å»º</p></li><li><p>ApplicationContextæ˜¯ç«‹å³åŠ è½½ï¼Œå®¹å™¨åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ›å»ºbeanå¯¹è±¡</p></li><li><p>ApplicationContextè¦æƒ³æˆä¸º<strong>å»¶è¿ŸåŠ è½½</strong>ï¼Œåªéœ€è¦æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œé…ç½®</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span>  <span style=color:#a6e22e>lazy-init=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p><strong>å°ç»“</strong></p><p>è¿™ä¸€èŠ‚ä¸­æ‰€è®²çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬:</p><ul><li><p>å®¹å™¨åˆ›å»ºçš„ä¸¤ç§æ–¹å¼</p><ul><li>ClassPathXmlApplicationContext[æŒæ¡]</li><li>FileSystemXmlApplicationContext[çŸ¥é“å³å¯]</li></ul></li><li><p>è·å–Beançš„ä¸‰ç§æ–¹å¼</p><ul><li>getBean(&ldquo;åç§°&rdquo;):éœ€è¦ç±»å‹è½¬æ¢</li><li>getBean(&ldquo;åç§°&rdquo;,ç±»å‹.class):å¤šäº†ä¸€ä¸ªå‚æ•°</li><li>getBean(ç±»å‹.class):å®¹å™¨ä¸­ä¸èƒ½æœ‰å¤šä¸ªè¯¥ç±»çš„beanå¯¹è±¡ï¼Œæ­£å¸¸è¿™ç§æœ€å¸¸ç”¨</li></ul><p>ä¸Šè¿°ä¸‰ç§æ–¹å¼ï¼Œå„æœ‰å„çš„ä¼˜ç¼ºç‚¹ï¼Œç”¨å“ªä¸ªéƒ½å¯ä»¥ã€‚</p></li><li><p>å®¹å™¨ç±»å±‚æ¬¡ç»“æ„</p><ul><li>åªéœ€è¦çŸ¥æ™“å®¹å™¨çš„æœ€ä¸Šçº§çš„çˆ¶æ¥å£ä¸º BeanFactoryå³å¯</li></ul></li><li><p>BeanFactoryï¼ˆè·å–IOCå®¹å™¨çš„ç¬¬äºŒç§æ–¹å¼ï¼‰</p><ul><li>è¿™ç§æ–¹å¼æ˜¯åº”ç”¨ä¸Šä¸‹æ–‡çš„é¡¶å±‚æ¥å£æ¥å¾—åˆ°IOCå®¹å™¨</li><li>ä½¿ç”¨BeanFactoryåˆ›å»ºçš„å®¹å™¨æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong></li><li>ä½¿ç”¨ApplicationContextåˆ›å»ºçš„å®¹å™¨æ˜¯ç«‹å³åŠ è½½</li><li>å…·ä½“BeanFactoryå¦‚ä½•åˆ›å»ºåªéœ€è¦äº†è§£å³å¯ã€‚</li></ul></li></ul><h3 id=æ ¸å¿ƒå®¹å™¨æ€»ç»“>æ ¸å¿ƒå®¹å™¨æ€»ç»“
<a class=header-anchor href=#%e6%a0%b8%e5%bf%83%e5%ae%b9%e5%99%a8%e6%80%bb%e7%bb%93></a></h3><p>è¿™èŠ‚ä¸­æ²¡æœ‰æ–°çš„çŸ¥è¯†ç‚¹ï¼Œåªæ˜¯å¯¹å‰é¢çŸ¥è¯†çš„ä¸€ä¸ªå¤§æ€»ç»“ï¼Œå…±åŒ…å«å¦‚ä¸‹å†…å®¹:</p><h4 id=å®¹å™¨ç›¸å…³>å®¹å™¨ç›¸å…³
<a class=header-anchor href=#%e5%ae%b9%e5%99%a8%e7%9b%b8%e5%85%b3></a></h4><ul><li>BeanFactoryæ˜¯IoCå®¹å™¨çš„<strong>é¡¶å±‚æ¥å£</strong>ï¼Œåˆå§‹åŒ–BeanFactoryå¯¹è±¡æ—¶ï¼ŒåŠ è½½çš„beanå»¶è¿ŸåŠ è½½</li><li>ApplicationContextæ¥å£æ˜¯Springå®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œåˆå§‹åŒ–æ—¶beanç«‹å³åŠ è½½</li><li>ApplicationContextæ¥å£æä¾›åŸºç¡€çš„beanæ“ä½œç›¸å…³æ–¹æ³•ï¼Œé€šè¿‡å…¶ä»–æ¥å£æ‰©å±•å…¶åŠŸèƒ½</li><li>ApplicationContextæ¥å£å¸¸ç”¨åˆå§‹åŒ–ç±»<ul><li><strong>ClassPathXmlApplicationContext(å¸¸ç”¨)</strong></li><li>FileSystemXmlApplicationContext</li></ul></li></ul><h4 id=beanç›¸å…³>beanç›¸å…³
<a class=header-anchor href=#bean%e7%9b%b8%e5%85%b3></a></h4><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636417.png alt=1629986510487></p><p>å…¶å®æ•´ä¸ªé…ç½®ä¸­æœ€å¸¸ç”¨çš„å°±ä¸¤ä¸ªå±æ€§idå’Œclassã€‚</p><blockquote><p>å‰©ä¸‹çš„å±æ€§æ˜¯ä¸ºäº†è®©beanç¬¦åˆå„ç§éœ€æ±‚</p></blockquote><p>æŠŠscopeã€init-methodã€destroy-methodæ¡†èµ·æ¥çš„åŸå› æ˜¯ï¼Œåé¢æ³¨è§£åœ¨è®²è§£çš„æ—¶å€™è¿˜ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å¤§å®¶å¯¹è¿™ä¸‰ä¸ªå±æ€§å…³æ³¨ä¸‹ã€‚</p><h4 id=ä¾èµ–æ³¨å…¥ç›¸å…³>ä¾èµ–æ³¨å…¥ç›¸å…³
<a class=header-anchor href=#%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5%e7%9b%b8%e5%85%b3></a></h4><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636418.png alt=1629986848563></p><blockquote><p>æ³¨å…¥å¼•ç”¨ç±»å‹ä½¿ç”¨refï¼Œæ³¨å…¥ç®€å•ç±»å‹ä½¿ç”¨value</p></blockquote><h2 id=iocdiæ³¨è§£å¼€å‘>IOC/DIæ³¨è§£å¼€å‘
<a class=header-anchor href=#iocdi%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91></a></h2><p>Springçš„IOC/DIå¯¹åº”çš„é…ç½®å¼€å‘å°±å·²ç»è®²è§£å®Œæˆï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¤æ‚çš„åœ°æ–¹åœ¨<strong>é…ç½®æ–‡ä»¶</strong>ã€‚ä½¿ç”¨æ³¨è§£ä¹‹åï¼Œä¸€ä¸ªæ³¨è§£å¯¹åº”ä¸€ä¸ªspringé…ç½®æ–‡ä»¶çš„æ ‡ç­¾å±æ€§</p><p>å‰é¢å’±ä»¬èŠSpringçš„æ—¶å€™è¯´è¿‡ï¼ŒSpringå¯ä»¥ç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œåˆ°ç°åœ¨å¹¶æ²¡æœ‰ä½“ä¼šåˆ°ã€‚</p><p>æ‰€ä»¥Springåˆ°åº•æ˜¯å¦‚ä½•ç®€åŒ–ä»£ç å¼€å‘çš„å‘¢?</p><p>è¦æƒ³çœŸæ­£ç®€åŒ–å¼€å‘ï¼Œå°±éœ€è¦ç”¨åˆ°Springçš„æ³¨è§£å¼€å‘ï¼ŒSpringå¯¹æ³¨è§£æ”¯æŒçš„ç‰ˆæœ¬å†ç¨‹:</p><ul><li>2.0ç‰ˆå¼€å§‹æ”¯æŒæ³¨è§£</li><li>2.5ç‰ˆæ³¨è§£åŠŸèƒ½è¶‹äºå®Œå–„</li><li>3.0ç‰ˆæ”¯æŒçº¯æ³¨è§£å¼€å‘</li></ul><p>å…³äºæ³¨è§£å¼€å‘ï¼Œæˆ‘ä»¬ä¼šè®²è§£ä¸¤å—å†…å®¹<code>æ³¨è§£å¼€å‘å®šä¹‰bean</code>å’Œ<code>çº¯æ³¨è§£å¼€å‘</code>ã€‚</p><p>æ³¨è§£å¼€å‘å®šä¹‰beanç”¨çš„æ˜¯2.5ç‰ˆæä¾›çš„æ³¨è§£ï¼Œçº¯æ³¨è§£å¼€å‘ç”¨çš„æ˜¯3.0ç‰ˆæä¾›çš„æ³¨è§£ã€‚</p><h3 id=31-ç¯å¢ƒå‡†å¤‡>3.1 ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#31-%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87></a></h3><p>åœ¨å­¦ä¹ æ³¨è§£å¼€å‘ä¹‹å‰ï¼Œå…ˆæ¥å‡†å¤‡ä¸‹æ¡ˆä¾‹ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>resourcesä¸‹æ·»åŠ applicationContext.xml</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--å®šä¹‰ä¸€ä¸ªbean--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ BookDaoã€BookDaoImplã€BookServiceã€BookServiceImplç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//-----------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookService</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookServiceImpl</span> <span style=color:#66d9ef>implements</span> BookService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book service save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636419.png alt=1629989221808></p><h3 id=32-æ³¨è§£å¼€å‘å®šä¹‰bean>3.2 æ³¨è§£å¼€å‘å®šä¹‰bean
<a class=header-anchor href=#32-%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e5%ae%9a%e4%b9%89bean></a></h3><p>åœ¨ä¸Šè¿°ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥å­¦ä¸€å­¦Springæ˜¯å¦‚ä½•é€šè¿‡æ³¨è§£å®ç°beançš„å®šä¹‰å¼€å‘?</p><h4 id=æ­¥éª¤1åˆ é™¤åŸxmlé…ç½®>æ­¥éª¤1:åˆ é™¤åŸXMLé…ç½®
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%88%a0%e9%99%a4%e5%8e%9fxml%e9%85%8d%e7%bd%ae></a></h4><p>å°†é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;bean></code>æ ‡ç­¾åˆ é™¤æ‰ï¼Œä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰bean</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;bookDao&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2daoä¸Šæ·»åŠ æ³¨è§£>æ­¥éª¤2:Daoä¸Šæ·»åŠ æ³¨è§£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42dao%e4%b8%8a%e6%b7%bb%e5%8a%a0%e6%b3%a8%e8%a7%a3></a></h4><p>åœ¨BookDaoImplç±»ä¸Šæ·»åŠ <code>@Component</code>æ³¨è§£</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>)</span><span style=color:#75715e>//ç”¨è¿™ç§æ³¨è§£çš„æ–¹å¼å®šä¹‰bean
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ³¨æ„:<strong>@Componentæ³¨è§£ä¸å¯ä»¥æ·»åŠ åœ¨æ¥å£ä¸Šï¼Œå› ä¸ºæ¥å£æ˜¯æ— æ³•åˆ›å»ºå¯¹è±¡çš„ã€‚</strong></p><p>XMLä¸æ³¨è§£é…ç½®çš„<strong>å¯¹åº”å…³ç³»</strong>:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636420.png alt=1629990315619></p><h4 id=æ­¥éª¤3é…ç½®springçš„æ³¨è§£åŒ…æ‰«æ>æ­¥éª¤3:é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e9%85%8d%e7%bd%aespring%e7%9a%84%e6%b3%a8%e8%a7%a3%e5%8c%85%e6%89%ab%e6%8f%8f></a></h4><p>ä¸ºäº†è®©Springæ¡†æ¶èƒ½å¤Ÿæ‰«æåˆ°å†™åœ¨ç±»ä¸Šçš„æ³¨è§£ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸Šè¿›è¡ŒåŒ…æ‰«æ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--å…¶å®è¿™ä¸ªåŒ…æ‰«æä¹Ÿæœ‰å¯¹åº”çš„æ³¨è§£--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:component-scan</span> <span style=color:#a6e22e>base-package=</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è¯´æ˜:</strong></p><p><strong>component-scan</strong></p><ul><li>component:ç»„ä»¶,Springå°†ç®¡ç†çš„beanè§†ä½œè‡ªå·±çš„ä¸€ä¸ªç»„ä»¶</li><li>scan:æ‰«æ</li></ul><p>base-packageæŒ‡å®šSpringæ¡†æ¶æ‰«æçš„åŒ…è·¯å¾„ï¼Œå®ƒä¼šæ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸­çš„æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ã€‚</p><ul><li>åŒ…è·¯å¾„è¶Šå¤š[å¦‚:com.itheima.dao.impl]ï¼Œæ‰«æçš„èŒƒå›´è¶Šå°é€Ÿåº¦è¶Šå¿«</li><li>åŒ…è·¯å¾„è¶Šå°‘[å¦‚:com.itheima],æ‰«æçš„èŒƒå›´è¶Šå¤§é€Ÿåº¦è¶Šæ…¢</li><li>ä¸€èˆ¬æ‰«æåˆ°é¡¹ç›®çš„ç»„ç»‡åç§°å³Mavençš„groupIdä¸‹<code>[å¦‚:com.itheima]</code>å³å¯ã€‚</li></ul><h4 id=æ­¥éª¤4è¿è¡Œç¨‹åº-1>æ­¥éª¤4ï¼šè¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f-1></a></h4><p>è¿è¡Œ<code>App</code>ç±»æŸ¥çœ‹æ‰“å°ç»“æœï¼Œå¾—åˆ°äº†ä¸€ä¸ªbean</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636421.png alt=1630027590558></p><h4 id=æ­¥éª¤5serviceä¸Šæ·»åŠ æ³¨è§£>æ­¥éª¤5:Serviceä¸Šæ·»åŠ æ³¨è§£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a45service%e4%b8%8a%e6%b7%bb%e5%8a%a0%e6%b3%a8%e8%a7%a3></a></h4><p>åœ¨BookServiceImplç±»ä¸Šä¹Ÿæ·»åŠ <code>@Component</code>äº¤ç»™Springæ¡†æ¶ç®¡ç†</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookServiceImpl</span> <span style=color:#66d9ef>implements</span> BookService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> BookDao bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBookDao</span><span style=color:#f92672>(</span>BookDao bookDao<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>bookDao</span> <span style=color:#f92672>=</span> bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book service save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤6è¿è¡Œç¨‹åº>æ­¥éª¤6:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a46%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f></a></h4><p>åœ¨Appç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–BookServiceImplå¯¹åº”çš„beanå¯¹è±¡ï¼Œæ‰“å°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//æŒ‰ç±»å‹è·å–bean
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        BookService bookService <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookService<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookService<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰“å°è§‚å¯Ÿç»“æœï¼Œä¸¤ä¸ªbeanå¯¹è±¡éƒ½å·²ç»æ‰“å°åˆ°æ§åˆ¶å°</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636422.png alt=1630027743910></p><p><strong>è¯´æ˜:</strong></p><ul><li><p>BookServiceImplç±»æ²¡æœ‰èµ·åç§°ï¼Œæ‰€ä»¥åœ¨Appä¸­æ˜¯<strong>æŒ‰ç…§ç±»å‹</strong>æ¥è·å–beanå¯¹è±¡</p></li><li><p>@Componentæ³¨è§£å¦‚æœä¸èµ·åç§°ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼å°±æ˜¯<code>å½“å‰ç±»åé¦–å­—æ¯å°å†™</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŒ‰ç…§åç§°è·å–ï¼Œå¦‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>BookService bookService <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookService<span style=color:#f92672>)</span>ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookServiceImpl&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookService<span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>å¯¹äº@Componentæ³¨è§£ï¼Œè¿˜è¡ç”Ÿå‡ºäº†å…¶ä»–ä¸‰ä¸ªæ³¨è§£<code>@Controller</code>ã€<code>@Service</code>ã€<code>@Repository</code>ï¼Œåªæ˜¯ä¸ºäº†è¡¨ç¤ºè¡¨ç°å±‚ï¼Œä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚ä¸‰ä¸ªä¸åŒçš„beanï¼Œæ²¡æœ‰å…¶ä»–çš„ä½œç”¨</p><p>é€šè¿‡æŸ¥çœ‹æºç ä¼šå‘ç°:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636423.png alt=1630028345074></p><p>è¿™ä¸‰ä¸ªæ³¨è§£å’Œ@Componentæ³¨è§£çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä¸ºä»€ä¹ˆè¦è¡ç”Ÿå‡ºè¿™ä¸‰ä¸ªå‘¢?</p><p>æ–¹ä¾¿æˆ‘ä»¬åæœŸåœ¨ç¼–å†™ç±»çš„æ—¶å€™èƒ½å¾ˆå¥½çš„<strong>åŒºåˆ†</strong>å‡ºè¿™ä¸ªç±»æ˜¯å±äº<code>è¡¨ç°å±‚</code>ã€<code>ä¸šåŠ¡å±‚</code>è¿˜æ˜¯<code>æ•°æ®å±‚</code>çš„ç±»ã€‚</p><h4 id=çŸ¥è¯†ç‚¹1componentç­‰>çŸ¥è¯†ç‚¹1:@Componentç­‰
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91component%e7%ad%89></a></h4><table><thead><tr><th>åç§°</th><th>@Component/@Controller/@Service/@Repository</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»ä¸ºspringç®¡ç†çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„idï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™</td></tr></tbody></table><h3 id=32-çº¯æ³¨è§£å¼€å‘æ¨¡å¼>3.2 çº¯æ³¨è§£å¼€å‘æ¨¡å¼
<a class=header-anchor href=#32-%e7%ba%af%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f></a></h3><p>ä¸Šé¢å·²ç»å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥é…ç½®bean,ä½†æ˜¯<strong>ä¾ç„¶æœ‰ç”¨åˆ°é…ç½®æ–‡ä»¶</strong>ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹åŒ…è¿›è¡Œäº†æ‰«æï¼ŒSpringåœ¨3.0ç‰ˆå·²ç»æ”¯æŒçº¯æ³¨è§£å¼€å‘ï¼Œä¹Ÿå°±æ˜¯ä¸ä¾èµ–äºé…ç½®æ–‡ä»¶ï¼Œç›´æ¥åœ¨ä»£ç ä¸Šå¢åŠ æ³¨è§£å°±å¯ä»¥æ­å»ºä¸€ä¸ªspringé¡¹ç›®</p><ul><li>Spring3.0å¼€å¯äº†çº¯æ³¨è§£å¼€å‘æ¨¡å¼ï¼Œä½¿ç”¨Javaç±»æ›¿ä»£é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº†Springå¿«é€Ÿå¼€å‘èµ›é“</li></ul><p>å…·ä½“å¦‚ä½•å®ç°?</p><h4 id=321-æ€è·¯åˆ†æ>3.2.1 æ€è·¯åˆ†æ
<a class=header-anchor href=#321-%e6%80%9d%e8%b7%af%e5%88%86%e6%9e%90></a></h4><p>å®ç°æ€è·¯ä¸º:</p><ul><li><p>å°†é…ç½®æ–‡ä»¶applicationContext.xmlåˆ é™¤æ‰ï¼Œä½¿ç”¨ç±»æ¥æ›¿æ¢ã€‚è¿™é‡Œçš„ç±»ä¸€èˆ¬æ˜¯é…ç½®ç±»</p><blockquote><p>ç›¸å½“äºé…ç½®æ–‡ä»¶å¯¹åº”ä¸€ä¸ªå¤§çš„é…ç½®ç±»ï¼Œä¸€ä¸ªå¤§é…ç½®é¡¹å¯ä»¥å¯¹åº”ä¸€ä¸ªå°é…ç½®ç±»ï¼Œæ¯ä¸€ä¸ªæ ‡ç­¾å±æ€§å¯¹åº”ä¸€ä¸ªæ³¨è§£ï¼Œç›¸å½“äºå°†é…ç½®æ–‡ä»¶æ‹†åˆ†æˆäº†æ³¨è§£+javaé…ç½®ä»£ç çš„å½¢å¼</p></blockquote></li></ul><h4 id=322-å®ç°æ­¥éª¤>3.2.2 å®ç°æ­¥éª¤
<a class=header-anchor href=#322-%e5%ae%9e%e7%8e%b0%e6%ad%a5%e9%aa%a4></a></h4><h5 id=æ­¥éª¤1åˆ›å»ºé…ç½®ç±»>æ­¥éª¤1:åˆ›å»ºé…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%88%9b%e5%bb%ba%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h5><p>åˆ›å»ºä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»>æ­¥éª¤2:æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e6%a0%87%e8%af%86%e8%af%a5%e7%b1%bb%e4%b8%ba%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@Configuration</code>æ³¨è§£ï¼Œå°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªé…ç½®ç±»,æ›¿æ¢<code>applicationContext.xml</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤3ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®>æ­¥éª¤3:ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e7%94%a8%e6%b3%a8%e8%a7%a3%e6%9b%bf%e6%8d%a2%e5%8c%85%e6%89%ab%e6%8f%8f%e9%85%8d%e7%bd%ae></a></h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«ææ³¨è§£<code>@ComponentScan</code>æ›¿æ¢<code>&lt;context:component-scan base-package=""/></code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤4åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ>æ­¥éª¤4:åˆ›å»ºè¿è¡Œç±»å¹¶æ‰§è¡Œ
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e5%88%9b%e5%bb%ba%e8%bf%90%e8%a1%8c%e7%b1%bb%e5%b9%b6%e6%89%a7%e8%a1%8c></a></h5><p>åˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œç±»<code>AppForAnnotation</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppForAnnotation</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>BookDao<span style=color:#f92672>)</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookService bookService <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookService<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookService<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡ŒAppForAnnotation,å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå¯¹è±¡ä¾ç„¶è¢«è·å–æˆåŠŸ</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636424.png alt=1630029110506></p><p>è‡³æ­¤ï¼Œçº¯æ³¨è§£å¼€å‘çš„æ–¹å¼å°±å·²ç»å®Œæˆäº†ï¼Œä¸»è¦å†…å®¹åŒ…æ‹¬:</p><ul><li><p>Javaç±»æ›¿æ¢Springæ ¸å¿ƒé…ç½®æ–‡ä»¶</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636425.png alt=1630029254372></p></li><li><p>@Configurationæ³¨è§£ç”¨äºè®¾å®šå½“å‰ç±»ä¸ºé…ç½®ç±»</p></li><li><p>@ComponentScanæ³¨è§£ç”¨äºè®¾å®šæ‰«æè·¯å¾„ï¼Œæ­¤æ³¨è§£åªèƒ½æ·»åŠ ä¸€æ¬¡ï¼Œå¤šä¸ªæ•°æ®è¯·ç”¨æ•°ç»„æ ¼å¼</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>({</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>itheima</span><span style=color:#f92672>.</span><span style=color:#a6e22e>service</span><span style=color:#e6db74>&#34;,&#34;</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>itheima</span><span style=color:#f92672>.</span><span style=color:#a6e22e>dao</span><span style=color:#960050;background-color:#1e0010>&#34;</span><span style=color:#f92672>})</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>è¯»å–Springæ ¸å¿ƒé…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨å¯¹è±¡åˆ‡æ¢ä¸ºè¯»å–Javaé…ç½®ç±»åˆå§‹åŒ–å®¹å™¨å¯¹è±¡</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//åŠ è½½é…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;applicationContext.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//åŠ è½½é…ç½®ç±»åˆå§‹åŒ–å®¹å™¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//ä¸¤è€…éƒ½èƒ½å¾—åˆ°IOCå®¹å™¨ï¼Œä½†æ˜¯ä¸€ä¸ªåŠ è½½çš„æ˜¯é…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªåŠ è½½çš„æ˜¯javaä»£ç é…ç½®ç±»
</span></span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=çŸ¥è¯†ç‚¹1configuration>çŸ¥è¯†ç‚¹1ï¼š@Configuration
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91configuration></a></h4><table><thead><tr><th>åç§°</th><th>@Configuration</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»ä¸ºspringé…ç½®ç±»</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„idï¼Œé»˜è®¤ä¸ºç±»åå°å†™</td></tr></tbody></table><h4 id=çŸ¥è¯†ç‚¹2componentscan>çŸ¥è¯†ç‚¹2ï¼š@ComponentScan
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b92componentscan></a></h4><table><thead><tr><th>åç§°</th><th>@ComponentScan</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®springé…ç½®ç±»æ‰«æè·¯å¾„ï¼Œç”¨äºåŠ è½½ä½¿ç”¨æ³¨è§£æ ¼å¼å®šä¹‰çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šæ‰«æè·¯å¾„ï¼Œæ­¤è·¯å¾„å¯ä»¥é€å±‚å‘ä¸‹æ‰«æ</td></tr></tbody></table><p><strong>å°ç»“:</strong></p><p>è¿™ä¸€èŠ‚é‡ç‚¹æŒæ¡çš„æ˜¯ä½¿ç”¨æ³¨è§£å®ŒæˆSpringçš„beanç®¡ç†ï¼Œéœ€è¦æŒæ¡çš„å†…å®¹ä¸º:</p><ul><li>è®°ä½@Componentã€@Controllerã€@Serviceã€@Repositoryè¿™å››ä¸ªæ³¨è§£</li><li>applicationContext.xmlä¸­<code>&lt;context:component-san/></code>çš„ä½œç”¨æ˜¯æŒ‡å®šæ‰«æåŒ…è·¯å¾„ï¼Œæ³¨è§£ä¸º@ComponentScan</li><li>@Configurationæ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»ï¼Œä½¿ç”¨ç±»æ›¿æ¢applicationContext.xmlæ–‡ä»¶</li><li>ClassPathXmlApplicationContextæ˜¯åŠ è½½XML<strong>é…ç½®æ–‡ä»¶</strong></li><li>AnnotationConfigApplicationContextæ˜¯åŠ è½½<strong>é…ç½®ç±»</strong></li><li>å°†é…ç½®æ–‡ä»¶æ‹†åˆ†æˆjavaé…ç½®ä»£ç +æ³¨è§£çš„å½¢å¼</li></ul><h3 id=33-æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†>3.3 æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†
<a class=header-anchor href=#33-%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91bean%e4%bd%9c%e7%94%a8%e8%8c%83%e5%9b%b4%e4%b8%8e%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e7%ae%a1%e7%90%86></a></h3><p>ä½¿ç”¨æ³¨è§£å·²ç»å®Œæˆäº†beançš„ç®¡ç†ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§å‰é¢æ‰€å­¦ä¹ çš„å†…å®¹ï¼Œå°†é€šè¿‡é…ç½®å®ç°çš„å†…å®¹éƒ½æ¢æˆå¯¹åº”çš„æ³¨è§£å®ç°ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹:<code>beanä½œç”¨èŒƒå›´</code>å’Œ<code>beanç”Ÿå‘½å‘¨æœŸ</code>ã€‚</p><h4 id=331-ç¯å¢ƒå‡†å¤‡>3.3.1 ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#331-%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87></a></h4><p>è€è§„çŸ©ï¼Œå­¦ä¹ ä¹‹å‰å…ˆæ¥å‡†å¤‡ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ BookDaoã€BookDaoImplç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao1 <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao2 <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636426.png alt=1630031112993></p><h4 id=332-beançš„ä½œç”¨èŒƒå›´>3.3.2 Beançš„ä½œç”¨èŒƒå›´
<a class=header-anchor href=#332-bean%e7%9a%84%e4%bd%9c%e7%94%a8%e8%8c%83%e5%9b%b4></a></h4><p>(1)å…ˆè¿è¡ŒAppç±»,åœ¨æ§åˆ¶å°æ‰“å°ä¸¤ä¸ªä¸€æ‘¸ä¸€æ ·çš„åœ°å€ï¼Œè¯´æ˜é»˜è®¤æƒ…å†µä¸‹beanæ˜¯å•ä¾‹</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636427.png alt=1630031192753></p><p>(2)è¦æƒ³å°†BookDaoImplå˜æˆéå•ä¾‹ï¼Œåªéœ€è¦åœ¨å…¶ç±»ä¸Šæ·»åŠ <code>@scope</code>æ³¨è§£</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//@Scopeè®¾ç½®beançš„ä½œç”¨èŒƒå›´
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Scope</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;prototype&#34;</span><span style=color:#f92672>)</span><span style=color:#75715e>//å¯¹åº”åˆ°é…ç½®æ–‡ä»¶ä¸­ä¸ºscopeå±æ€§
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å†æ¬¡æ‰§è¡ŒAppç±»ï¼Œæ‰“å°ç»“æœ:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636428.png alt=1630031808947></p><h5 id=çŸ¥è¯†ç‚¹1scope>çŸ¥è¯†ç‚¹1ï¼š@Scope
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91scope></a></h5><table><thead><tr><th>åç§°</th><th>@Scope</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥ç±»åˆ›å»ºå¯¹è±¡çš„ä½œç”¨èŒƒå›´<br>å¯ç”¨äºè®¾ç½®åˆ›å»ºå‡ºçš„beanæ˜¯å¦ä¸ºå•ä¾‹å¯¹è±¡</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beanä½œç”¨èŒƒå›´ï¼Œ<br>é»˜è®¤å€¼<strong>singleton</strong>ï¼ˆå•ä¾‹ï¼‰ï¼Œå¯é€‰å€¼prototypeï¼ˆéå•ä¾‹ï¼‰</td></tr></tbody></table><h4 id=333-beançš„ç”Ÿå‘½å‘¨æœŸ>3.3.3 Beançš„ç”Ÿå‘½å‘¨æœŸ
<a class=header-anchor href=#333-bean%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f></a></h4><p>(1)åœ¨BookDaoImplä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œ<code>init</code>å’Œ<code>destroy</code>,æ–¹æ³•åå¯ä»¥ä»»æ„</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;init ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>destroy</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;destroy ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>(2)å¦‚ä½•å¯¹æ–¹æ³•è¿›è¡Œæ ‡è¯†ï¼Œå“ªä¸ªæ˜¯åˆå§‹åŒ–æ–¹æ³•ï¼Œå“ªä¸ªæ˜¯é”€æ¯æ–¹æ³•?</p><p>åªéœ€è¦åœ¨å¯¹åº”çš„æ–¹æ³•ä¸Šæ·»åŠ <code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£å³å¯ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ç›´æ¥ä½¿ç”¨æ³¨è§£æ ‡è¯†è¿™ä¸¤ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ—¶æœº
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@PostConstruct</span> <span style=color:#75715e>//åœ¨æ„é€ æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ›¿æ¢ init-method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;init ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PreDestroy</span> <span style=color:#75715e>//åœ¨é”€æ¯æ–¹æ³•ä¹‹å‰æ‰§è¡Œ,æ›¿æ¢ destroy-method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>destroy</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;destroy ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>(3)è¦æƒ³çœ‹åˆ°ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<code>destroy</code>åªæœ‰åœ¨å®¹å™¨å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹Appçš„ç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao1 <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookDao bookDao2 <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span> <span style=color:#75715e>//å…³é—­å®¹å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è°ƒç”¨destroyæ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>(4)è¿è¡ŒApp,ç±»æŸ¥çœ‹æ‰“å°ç»“æœï¼Œè¯æ˜initå’Œdestroyæ–¹æ³•éƒ½è¢«æ‰§è¡Œäº†ã€‚</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636429.png alt=1630032385498></p><p><strong>æ³¨æ„:</strong>@PostConstructå’Œ@PreDestroyæ³¨è§£å¦‚æœæ‰¾ä¸åˆ°ï¼Œéœ€è¦å¯¼å…¥ä¸‹é¢çš„jaråŒ…</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;</span>dependency<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span>groupId<span style=color:#f92672>&gt;</span>javax<span style=color:#f92672>.</span><span style=color:#a6e22e>annotation</span><span style=color:#f92672>&lt;/</span>groupId<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span>artifactId<span style=color:#f92672>&gt;</span>javax<span style=color:#f92672>.</span><span style=color:#a6e22e>annotation</span><span style=color:#f92672>-</span>api<span style=color:#f92672>&lt;/</span>artifactId<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span>version<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>1.3.2</span><span style=color:#f92672>&lt;/</span>version<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span>dependency<span style=color:#f92672>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰¾ä¸åˆ°çš„åŸå› æ˜¯ï¼Œä»JDK9ä»¥åjdkä¸­çš„javax.annotationåŒ…è¢«ç§»é™¤äº†ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£åˆšå¥½å°±åœ¨è¿™ä¸ªåŒ…ä¸­ã€‚</p><h5 id=çŸ¥è¯†ç‚¹1postconstruct>çŸ¥è¯†ç‚¹1ï¼š@PostConstruct
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91postconstruct></a></h5><table><thead><tr><th>åç§°</th><th>@PostConstruct</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•ä¸Š</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•ä¸ºåˆå§‹åŒ–æ–¹æ³•</td></tr><tr><td>å±æ€§</td><td>æ— </td></tr></tbody></table><h5 id=çŸ¥è¯†ç‚¹2predestroy>çŸ¥è¯†ç‚¹2ï¼š@PreDestroy
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b92predestroy></a></h5><table><thead><tr><th>åç§°</th><th>@PreDestroy</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•ä¸Š</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•ä¸ºé”€æ¯æ–¹æ³•</td></tr><tr><td>å±æ€§</td><td>æ— </td></tr></tbody></table><p><strong>å°ç»“</strong></p><p>ç›¸å½“äºä¸€ä¸ªå±æ€§å°±å¯¹åº”ä¸€ä¸ªæ³¨è§£ï¼Œå°†é…ç½®æ–‡ä»¶æ‹†åˆ†åˆ°javaä»£ç çš„å„å¤„ï¼Œç„¶åæä¾›é…ç½®æ–‡ä»¶ä½œä¸ºå…¥å£</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636430.png alt=1630033039358></p><h3 id=34-æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥>3.4 æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥
<a class=header-anchor href=#34-%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5></a></h3><p>Springä¸ºäº†ä½¿ç”¨æ³¨è§£ç®€åŒ–å¼€å‘ï¼Œå¹¶æ²¡æœ‰æä¾›<code>æ„é€ å‡½æ•°æ³¨å…¥</code>ã€<code>setteræ³¨å…¥</code>å¯¹åº”çš„æ³¨è§£ï¼Œåªæä¾›äº†è‡ªåŠ¨è£…é…çš„æ³¨è§£å®ç°ã€‚è‡ªåŠ¨è£…é…ä¸­é»˜è®¤ä½¿ç”¨çš„æ˜¯<strong>æŒ‰ç±»å‹æ³¨å…¥</strong></p><h4 id=341-ç¯å¢ƒå‡†å¤‡>3.4.1 ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#341-%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87></a></h4><p>åœ¨å­¦ä¹ ä¹‹å‰ï¼ŒæŠŠæ¡ˆä¾‹ç¯å¢ƒä»‹ç»ä¸‹:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ BookDaoã€BookDaoImplã€BookServiceã€BookServiceImplç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//-------------------------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookService</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookServiceImpl</span> <span style=color:#66d9ef>implements</span> BookService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ä¹‹å‰ä½¿ç”¨çš„setteræ³¨å…¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> BookDao bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBookDao</span><span style=color:#f92672>(</span>BookDao bookDao<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>bookDao</span> <span style=color:#f92672>=</span> bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book service save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BookService bookService <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>BookService<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookService<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636431.png alt=1630033604129></p><p>ç¯å¢ƒå‡†å¤‡å¥½åï¼Œè¿è¡Œåä¼šå‘ç°æœ‰é—®é¢˜</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636432.png alt=1630033710052></p><p>å‡ºç°é—®é¢˜çš„åŸå› æ˜¯ï¼Œåœ¨BookServiceImplç±»ä¸­æ·»åŠ äº†BookDaoçš„å±æ€§ï¼Œå¹¶æä¾›äº†setteræ–¹æ³•ï¼Œä½†æ˜¯ç›®å‰æ˜¯æ²¡æœ‰æä¾›é…ç½®æ³¨å…¥BookDaoçš„ï¼Œæ‰€ä»¥bookDaoå¯¹è±¡ä¸ºNull,è°ƒç”¨å…¶saveæ–¹æ³•å°±ä¼šæŠ¥<code>ç©ºæŒ‡é’ˆå¼‚å¸¸</code>ã€‚</p><h4 id=342-æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥>3.4.2 æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥
<a class=header-anchor href=#342-%e6%b3%a8%e8%a7%a3%e5%ae%9e%e7%8e%b0%e6%8c%89%e7%85%a7%e7%b1%bb%e5%9e%8b%e6%b3%a8%e5%85%a5></a></h4><p>å¯¹äºè¿™ä¸ªé—®é¢˜ä½¿ç”¨æ³¨è§£è¯¥å¦‚ä½•è§£å†³?</p><p>(1) åœ¨BookServiceImplç±»çš„bookDaoå±æ€§ä¸Šæ·»åŠ <code>@Autowired</code>æ³¨è§£</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookServiceImpl</span> <span style=color:#66d9ef>implements</span> BookService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span><span style=color:#75715e>//è‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> BookDao bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e>//	  public void setBookDao(BookDao bookDao) {
</span></span></span><span style=display:flex><span><span style=color:#75715e>//        this.bookDao = bookDao;
</span></span></span><span style=display:flex><span><span style=color:#75715e>//    }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book service save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„:</strong></p><ul><li>@Autowiredå¯ä»¥å†™åœ¨å±æ€§ä¸Šï¼Œä¹Ÿå¯ä¹Ÿå†™åœ¨setteræ–¹æ³•ä¸Šï¼Œæœ€ç®€å•çš„å¤„ç†æ–¹å¼æ˜¯<code>å†™åœ¨å±æ€§ä¸Šå¹¶å°†setteræ–¹æ³•åˆ é™¤æ‰</code></li><li>ä¸ºä»€ä¹ˆsetteræ–¹æ³•å¯ä»¥åˆ é™¤å‘¢?<ul><li>è‡ªåŠ¨è£…é…åŸºäº<strong>åå°„</strong>è®¾è®¡åˆ›å»ºå¯¹è±¡å¹¶é€šè¿‡æš´åŠ›åå°„<strong>ä¸ºç§æœ‰å±æ€§è¿›è¡Œè®¾å€¼</strong></li><li>æ™®é€šåå°„åªèƒ½è·å–publicä¿®é¥°çš„å†…å®¹</li><li>æš´åŠ›åå°„é™¤äº†è·å–publicä¿®é¥°çš„å†…å®¹è¿˜å¯ä»¥è·å–privateä¿®æ”¹çš„å†…å®¹</li><li>æ‰€ä»¥æ­¤å¤„æ— éœ€æä¾›setteræ–¹æ³•</li></ul></li></ul><p>(2)@Autowiredæ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œé‚£ä¹ˆå¯¹åº”BookDaoæ¥å£å¦‚æœæœ‰å¤šä¸ªå®ç°ç±»ï¼Œæ¯”å¦‚æ·»åŠ BookDaoImpl2</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl2</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...2&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ä¸ªæ—¶å€™å†æ¬¡è¿è¡ŒAppï¼Œå°±ä¼šæŠ¥é”™</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636433.png alt=1630034272959></p><p>æ­¤æ—¶ï¼ŒæŒ‰ç…§ç±»å‹æ³¨å…¥å°±æ— æ³•åŒºåˆ†åˆ°åº•æ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼Œè§£å†³æ–¹æ¡ˆ:<code>æŒ‰ç…§åç§°æ³¨å…¥</code></p><ul><li><p>å…ˆç»™ä¸¤ä¸ªDaoç±»åˆ†åˆ«èµ·ä¸ªåç§°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Repository</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao2&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl2</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...2&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­¤æ—¶å°±å¯ä»¥æ³¨å…¥æˆåŠŸï¼Œä½†æ˜¯å¾—æ€è€ƒä¸ªé—®é¢˜:</p><ul><li><p>@Autowiredæ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥çš„ï¼Œç»™BookDaoçš„ä¸¤ä¸ªå®ç°èµ·äº†åç§°ï¼Œå®ƒè¿˜æ˜¯æœ‰ä¸¤ä¸ªbeanå¯¹è±¡ï¼Œä¸ºä»€ä¹ˆä¸æŠ¥é”™?</p></li><li><p>@Autowiredé»˜è®¤æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…ï¼Œå¦‚æœIOCå®¹å™¨ä¸­åŒç±»çš„Beanæ‰¾åˆ°å¤šä¸ªï¼Œå°±æŒ‰ç…§å˜é‡åå’ŒBeançš„åç§°åŒ¹é…ã€‚å› ä¸ºå˜é‡åå«<code>bookDao</code>è€Œå®¹å™¨ä¸­ä¹Ÿæœ‰ä¸€ä¸ª<code>booDao</code>ï¼Œæ‰€ä»¥å¯ä»¥æˆåŠŸæ³¨å…¥ã€‚</p></li><li><p>åˆ†æä¸‹é¢è¿™ç§æƒ…å†µæ˜¯å¦èƒ½å®Œæˆæ³¨å…¥å‘¢?</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636434.png alt=1630036236150></p></li><li><p>ä¸è¡Œï¼Œå› ä¸ºæŒ‰ç…§ç±»å‹ä¼šæ‰¾åˆ°å¤šä¸ªbeanå¯¹è±¡ï¼Œæ­¤æ—¶ä¼šæŒ‰ç…§<code>bookDao</code>åç§°å»æ‰¾ï¼Œå› ä¸ºIOCå®¹å™¨åªæœ‰åç§°å«<code>bookDao1</code>å’Œ<code>bookDao2</code>,æ‰€ä»¥æ‰¾ä¸åˆ°ï¼Œä¼šæŠ¥<code>NoUniqueBeanDefinitionException</code>ï¼Œæ­¤æ—¶éœ€è¦æŒ‡å®šæ³¨å…¥çš„beanåç§°æ˜¯ä»€ä¹ˆï¼Œç›¸å½“äºæŒ‰ç…§åç§°æ³¨å…¥</p></li></ul></li></ul><h4 id=343-æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥>3.4.3 æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥
<a class=header-anchor href=#343-%e6%b3%a8%e8%a7%a3%e5%ae%9e%e7%8e%b0%e6%8c%89%e7%85%a7%e5%90%8d%e7%a7%b0%e6%b3%a8%e5%85%a5></a></h4><p>å½“æ ¹æ®ç±»å‹åœ¨å®¹å™¨ä¸­æ‰¾åˆ°å¤šä¸ªbean,æ³¨å…¥å‚æ•°çš„å±æ€§ååˆå’Œå®¹å™¨ä¸­beançš„åç§°ä¸ä¸€è‡´ï¼Œè¿™ä¸ªæ—¶å€™è¯¥å¦‚ä½•è§£å†³ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°<code>@Qualifier</code>æ¥æŒ‡å®šæ³¨å…¥å“ªä¸ªåç§°çš„beanå¯¹è±¡ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookServiceImpl</span> <span style=color:#66d9ef>implements</span> BookService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Qualifier</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao1&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> BookDao bookDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book service save ...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        bookDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>@Qualifieræ³¨è§£åçš„å€¼å°±æ˜¯éœ€è¦æ³¨å…¥çš„beançš„åç§°ã€‚</p><p><strong>æ³¨æ„</strong>:@Qualifierä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»å’Œ@Autowiredä¸€èµ·ä½¿ç”¨</p><h4 id=344-ç®€å•æ•°æ®ç±»å‹æ³¨å…¥>3.4.4 ç®€å•æ•°æ®ç±»å‹æ³¨å…¥
<a class=header-anchor href=#344-%e7%ae%80%e5%8d%95%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e6%b3%a8%e5%85%a5></a></h4><p>å¼•ç”¨ç±»å‹çœ‹å®Œï¼Œç®€å•ç±»å‹æ³¨å…¥å°±æ¯”è¾ƒå®¹æ˜“æ‡‚äº†ã€‚ç®€å•ç±»å‹æ³¨å…¥çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸‹é¢åœ¨<code>BookDaoImpl</code>ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>name</code>å±æ€§ï¼Œç”¨å…¶è¿›è¡Œç®€å•ç±»å‹æ³¨å…¥</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ•°æ®ç±»å‹æ¢äº†ï¼Œå¯¹åº”çš„æ³¨è§£ä¹Ÿè¦è·Ÿç€æ¢ï¼Œè¿™æ¬¡ä½¿ç”¨<code>@Value</code>æ³¨è§£ï¼Œå°†å€¼å†™å…¥æ³¨è§£çš„å‚æ•°ä¸­å°±è¡Œäº†</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//åœ¨è¿™é‡Œå°†valueå†™æ­»äº†
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ³¨æ„æ•°æ®æ ¼å¼è¦åŒ¹é…ï¼Œå¦‚å°†"abc"æ³¨å…¥ç»™intå€¼ï¼Œè¿™æ ·ç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</p><p>ä»‹ç»å®Œåï¼Œä¼šæœ‰ä¸€ç§æ„Ÿè§‰å°±æ˜¯è¿™ä¸ªæ³¨è§£å¥½åƒæ²¡ä»€ä¹ˆç”¨ï¼Œè·Ÿç›´æ¥èµ‹å€¼æ˜¯ä¸€ä¸ªæ•ˆæœï¼Œè¿˜æ²¡æœ‰ç›´æ¥èµ‹å€¼ç®€å•ï¼Œæ‰€ä»¥è¿™ä¸ªæ³¨è§£å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ?</p><h4 id=345-æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶>3.4.5 æ³¨è§£è¯»å–propertiesé…ç½®æ–‡ä»¶
<a class=header-anchor href=#345-%e6%b3%a8%e8%a7%a3%e8%af%bb%e5%8f%96properties%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h4><p><code>@Value</code>ä¸€èˆ¬ä¼šè¢«ç”¨åœ¨ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–å†…å®¹è¿›è¡Œä½¿ç”¨ï¼Œå…·ä½“å¦‚ä½•å®ç°?</p><h5 id=æ­¥éª¤1resourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶>æ­¥éª¤1ï¼šresourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41resource%e4%b8%8b%e5%87%86%e5%a4%87properties%e6%96%87%e4%bb%b6></a></h5><p>jdbc.properties</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>itheima888</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2-ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶>æ­¥éª¤2: ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42-%e4%bd%bf%e7%94%a8%e6%b3%a8%e8%a7%a3%e5%8a%a0%e8%bd%bdproperties%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h5><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@PropertySource</code>æ³¨è§£</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤3ä½¿ç”¨valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹>æ­¥éª¤3ï¼šä½¿ç”¨@Valueè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e4%bd%bf%e7%94%a8value%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%b8%ad%e7%9a%84%e5%86%85%e5%ae%b9></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bookDao&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ä»å¤–éƒ¨å±æ€§æ–‡ä»¶ä¸­è¯»å–nameå±æ€§å¯¹åº”çš„å€¼æ³¨å…¥åˆ°è¿™é‡Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${name}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­¥éª¤4:è¿è¡Œç¨‹åº</p><p>è¿è¡ŒAppç±»ï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å·²ç»è¢«åŠ è½½åˆ°</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636435.png alt=1630084683663></p><p><strong>æ³¨æ„:</strong></p><ul><li><p>å¦‚æœè¯»å–çš„propertiesé…ç½®æ–‡ä»¶æœ‰å¤šä¸ªï¼Œå¯ä»¥ä½¿ç”¨<code>@PropertySource</code>çš„å±æ€§æ¥æŒ‡å®šå¤šä¸ª</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>({</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;xxx.properties&#34;</span><span style=color:#f92672>})</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦<code>*</code>,è¿è¡Œä¼šæŠ¥é”™</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>({</span><span style=color:#e6db74>&#34;*.properties&#34;</span><span style=color:#f92672>})</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­å¯ä»¥æŠŠ<code>classpath:</code>åŠ ä¸Š,ä»£è¡¨ä»å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„æ‰¾æ–‡ä»¶</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>({</span><span style=color:#e6db74>&#34;classpath:jdbc.properties&#34;</span><span style=color:#f92672>})</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=çŸ¥è¯†ç‚¹1autowired>çŸ¥è¯†ç‚¹1ï¼š@Autowired
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91autowired></a></h4><table><thead><tr><th>åç§°</th><th>@Autowired</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£ æˆ– æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰ æˆ– æ–¹æ³•å½¢å‚æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹ æˆ– æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹ æˆ– ç±»setæ–¹æ³•ä¸Šæ–¹ æˆ– æ–¹æ³•å½¢å‚å‰é¢</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºå¼•ç”¨ç±»å‹å±æ€§è®¾ç½®å€¼ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ³¨å…¥</td></tr><tr><td>å±æ€§</td><td>requiredï¼štrue/falseï¼Œå®šä¹‰è¯¥å±æ€§æ˜¯å¦å…è®¸ä¸ºnull</td></tr></tbody></table><h4 id=çŸ¥è¯†ç‚¹2qualifier>çŸ¥è¯†ç‚¹2ï¼š@Qualifier
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b92qualifier></a></h4><table><thead><tr><th>åç§°</th><th>@Qualifier</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£ æˆ– æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹ æˆ– æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹ æˆ– ç±»setæ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºå¼•ç”¨ç±»å‹å±æ€§æŒ‡å®šæ³¨å…¥çš„beanIdï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§åç§°æ³¨å…¥beançš„æ—¶å€™ï¼ŒæŒ‡å®šbeançš„åç§°</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®æ³¨å…¥çš„beanId</td></tr></tbody></table><h4 id=çŸ¥è¯†ç‚¹3value>çŸ¥è¯†ç‚¹3ï¼š@Value
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b93value></a></h4><table><thead><tr><th>åç§°</th><th>@Value</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>å±æ€§æ³¨è§£ æˆ– æ–¹æ³•æ³¨è§£ï¼ˆäº†è§£ï¼‰</td></tr><tr><td>ä½ç½®</td><td>å±æ€§å®šä¹‰ä¸Šæ–¹ æˆ– æ ‡å‡†setæ–¹æ³•ä¸Šæ–¹ æˆ– ç±»setæ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸º <strong>åŸºæœ¬æ•°æ®ç±»å‹</strong> æˆ– <strong>å­—ç¬¦ä¸²ç±»å‹</strong> å±æ€§è®¾ç½®å€¼</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè¦æ³¨å…¥çš„å±æ€§å€¼</td></tr></tbody></table><h4 id=çŸ¥è¯†ç‚¹4propertysource>çŸ¥è¯†ç‚¹4ï¼š@PropertySource
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b94propertysource></a></h4><table><thead><tr><th>åç§°</th><th>@PropertySource</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>åŠ è½½propertiesæ–‡ä»¶ä¸­çš„å±æ€§å€¼ï¼ŒæŒ‡å®šåŠ è½½å“ªä¸ªå±æ€§æ–‡ä»¶</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®åŠ è½½çš„propertiesæ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶åæˆ–æ–‡ä»¶åç»„æˆçš„æ•°ç»„</td></tr></tbody></table><h2 id=iocdiæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean>IOC/DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean
<a class=header-anchor href=#iocdi%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e7%ae%a1%e7%90%86%e7%ac%ac%e4%b8%89%e6%96%b9bean></a></h2><p>å‰é¢å®šä¹‰beançš„æ—¶å€™éƒ½æ˜¯åœ¨è‡ªå·±å¼€å‘çš„ç±»ä¸Šé¢å†™ä¸ªæ³¨è§£å°±å®Œæˆäº†ï¼Œä½†å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹çš„ç±»ï¼Œè¿™äº›ç±»éƒ½æ˜¯åœ¨jaråŒ…ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨ç±»ä¸Šé¢æ·»åŠ æ³¨è§£ï¼ˆæ²¡æœ‰ä¿®æ”¹æƒé™ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™è¯¥æ€ä¹ˆåŠ?</p><p>é‡åˆ°ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼æ¥å®šä¹‰bean,è¿™ç§æ–¹å¼ä¸èƒ½åœ¨åŸå§‹ä»£ç ä¸Šé¢ä¹¦å†™æ³¨è§£ï¼Œä¸€æ ·èƒ½å®šä¹‰bean,è¿™å°±ç”¨åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„æ³¨è§£**@Bean**ã€‚</p><p>è¿™ä¸ªæ³¨è§£è¯¥å¦‚ä½•ä½¿ç”¨å‘¢?</p><p>å’±ä»¬æŠŠä¹‹å‰ä½¿ç”¨é…ç½®æ–¹å¼ç®¡ç†çš„æ•°æ®æºä½¿ç”¨æ³¨è§£å†æ¥ä¸€éï¼Œé€šè¿‡è¿™ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸‹@Beançš„ä½¿ç”¨ã€‚</p><h3 id=ç¯å¢ƒå‡†å¤‡-2>ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87-2></a></h3><p>å­¦ä¹ @Beanæ³¨è§£ä¹‹å‰å…ˆæ¥å‡†å¤‡ç¯å¢ƒ:</p><ul><li><p>åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®</p></li><li><p>pom.xmlæ·»åŠ Springçš„ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ ä¸€ä¸ªé…ç½®ç±»<code>SpringConfig</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ·»åŠ BookDaoã€BookDaoImplç±»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookDaoImpl</span> <span style=color:#66d9ef>implements</span> BookDao <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;book dao save ...&#34;</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºè¿è¡Œç±»App</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>æœ€ç»ˆåˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636436.png alt=1630122466404></p><h3 id=æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean>æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean
<a class=header-anchor href=#%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e7%ae%a1%e7%90%86%e7%ac%ac%e4%b8%89%e6%96%b9bean></a></h3><p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸­å®Œæˆå¯¹<code>Druid</code>æ•°æ®æºçš„ç®¡ç†ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><h4 id=æ­¥éª¤1å¯¼å…¥å¯¹åº”çš„jaråŒ…>æ­¥éª¤1:å¯¼å…¥å¯¹åº”çš„jaråŒ…
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%af%bc%e5%85%a5%e5%af%b9%e5%ba%94%e7%9a%84jar%e5%8c%85></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>com.alibaba<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>druid<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.1.16<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•>æ­¥éª¤2:åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%9c%a8%e9%85%8d%e7%bd%ae%e7%b1%bb%e4%b8%ad%e6%b7%bb%e5%8a%a0%e4%b8%80%e4%b8%aa%e6%96%b9%e6%b3%95></a></h4><p>æ³¨æ„è¯¥æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯è¦åˆ›å»ºçš„Beanå¯¹è±¡ç±»å‹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3åœ¨æ–¹æ³•ä¸Šæ·»åŠ beanæ³¨è§£>æ­¥éª¤3:åœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>@Bean</code>æ³¨è§£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e5%9c%a8%e6%96%b9%e6%b3%95%e4%b8%8a%e6%b7%bb%e5%8a%a0bean%e6%b3%a8%e8%a7%a3></a></h4><p>@Beanæ³¨è§£çš„ä½œç”¨æ˜¯å°†æ–¹æ³•çš„è¿”å›å€¼åˆ¶ä½œä¸ºSpringç®¡ç†çš„ä¸€ä¸ªbeanå¯¹è±¡</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span><span style=color:#75715e>//newä¸€ä¸ªç¬¬ä¸‰æ–¹çš„jarå¯¹è±¡ï¼Œç„¶åå°†å…¶æ³¨è§£ä¸ºbeanï¼Œäº¤ç»™IOCå®¹å™¨ç®¡ç†
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„:ä¸èƒ½ä½¿ç”¨<code>DataSource ds = new DruidDataSource()</code></strong></p><p>å› ä¸ºDataSourceæ¥å£ä¸­æ²¡æœ‰å¯¹åº”çš„setteræ–¹æ³•æ¥è®¾ç½®å±æ€§ã€‚</p><h4 id=æ­¥éª¤4ä»iocå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°>æ­¥éª¤4:ä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶æ‰“å°
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e4%bb%8eioc%e5%ae%b9%e5%99%a8%e4%b8%ad%e8%8e%b7%e5%8f%96%e5%af%b9%e8%b1%a1%e5%b9%b6%e6%89%93%e5%8d%b0></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        DataSource dataSource <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>DataSource<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>dataSource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ä½¿ç”¨@Beanæ¥ç®¡ç†ç¬¬ä¸‰æ–¹beançš„æ¡ˆä¾‹å°±å·²ç»å®Œæˆã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªbeanè¦è¢«Springç®¡ç†ï¼Œç›´æ¥åœ¨<strong>é…ç½®ç±»</strong>ä¸­å¤šäº›å‡ ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä¸Šæ·»åŠ @Beanæ³¨è§£å³å¯ã€‚</p><h3 id=å¼•å…¥å¤–éƒ¨é…ç½®ç±»>å¼•å…¥å¤–éƒ¨é…ç½®ç±»
<a class=header-anchor href=#%e5%bc%95%e5%85%a5%e5%a4%96%e9%83%a8%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h3><p>å¦‚æœæŠŠæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹beanéƒ½é…ç½®åˆ°Springçš„é…ç½®ç±»<code>SpringConfig</code>ä¸­ï¼Œè™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯ä¸åˆ©äºä»£ç é˜…è¯»å’Œåˆ†ç±»ç®¡ç†ï¼Œæ‰€æœ‰æˆ‘ä»¬å°±æƒ³èƒ½ä¸èƒ½æŒ‰ç…§ç±»åˆ«å°†è¿™äº›beané…ç½®åˆ°ä¸åŒçš„é…ç½®ç±»ä¸­?</p><p>å¯¹äºæ•°æ®æºçš„bean,æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>JdbcConfig</code>é…ç½®ç±»ï¼Œå¹¶æŠŠæ•°æ®æºé…ç½®åˆ°è¯¥ç±»ä¸‹ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªé…ç½®ç±»å¦‚ä½•èƒ½è¢«Springé…ç½®ç±»åŠ è½½åˆ°ï¼Œå¹¶åˆ›å»ºDataSourceå¯¹è±¡åœ¨IOCå®¹å™¨ä¸­?</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨åŒ…æ‰«æï¼Œä¸€ä¸ªæ˜¯ç›´æ¥å°†è¿™ä¸ªç±»è®¾ç½®ä¸ºé…ç½®ç±»:</p><h4 id=431-ä½¿ç”¨åŒ…æ‰«æå¼•å…¥>4.3.1 ä½¿ç”¨åŒ…æ‰«æå¼•å…¥
<a class=header-anchor href=#431-%e4%bd%bf%e7%94%a8%e5%8c%85%e6%89%ab%e6%8f%8f%e5%bc%95%e5%85%a5></a></h4><h5 id=æ­¥éª¤1åœ¨springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ>æ­¥éª¤1:åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%9c%a8spring%e7%9a%84%e9%85%8d%e7%bd%ae%e7%b1%bb%e4%b8%8a%e6%b7%bb%e5%8a%a0%e5%8c%85%e6%89%ab%e6%8f%8f></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//è¿™é‡Œé…ç½®åŒ…æ‰«ææ˜¯å› ä¸ºJdbcConfigä¸­æ²¡æœ‰ä½¿ç”¨Configurationæ³¨è§£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima.config&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2åœ¨jdbcconfigä¸Šæ·»åŠ é…ç½®æ³¨è§£>æ­¥éª¤2:åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%9c%a8jdbcconfig%e4%b8%8a%e6%b7%bb%e5%8a%a0%e9%85%8d%e7%bd%ae%e6%b3%a8%e8%a7%a3></a></h5><p>JdbcConfigç±»è¦æ”¾å…¥åˆ°<code>com.itheima.config</code>åŒ…ä¸‹ï¼Œéœ€è¦è¢«Springçš„é…ç½®ç±»æ‰«æåˆ°å³å¯</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span><span style=color:#75715e>//æ·»åŠ è¿™ä¸ªæ³¨è§£ç›´æ¥å°±å¯ä»¥è¢«IOCå®¹å™¨æ‰«æåˆ°ä»è€Œè¿›è¡Œç®¡ç†
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤3è¿è¡Œç¨‹åº-2>æ­¥éª¤3:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f-2></a></h5><p>ä¾ç„¶èƒ½è·å–åˆ°beanå¯¹è±¡å¹¶æ‰“å°æ§åˆ¶å°ã€‚</p><p>è¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿæ‰«æåˆ°ï¼Œä½†æ˜¯<strong>ä¸èƒ½å¾ˆå¿«çš„çŸ¥æ™“éƒ½å¼•å…¥äº†å“ªäº›é…ç½®ç±»</strong>ï¼ˆå°†æ‰€æœ‰çš„é…ç½®ç±»åœ¨ä¸€ä¸ªç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ä¸­å¼•å…¥æ›´åŠ æ˜æ˜¾ï¼‰ï¼Œæ‰€æœ‰è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼æ›´åŠ å¿«æ·</p><h4 id=432-ä½¿ç”¨importå¼•å…¥>4.3.2 ä½¿ç”¨<code>@Import</code>å¼•å…¥
<a class=header-anchor href=#432-%e4%bd%bf%e7%94%a8import%e5%bc%95%e5%85%a5></a></h4><p>æ–¹æ¡ˆä¸€å®ç°èµ·æ¥æœ‰ç‚¹å°å¤æ‚ï¼ŒSpringæ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ï¼Œäºæ˜¯åˆç»™æˆ‘ä»¬æä¾›äº†ç¬¬äºŒç§æ–¹æ¡ˆã€‚</p><p>è¿™ç§æ–¹æ¡ˆå¯ä»¥ä¸ç”¨åŠ <code>@Configuration</code>æ³¨è§£ï¼Œä½†æ˜¯å¿…é¡»åœ¨Springé…ç½®ç±»ä¸Šä½¿ç”¨<code>@Import</code>æ³¨è§£æ‰‹åŠ¨å¼•å…¥éœ€è¦åŠ è½½çš„é…ç½®ç±»</p><h5 id=æ­¥éª¤1å»é™¤jdbcconfigç±»ä¸Šçš„æ³¨è§£>æ­¥éª¤1:å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%8e%bb%e9%99%a4jdbcconfig%e7%b1%bb%e4%b8%8a%e7%9a%84%e6%b3%a8%e8%a7%a3></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2åœ¨springé…ç½®ç±»ä¸­å¼•å…¥>æ­¥éª¤2:åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%9c%a8spring%e9%85%8d%e7%bd%ae%e7%b1%bb%e4%b8%ad%e5%bc%95%e5%85%a5></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//@ComponentScan(&#34;com.itheima.config&#34;)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>({</span>JdbcConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„:</strong></p><ul><li><p>æ‰«ææ³¨è§£å¯ä»¥ç§»é™¤</p></li><li><p>@Importå‚æ•°éœ€è¦çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å¼•å…¥å¤šä¸ªé…ç½®ç±»ã€‚</p></li><li><p>@Importæ³¨è§£åœ¨é…ç½®ç±»ä¸­<strong>åªèƒ½å†™ä¸€æ¬¡</strong>ï¼Œè¦æƒ³å¼•å…¥å¤šä¸ªé…ç½®ç±»ï¼Œåªéœ€è¦å°†å…¶å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å³å¯ã€‚ä¸‹é¢çš„æ–¹å¼æ˜¯<strong>ä¸å…è®¸çš„</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//@ComponentScan(&#34;com.itheima.config&#34;)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>(</span>JdbcConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>(</span>Xxx<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h5 id=æ­¥éª¤3è¿è¡Œç¨‹åº-3>æ­¥éª¤3:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f-3></a></h5><p>ä¾ç„¶èƒ½è·å–åˆ°beanå¯¹è±¡å¹¶æ‰“å°æ§åˆ¶å°</p><h3 id=çŸ¥è¯†ç‚¹1bean>çŸ¥è¯†ç‚¹1ï¼š@Bean
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91bean></a></h3><table><thead><tr><th>åç§°</th><th>@Bean</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æ–¹æ³•æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®è¯¥æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºspringç®¡ç†çš„bean</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„id</td></tr></tbody></table><h3 id=çŸ¥è¯†ç‚¹2import>çŸ¥è¯†ç‚¹2ï¼š@Import
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b92import></a></h3><table><thead><tr><th>åç§°</th><th>@Import</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>å¯¼å…¥é…ç½®ç±»</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰å¯¼å…¥çš„é…ç½®ç±»ç±»åï¼Œ<br>å½“é…ç½®ç±»æœ‰å¤šä¸ªæ—¶ä½¿ç”¨æ•°ç»„æ ¼å¼ä¸€æ¬¡æ€§å¯¼å…¥å¤šä¸ªé…ç½®ç±»</td></tr></tbody></table><h3 id=æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº>æ³¨è§£å¼€å‘å®ç°ä¸ºç¬¬ä¸‰æ–¹beanæ³¨å…¥èµ„æº
<a class=header-anchor href=#%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e5%ae%9e%e7%8e%b0%e4%b8%ba%e7%ac%ac%e4%b8%89%e6%96%b9bean%e6%b3%a8%e5%85%a5%e8%b5%84%e6%ba%90></a></h3><p>åœ¨ä½¿ç”¨@Beanåˆ›å»ºbeanå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœæ–¹æ³•åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­éœ€è¦å…¶ä»–èµ„æºè¯¥æ€ä¹ˆåŠ?</p><p>è¿™äº›èµ„æºä¼šæœ‰ä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯<code>ç®€å•æ•°æ®ç±»å‹</code> å’Œ<code>å¼•ç”¨æ•°æ®ç±»å‹</code>ã€‚</p><h4 id=ç®€å•æ•°æ®ç±»å‹>ç®€å•æ•°æ®ç±»å‹
<a class=header-anchor href=#%e7%ae%80%e5%8d%95%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b></a></h4><h5 id=éœ€æ±‚åˆ†æ>éœ€æ±‚åˆ†æ
<a class=header-anchor href=#%e9%9c%80%e6%b1%82%e5%88%86%e6%9e%90></a></h5><p>å¯¹äºä¸‹é¢ä»£ç å…³äºæ•°æ®åº“çš„å››è¦ç´ ä¸åº”è¯¥å†™æ­»åœ¨ä»£ç ä¸­ï¼Œåº”è¯¥æ˜¯ä»propertiesé…ç½®æ–‡ä»¶ä¸­è¯»å–ã€‚å¦‚ä½•æ¥ä¼˜åŒ–ä¸‹é¢çš„ä»£ç ?</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤>æ³¨å…¥ç®€å•æ•°æ®ç±»å‹æ­¥éª¤
<a class=header-anchor href=#%e6%b3%a8%e5%85%a5%e7%ae%80%e5%8d%95%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e6%ad%a5%e9%aa%a4></a></h5><h6 id=æ­¥éª¤1ç±»ä¸­æä¾›å››ä¸ªå±æ€§>æ­¥éª¤1:ç±»ä¸­æä¾›å››ä¸ªå±æ€§
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e7%b1%bb%e4%b8%ad%e6%8f%90%e4%be%9b%e5%9b%9b%e4%b8%aa%e5%b1%9e%e6%80%a7></a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String driver<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String url<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤2ä½¿ç”¨valueæ³¨è§£å¼•å…¥å€¼>æ­¥éª¤2:ä½¿ç”¨<code>@Value</code>æ³¨è§£å¼•å…¥å€¼
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e4%bd%bf%e7%94%a8value%e6%b3%a8%e8%a7%a3%e5%bc%95%e5%85%a5%e5%80%bc></a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ä¸‹é¢çš„å››ä¸ªå±æ€§çš„æ³¨å…¥åº”è¯¥æ³¨å…¥å±æ€§æ–‡ä»¶ä¸­çš„å€¼ï¼Œä¸åº”è¯¥åœ¨è¿™é‡Œå†™æ­»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String driver<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String url<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;password&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span>driver<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span>url<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span>userName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span>password<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ä¸ºäº†é…ç½®æ•°æ®æºï¼Œéœ€è¦ç”¨åˆ°å››ä¸ªå±æ€§ï¼Œè¿™å››ä¸ªå±æ€§åº”è¯¥ä»å±æ€§æ–‡ä»¶ä¸­æ³¨å…¥ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li>é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª<code>PropertySource</code>æ³¨è§£ï¼ŒæŒ‡å®šå±æ€§æ–‡ä»¶çš„æ¥æº</li><li>ä½¿ç”¨å±æ€§æ–‡ä»¶çš„åœ°æ–¹ä½¿ç”¨<code>value</code>æ­é…<code>${}</code>æ³¨å…¥å±æ€§æ–‡ä»¶ä¸­çš„å€¼</li></ol></blockquote><h6 id=æ‰©å±•>æ‰©å±•
<a class=header-anchor href=#%e6%89%a9%e5%b1%95></a></h6><p>ç°åœ¨çš„æ•°æ®åº“è¿æ¥å››è¦ç´ è¿˜æ˜¯å†™åœ¨ä»£ç ä¸­ï¼Œéœ€è¦åšçš„æ˜¯å°†è¿™äº›å†…å®¹æ</p><p>å–åˆ°jdbc.propertiesé…ç½®æ–‡ä»¶ï¼Œå¤§å®¶æ€è€ƒä¸‹è¯¥å¦‚ä½•å®ç°?</p><blockquote><p>1.resourcesç›®å½•ä¸‹æ·»åŠ jdbc.properties</p><p>2.é…ç½®æ–‡ä»¶ä¸­æä¾›å››ä¸ªé”®å€¼å¯¹åˆ†åˆ«æ˜¯æ•°æ®åº“çš„å››è¦ç´ </p><p>3.ä½¿ç”¨@PropertySourceåŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶</p><p>4.ä¿®æ”¹@Valueæ³¨è§£å±æ€§çš„å€¼ï¼Œå°†å…¶ä¿®æ”¹ä¸º<code>${key}</code>ï¼Œkeyå°±æ˜¯é”®å€¼å¯¹ä¸­çš„é”®çš„å€¼</p></blockquote><p>å…·ä½“çš„å®ç°å°±äº¤ç”±å¤§å®¶è‡ªè¡Œå®ç°ä¸‹ã€‚</p><h4 id=å¼•ç”¨æ•°æ®ç±»å‹>å¼•ç”¨æ•°æ®ç±»å‹
<a class=header-anchor href=#%e5%bc%95%e7%94%a8%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b></a></h4><h5 id=éœ€æ±‚åˆ†æ-1>éœ€æ±‚åˆ†æ
<a class=header-anchor href=#%e9%9c%80%e6%b1%82%e5%88%86%e6%9e%90-1></a></h5><p>å‡è®¾åœ¨æ„å»ºDataSourceå¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°BookDaoå¯¹è±¡ï¼Œè¯¥å¦‚ä½•æŠŠBookDaoå¯¹è±¡æ³¨å…¥è¿›æ–¹æ³•å†…è®©å…¶ä½¿ç”¨å‘¢?&mdash;>ç›´æ¥å°†è¦æ³¨å…¥çš„å¼•ç”¨ç±»å‹å½“æˆ<strong>å½¢å‚</strong>å°±å¯ä»¥æ³¨å…¥</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤>æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹æ­¥éª¤
<a class=header-anchor href=#%e6%b3%a8%e5%85%a5%e5%bc%95%e7%94%a8%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e6%ad%a5%e9%aa%a4></a></h5><h6 id=æ­¥éª¤1åœ¨springconfigä¸­æ‰«æbookdao>æ­¥éª¤1:åœ¨SpringConfigä¸­æ‰«æBookDao
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%9c%a8springconfig%e4%b8%ad%e6%89%ab%e6%8f%8fbookdao></a></h6><p>æ‰«æçš„ç›®çš„æ˜¯è®©Springèƒ½ç®¡ç†åˆ°BookDao,ä¹Ÿå°±æ˜¯è¯´è¦è®©IOCå®¹å™¨ä¸­æœ‰ä¸€ä¸ªbookDaoå¯¹è±¡</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima.dao&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>({</span>JdbcConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=æ­¥éª¤2åœ¨jdbcconfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°>æ­¥éª¤2:åœ¨JdbcConfigç±»çš„æ–¹æ³•ä¸Šæ·»åŠ å‚æ•°
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%9c%a8jdbcconfig%e7%b1%bb%e7%9a%84%e6%96%b9%e6%b3%95%e4%b8%8a%e6%b7%bb%e5%8a%a0%e5%8f%82%e6%95%b0></a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//ä½¿ç”¨å½¢å‚æ³¨å…¥å¼•ç”¨ç±»å‹çš„bean
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(</span>BookDao bookDao<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bookDao<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span>driver<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span>url<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span>userName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span>password<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>å¼•ç”¨ç±»å‹æ³¨å…¥åªéœ€è¦ä¸ºbeanå®šä¹‰æ–¹æ³•è®¾ç½®å½¢å‚å³å¯ï¼Œå®¹å™¨ä¼šæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…å¯¹è±¡ã€‚</p></blockquote><h6 id=æ­¥éª¤3è¿è¡Œç¨‹åº-4>æ­¥éª¤3:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f-4></a></h6><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636437.png alt=1630125475609></p><h2 id=æ³¨è§£å¼€å‘æ€»ç»“>æ³¨è§£å¼€å‘æ€»ç»“
<a class=header-anchor href=#%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91%e6%80%bb%e7%bb%93></a></h2><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œæˆäº†XMLé…ç½®å’Œæ³¨è§£çš„å¼€å‘å®ç°ï¼Œè‡³äºä¸¤è€…ä¹‹é—´çš„å·®å¼‚ï¼Œå’±ä»¬æ”¾åœ¨ä¸€å—å»å¯¹æ¯”å›é¡¾ä¸‹:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636438.png alt=1630134786448></p><h2 id=springæ•´åˆ>Springæ•´åˆ
<a class=header-anchor href=#spring%e6%95%b4%e5%90%88></a></h2><p>è¯¾ç¨‹å­¦ä¹ åˆ°è¿™é‡Œï¼Œå·²ç»å¯¹Springæœ‰ä¸€ä¸ªç®€å•çš„è®¤è¯†äº†ï¼ŒSpringæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œå«åšIoCå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜beanã€‚åœ¨è¿›è¡Œä¼ä¸šçº§å¼€å‘çš„æ—¶å€™ï¼Œå…¶å®é™¤äº†å°†è‡ªå·±å†™çš„ç±»è®©Springç®¡ç†ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†é‡è¦çš„å·¥ä½œå°±æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ã€‚å‰é¢å·²ç»è®²äº†å¦‚ä½•ç®¡ç†ç¬¬ä¸‰æ–¹beanäº†ï¼Œä¸‹é¢ç»“åˆIoCå’ŒDIï¼Œæ•´åˆ2ä¸ªå¸¸ç”¨æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥åŠ æ·±å¯¹Springçš„ä½¿ç”¨ç†è§£ã€‚</p><h3 id=springæ•´åˆmybatisæ€è·¯åˆ†æ>Springæ•´åˆMybatisæ€è·¯åˆ†æ
<a class=header-anchor href=#spring%e6%95%b4%e5%90%88mybatis%e6%80%9d%e8%b7%af%e5%88%86%e6%9e%90></a></h3><h4 id=ç¯å¢ƒå‡†å¤‡-3>ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87-3></a></h4><p>åœ¨å‡†å¤‡ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å›é¡¾ä¸‹Mybatiså¼€å‘çš„ç›¸å…³å†…å®¹:</p><h5 id=æ­¥éª¤1å‡†å¤‡æ•°æ®åº“è¡¨>æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%87%86%e5%a4%87%e6%95%b0%e6%8d%ae%e5%ba%93%e8%a1%a8></a></h5><p>Mybatisæ˜¯æ¥æ“ä½œæ•°æ®åº“è¡¨ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“åŠè¡¨</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>database</span> spring_db character <span style=color:#66d9ef>set</span> utf8;
</span></span><span style=display:flex><span>use spring_db;
</span></span><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> tbl_account(
</span></span><span style=display:flex><span>    id int <span style=color:#66d9ef>primary</span> <span style=color:#66d9ef>key</span> auto_increment,
</span></span><span style=display:flex><span>    name varchar(<span style=color:#ae81ff>35</span>),
</span></span><span style=display:flex><span>    money double
</span></span><span style=display:flex><span>);
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…>æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae%e5%af%bc%e5%85%a5jar%e5%8c%85></a></h5><p>é¡¹ç›®çš„pom.xmlæ·»åŠ ç›¸å…³ä¾èµ–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-context<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>com.alibaba<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>druid<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>1.1.16<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>3.5.6<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>mysql<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>mysql-connector-java<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>5.1.47<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤3æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»>æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e6%a0%b9%e6%8d%ae%e8%a1%a8%e5%88%9b%e5%bb%ba%e6%a8%a1%e5%9e%8b%e7%b1%bb></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Account</span> <span style=color:#66d9ef>implements</span> Serializable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Integer id<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Double money<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//setter...getter...toString...æ–¹æ³•ç•¥    
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤4åˆ›å»ºdaoæ¥å£>æ­¥éª¤4:åˆ›å»ºDaoæ¥å£
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e5%88%9b%e5%bb%badao%e6%8e%a5%e5%8f%a3></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>AccountDao</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Insert</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;insert into tbl_account(name,money)values(#{name},#{money})&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Delete</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;delete from tbl_account where id = #{id} &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Update</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;update tbl_account set name = #{name} , money = #{money} where id = #{id} &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Select</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select * from tbl_account&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Account<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Select</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select * from tbl_account where id = #{id} &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    Account <span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤5åˆ›å»ºserviceæ¥å£å’Œå®ç°ç±»>æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a45%e5%88%9b%e5%bb%baservice%e6%8e%a5%e5%8f%a3%e5%92%8c%e5%ae%9e%e7%8e%b0%e7%b1%bb></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>AccountService</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Account<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Account <span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AccountServiceImpl</span> <span style=color:#66d9ef>implements</span> AccountService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> AccountDao accountDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>Account account<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>account<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Account <span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span>Integer id<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Account<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤6æ·»åŠ jdbcpropertiesæ–‡ä»¶>æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a46%e6%b7%bb%e5%8a%a0jdbcproperties%e6%96%87%e4%bb%b6></a></h5><p>resourcesç›®å½•ä¸‹æ·»åŠ ï¼Œç”¨äºé…ç½®æ•°æ®åº“è¿æ¥å››è¦ç´ </p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>jdbc.driver</span><span style=color:#f92672>=</span><span style=color:#e6db74>com.mysql.jdbc.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:mysql://localhost:3306/spring_db?useSSL=false</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jdbc.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>useSSL:å…³é—­MySQLçš„SSLè¿æ¥</p></blockquote><h5 id=æ­¥éª¤7æ·»åŠ mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶>æ­¥éª¤7:æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a47%e6%b7%bb%e5%8a%a0mybatis%e6%a0%b8%e5%bf%83%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e>        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--è¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;jdbc.properties&#34;</span><span style=color:#f92672>&gt;&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--åˆ«åæ‰«æçš„åŒ…è·¯å¾„--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;typeAliases&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;package</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.itheima.domain&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/typeAliases&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ•°æ®æº--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;environments</span> <span style=color:#a6e22e>default=</span><span style=color:#e6db74>&#34;mysql&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;environment</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;mysql&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;transactionManager</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;JDBC&#34;</span><span style=color:#f92672>&gt;&lt;/transactionManager&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;dataSource</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;POOLED&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driver&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.driver}&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.url}&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.username}&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${jdbc.password}&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/dataSource&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/environment&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/environments&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--æ˜ å°„æ–‡ä»¶æ‰«æåŒ…è·¯å¾„--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mappers&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;package</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.itheima.dao&#34;</span><span style=color:#f92672>&gt;&lt;/package&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/mappers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤8ç¼–å†™åº”ç”¨ç¨‹åº>æ­¥éª¤8:ç¼–å†™åº”ç”¨ç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a48%e7%bc%96%e5%86%99%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f></a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//æœ€ä¼ ç»Ÿçš„æ–¹å¼æ•´åˆmybatis
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBuilder<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 2. åŠ è½½SqlMapConfig.xmlé…ç½®æ–‡ä»¶
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        InputStream inputStream <span style=color:#f92672>=</span> Resources<span style=color:#f92672>.</span><span style=color:#a6e22e>getResourceAsStream</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;SqlMapConfig.xml.bak&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 3. åˆ›å»ºSqlSessionFactoryå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SqlSessionFactory sqlSessionFactory <span style=color:#f92672>=</span> sqlSessionFactoryBuilder<span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>(</span>inputStream<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 4. è·å–SqlSession
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SqlSession sqlSession <span style=color:#f92672>=</span> sqlSessionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 5. æ‰§è¡ŒSqlSessionå¯¹è±¡æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–ç»“æœUser
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        AccountDao accountDao <span style=color:#f92672>=</span> sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>getMapper</span><span style=color:#f92672>(</span>AccountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Account ac <span style=color:#f92672>=</span> accountDao<span style=color:#f92672>.</span><span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>ac<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 6. é‡Šæ”¾èµ„æº
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤9è¿è¡Œç¨‹åº>æ­¥éª¤9:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a49%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f></a></h5><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636439.png alt=1630136904087></p><h4 id=æ•´åˆæ€è·¯åˆ†æ>æ•´åˆæ€è·¯åˆ†æ
<a class=header-anchor href=#%e6%95%b4%e5%90%88%e6%80%9d%e8%b7%af%e5%88%86%e6%9e%90></a></h4><p>Mybatisçš„åŸºç¡€ç¯å¢ƒæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±å¾—åˆ†æä¸‹åœ¨ä¸Šè¿°çš„å†…å®¹ä¸­ï¼Œå“ªäº›å¯¹è±¡å¯ä»¥äº¤ç»™Springæ¥ç®¡ç†?</p><ul><li><p>Mybatisç¨‹åºæ ¸å¿ƒå¯¹è±¡åˆ†æ</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636440.png alt=1630137189480></p><p>ä»å›¾ä¸­å¯ä»¥è·å–åˆ°ï¼ŒçœŸæ­£éœ€è¦äº¤ç»™Springç®¡ç†çš„æ˜¯<strong>SqlSessionFactory</strong>ï¼Œç®¡ç†ä¹‹åå°±å¯ä»¥è‡ªåŠ¨å¾—åˆ°ä¸€ä¸ª<code>sqlsession</code>å¯¹è±¡</p></li><li><p>æ•´åˆMybatisï¼Œå°±æ˜¯å°†Mybatisç”¨åˆ°çš„å†…å®¹äº¤ç»™Springç®¡ç†ï¼Œåˆ†æä¸‹é…ç½®æ–‡ä»¶</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636441.png alt=1630137388717></p><p><strong>è¯´æ˜:</strong></p><ul><li>ç¬¬ä¸€è¡Œè¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ï¼ŒSpringæœ‰æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆ<code>@PropertySource</code>,éœ€è¦äº¤ç»™Spring</li><li>ç¬¬äºŒè¡Œèµ·åˆ«ååŒ…æ‰«æï¼Œä¸ºSqlSessionFactoryæœåŠ¡çš„ï¼Œéœ€è¦äº¤ç»™Spring</li><li>ç¬¬ä¸‰è¡Œä¸»è¦ç”¨äºåšè¿æ¥æ± ï¼ŒSpringä¹‹å‰æˆ‘ä»¬å·²ç»æ•´åˆäº†Druidè¿æ¥æ± ï¼Œè¿™å—ä¹Ÿéœ€è¦äº¤ç»™Spring</li><li>å‰é¢ä¸‰è¡Œä¸€èµ·éƒ½æ˜¯ä¸ºäº†åˆ›å»ºSqlSessionå¯¹è±¡ç”¨çš„ï¼Œé‚£ä¹ˆç”¨Springç®¡ç†SqlSessionå¯¹è±¡å—?å›å¿†ä¸‹SqlSessionæ˜¯ç”±SqlSessionFactoryåˆ›å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥åªéœ€è¦å°†SqlSessionFactoryäº¤ç»™Springç®¡ç†å³å¯ã€‚</li><li>ç¬¬å››è¡Œæ˜¯Mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶[å¦‚æœä½¿ç”¨æ³¨è§£å°±æ²¡æœ‰è¯¥æ˜ å°„æ–‡ä»¶]ï¼Œè¿™ä¸ªæ˜¯åœ¨è·å–åˆ°SqlSessionä»¥åæ‰§è¡Œå…·ä½“æ“ä½œçš„æ—¶å€™ç”¨ï¼Œæ‰€ä»¥å®ƒå’ŒSqlSessionFactoryåˆ›å»ºçš„æ—¶æœºéƒ½ä¸åœ¨åŒä¸€ä¸ªæ—¶é—´ï¼Œå¯èƒ½éœ€è¦å•ç‹¬ç®¡ç†ã€‚</li></ul></li></ul><h3 id=springæ•´åˆmybatis>Springæ•´åˆMybatis
<a class=header-anchor href=#spring%e6%95%b4%e5%90%88mybatis></a></h3><p>å‰é¢æˆ‘ä»¬å·²ç»åˆ†æäº†Springä¸Mybatisçš„æ•´åˆï¼Œå¤§ä½“éœ€è¦åšä¸¤ä»¶äº‹ï¼Œ</p><p>ç¬¬ä¸€ä»¶äº‹æ˜¯:Springè¦ç®¡ç†MyBatisä¸­çš„SqlSessionFactory</p><p>ç¬¬äºŒä»¶äº‹æ˜¯:Springè¦ç®¡ç†Mapperæ¥å£çš„æ‰«æ</p><p>å…·ä½“è¯¥å¦‚ä½•å®ç°ï¼Œå…·ä½“çš„æ­¥éª¤ä¸º:</p><h4 id=æ­¥éª¤1é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…>æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e9%a1%b9%e7%9b%ae%e4%b8%ad%e5%af%bc%e5%85%a5%e6%95%b4%e5%90%88%e9%9c%80%e8%a6%81%e7%9a%84jar%e5%8c%85></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--Springæ“ä½œæ•°æ®åº“éœ€è¦è¯¥jaråŒ…--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-jdbc<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>		Springä¸Mybatisæ•´åˆçš„jaråŒ…
</span></span></span><span style=display:flex><span><span style=color:#75715e>		è¿™ä¸ªjaråŒ…mybatisåœ¨å‰é¢ï¼Œæ˜¯Mybatisæä¾›çš„
</span></span></span><span style=display:flex><span><span style=color:#75715e>	--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis-spring<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.3.0<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åˆ›å»ºspringçš„ä¸»é…ç½®ç±»>æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e5%88%9b%e5%bb%baspring%e7%9a%84%e4%b8%bb%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//é…ç½®ç±»æ³¨è§£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//åŒ…æ‰«æï¼Œä¸»è¦æ‰«æçš„æ˜¯é¡¹ç›®ä¸­çš„AccountServiceImplç±»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»>æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a43%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e6%ba%90%e7%9a%84%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h4><p>åœ¨é…ç½®ç±»ä¸­å®Œæˆæ•°æ®æºçš„åˆ›å»º</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JdbcConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ç®€å•ç±»å‹çš„æ³¨å…¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${jdbc.driver}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String driver<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${jdbc.url}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String url<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${jdbc.username}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${jdbc.password}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DataSource <span style=color:#a6e22e>dataSource</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        DruidDataSource ds <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DruidDataSource<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setDriverClassName</span><span style=color:#f92672>(</span>driver<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUrl</span><span style=color:#f92672>(</span>url<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setUsername</span><span style=color:#f92672>(</span>userName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ds<span style=color:#f92672>.</span><span style=color:#a6e22e>setPassword</span><span style=color:#f92672>(</span>password<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ds<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤4ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»>æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a44%e4%b8%bb%e9%85%8d%e7%bd%ae%e7%b1%bb%e4%b8%ad%e8%af%bbproperties%e5%b9%b6%e5%bc%95%e5%85%a5%e6%95%b0%e6%8d%ae%e6%ba%90%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;classpath:jdbc.properties&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>(</span>JdbcConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤5åˆ›å»ºmybatisé…ç½®ç±»å¹¶é…ç½®sqlsessionfactory>æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a45%e5%88%9b%e5%bb%bamybatis%e9%85%8d%e7%bd%ae%e7%b1%bb%e5%b9%b6%e9%85%8d%e7%bd%aesqlsessionfactory></a></h4><p>ä¸»è¦æ˜¯éœ€è¦å®šä¹‰ä¸¤ä¸ªbeanæ¥åˆ›å»ºsqlsessionå’Œ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MybatisConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//å®šä¹‰beanï¼ŒSqlSessionFactoryBeanï¼Œç”¨äºäº§ç”ŸSqlSessionFactoryå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> SqlSessionFactoryBean <span style=color:#a6e22e>sqlSessionFactory</span><span style=color:#f92672>(</span>DataSource dataSource<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        SqlSessionFactoryBean ssfb <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBean<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è®¾ç½®æ¨¡å‹ç±»çš„åˆ«åæ‰«æï¼Œæ˜ å°„æŸ¥è¯¢ç»“æœå°è£…ç±»åœ¨å“ªä¸ªåŒ…
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ssfb<span style=color:#f92672>.</span><span style=color:#a6e22e>setTypeAliasesPackage</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima.domain&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è®¾ç½®æ•°æ®æº
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ssfb<span style=color:#f92672>.</span><span style=color:#a6e22e>setDataSource</span><span style=color:#f92672>(</span>dataSource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ssfb<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//å®šä¹‰beanï¼Œè¿”å›MapperScannerConfigurerå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> MapperScannerConfigurer <span style=color:#a6e22e>mapperScannerConfigurer</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        MapperScannerConfigurer msc <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MapperScannerConfigurer<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//æ˜ å°„æœ€ç»ˆçš„sqlæ–‡ä»¶åœ¨å“ªä¸ªåŒ…ä¸­
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        msc<span style=color:#f92672>.</span><span style=color:#a6e22e>setBasePackage</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima.dao&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> msc<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è¯´æ˜:</strong></p><ul><li><p>ä½¿ç”¨SqlSessionFactoryBeanå°è£…SqlSessionFactoryéœ€è¦çš„ç¯å¢ƒä¿¡æ¯</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636442.png alt=1630138835057></p><ul><li>SqlSessionFactoryBeanæ˜¯å‰é¢æˆ‘ä»¬è®²è§£FactoryBeançš„ä¸€ä¸ªå­ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å°†SqlSessionFactoryçš„åˆ›å»ºè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–å¯¹è±¡çš„åˆ›å»ºï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶éœ€è¦çš„å†…å®¹è®¾ç½®å³å¯ã€‚</li><li>æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå‚æ•°ä¸ºdataSource,å½“å‰Springå®¹å™¨ä¸­å·²ç»åˆ›å»ºäº†Druidæ•°æ®æºï¼Œç±»å‹åˆšå¥½æ˜¯DataSourceç±»å‹ï¼Œæ­¤æ—¶åœ¨åˆå§‹åŒ–SqlSessionFactoryBeanè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå‘ç°éœ€è¦ä½¿ç”¨DataSourceå¯¹è±¡ï¼Œè€Œå®¹å™¨ä¸­åˆšå¥½æœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼Œå°±è‡ªåŠ¨åŠ è½½äº†DruidDataSourceå¯¹è±¡ã€‚</li></ul></li><li><p>ä½¿ç”¨MapperScannerConfigureråŠ è½½Daoæ¥å£ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ä¿å­˜åˆ°IOCå®¹å™¨ä¸­</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636443.png alt=1630138916939></p><ul><li>è¿™ä¸ªMapperScannerConfigurerå¯¹è±¡ä¹Ÿæ˜¯MyBatisæä¾›çš„ä¸“ç”¨äºæ•´åˆçš„jaråŒ…ä¸­çš„ç±»ï¼Œç”¨æ¥å¤„ç†åŸå§‹é…ç½®æ–‡ä»¶ä¸­çš„mappersç›¸å…³é…ç½®ï¼ŒåŠ è½½æ•°æ®å±‚çš„Mapperæ¥å£ç±»</li><li>MapperScannerConfigureræœ‰ä¸€ä¸ªæ ¸å¿ƒå±æ€§basePackageï¼Œå°±æ˜¯ç”¨æ¥è®¾ç½®æ‰€æ‰«æçš„åŒ…è·¯å¾„</li></ul></li></ul><h4 id=æ­¥éª¤6ä¸»é…ç½®ç±»ä¸­å¼•å…¥mybatisé…ç½®ç±»>æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a46%e4%b8%bb%e9%85%8d%e7%bd%ae%e7%b1%bb%e4%b8%ad%e5%bc%95%e5%85%a5mybatis%e9%85%8d%e7%bd%ae%e7%b1%bb></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.itheima&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;classpath:jdbc.properties&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Import</span><span style=color:#f92672>({</span>JdbcConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span>MybatisConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤7ç¼–å†™è¿è¡Œç±»>æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a47%e7%bc%96%e5%86%99%e8%bf%90%e8%a1%8c%e7%b1%bb></a></h4><p>åœ¨è¿è¡Œç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–Serviceå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•è·å–ç»“æœ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App2</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>SpringConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        AccountService accountService <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>AccountService<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Account ac <span style=color:#f92672>=</span> accountService<span style=color:#f92672>.</span><span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>ac<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤8è¿è¡Œç¨‹åº>æ­¥éª¤8:è¿è¡Œç¨‹åº
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a48%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f></a></h4><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636444.png alt=1630139036627></p><p>æ”¯æŒSpringä¸Mybatisçš„æ•´åˆå°±å·²ç»å®Œæˆäº†ï¼Œå…¶ä¸­ä¸»è¦ç”¨åˆ°çš„ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯:</p><ul><li><p>SqlSessionFactoryBean</p></li><li><p>MapperScannerConfigurer</p><blockquote><p>ç›¸å½“äºå…ˆé…ç½®åº•å±‚çš„æ•°æ®æºé…ç½®ï¼Œä¹Ÿå°±æ˜¯JdbcConfigè¿™ä¸ªç±»ï¼Œä¹‹åå†é…ç½®MybatisConfigè¿™ä¸ªç±»ï¼Œåœ¨MybatisConfigè¿™ä¸ªç±»ä¸­æŒ‡å®šäº†åº•å±‚çš„æ•°æ®æºï¼ŒæŒ‡å®šäº†æŸ¥è¯¢ç»“æœçš„å°è£…ç±»åœ¨å“ªä¸ªåŒ…ï¼ŒæŸ¥è¯¢çš„sqlè¯­å¥ä»£ç åœ¨å“ªä¸ªåŒ…ï¼Œå¹¶ä¸”åˆ›å»ºäº†ä¸¤ä¸ªbeanï¼Œå°†å…¶äº¤ç»™äº†IOCå®¹å™¨</p></blockquote></li></ul><h3 id=springæ•´åˆjunit>Springæ•´åˆJunit
<a class=header-anchor href=#spring%e6%95%b4%e5%90%88junit></a></h3><p>æ•´åˆJunitä¸æ•´åˆDruidå’ŒMyBatiså·®å¼‚æ¯”è¾ƒå¤§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼ŸJunitæ˜¯ä¸€ä¸ªæå•å…ƒæµ‹è¯•ç”¨çš„å·¥å…·ï¼Œå®ƒä¸æ˜¯æˆ‘ä»¬ç¨‹åºçš„ä¸»ä½“ï¼Œä¹Ÿä¸ä¼šå‚åŠ æœ€ç»ˆç¨‹åºçš„è¿è¡Œï¼Œä»ä½œç”¨ä¸Šæ¥è¯´å°±å’Œä¹‹å‰çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯åšåŠŸèƒ½çš„ï¼Œçœ‹åšæ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·å°±å¯ä»¥äº†ã€‚</p><blockquote><p>springè¿™ä¸ªå’Œjunitä¸ç”¨ç¼–å†™é…ç½®ç±»ï¼Œç›´æ¥åœ¨æµ‹è¯•ç±»ä½¿ç”¨æ³¨è§£ä¸Šå¼•å…¥junitå³å¯</p></blockquote><h4 id=ç¯å¢ƒå‡†å¤‡-4>ç¯å¢ƒå‡†å¤‡
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87-4></a></h4><p>è¿™å—ç¯å¢ƒï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨Springä¸Mybatisæ•´åˆçš„ç¯å¢ƒå³å¯ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é‡æ–°åˆ›å»ºä¸€ä¸ªï¼Œå› ä¸ºå†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸‹é¡¹ç›®ç»“æ„å³å¯:</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202310281636445.png alt=1630139720273></p><h4 id=æ•´åˆjunitæ­¥éª¤>æ•´åˆJunitæ­¥éª¤
<a class=header-anchor href=#%e6%95%b4%e5%90%88junit%e6%ad%a5%e9%aa%a4></a></h4><p>åœ¨ä¸Šè¿°ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥å¯¹Junitè¿›è¡Œæ•´åˆã€‚</p><h5 id=æ­¥éª¤1å¼•å…¥ä¾èµ–>æ­¥éª¤1:å¼•å…¥ä¾èµ–
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a41%e5%bc%95%e5%85%a5%e4%be%9d%e8%b5%96></a></h5><p>pom.xml</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>junit<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>junit<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>4.12<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;scope&gt;</span>test<span style=color:#f92672>&lt;/scope&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-test<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>5.2.10.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æ­¥éª¤2ç¼–å†™æµ‹è¯•ç±»>æ­¥éª¤2:ç¼–å†™æµ‹è¯•ç±»
<a class=header-anchor href=#%e6%ad%a5%e9%aa%a42%e7%bc%96%e5%86%99%e6%b5%8b%e8%af%95%e7%b1%bb></a></h5><p>åœ¨test\javaä¸‹åˆ›å»ºä¸€ä¸ªAccountServiceTest,è¿™ä¸ªåå­—ä»»æ„</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//è®¾ç½®ç±»è¿è¡Œå™¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@RunWith</span><span style=color:#f92672>(</span>SpringJUnit4ClassRunner<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//è®¾ç½®Springç¯å¢ƒå¯¹åº”çš„é…ç½®ç±»ï¼Œä¹Ÿå°±æ˜¯è®©æµ‹è¯•ç±»çŸ¥é“æ•´ä¸ªé¡¹ç›®çš„é¢è²Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@ContextConfiguration</span><span style=color:#f92672>(</span>classes <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>SpringConfiguration<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>})</span> <span style=color:#75715e>//åŠ è½½é…ç½®ç±»
</span></span></span><span style=display:flex><span><span style=color:#75715e>//@ContextConfiguration(locations={&#34;classpath:applicationContext.xml&#34;})//åŠ è½½é…ç½®æ–‡ä»¶
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AccountServiceTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//æ”¯æŒè‡ªåŠ¨è£…é…æ³¨å…¥bean
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> AccountService accountService<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFindById</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>accountService<span style=color:#f92672>.</span><span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFindAll</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>accountService<span style=color:#f92672>.</span><span style=color:#a6e22e>findAll</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„:</strong></p><ul><li>å•å…ƒæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•çš„æ˜¯æ³¨è§£<strong>é…ç½®ç±»</strong>ï¼ˆçº¯æ³¨è§£å¼€å‘ï¼‰ï¼Œåˆ™ä½¿ç”¨<code>@ContextConfiguration(classes = é…ç½®ç±».class)</code></li><li>å•å…ƒæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•çš„æ˜¯<strong>é…ç½®æ–‡ä»¶</strong>ï¼ˆä¸æ˜¯çº¯æ³¨è§£å¼€å‘ï¼‰ï¼Œåˆ™ä½¿ç”¨<code>@ContextConfiguration(locations={é…ç½®æ–‡ä»¶å,...})</code></li><li>Junitè¿è¡Œåæ˜¯åŸºäºSpringç¯å¢ƒè¿è¡Œçš„ï¼Œæ‰€ä»¥Springæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„ç±»è¿è¡Œå™¨ï¼Œè¿™ä¸ªåŠ¡å¿…è¦è®¾ç½®ï¼Œè¿™ä¸ªç±»è¿è¡Œå™¨å°±åœ¨Springçš„æµ‹è¯•ä¸“ç”¨åŒ…ä¸­æä¾›çš„ï¼Œå¯¼å…¥çš„åæ ‡å°±æ˜¯è¿™ä¸ªä¸œè¥¿<code>SpringJUnit4ClassRunner</code></li><li>ä¸Šé¢ä¸¤ä¸ªé…ç½®éƒ½æ˜¯å›ºå®šæ ¼å¼ï¼Œå½“éœ€è¦æµ‹è¯•å“ªä¸ªbeanæ—¶ï¼Œä½¿ç”¨è‡ªåŠ¨è£…é…åŠ è½½å¯¹åº”çš„å¯¹è±¡ï¼Œä¸‹é¢çš„å·¥ä½œå°±å’Œä»¥å‰åšJunitå•å…ƒæµ‹è¯•å®Œå…¨ä¸€æ ·äº†</li></ul><h4 id=çŸ¥è¯†ç‚¹1runwith>çŸ¥è¯†ç‚¹1ï¼š@RunWith
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b91runwith></a></h4><table><thead><tr><th>åç§°</th><th>@RunWith</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æµ‹è¯•ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®JUnitè¿è¡Œå™¨</td></tr><tr><td>å±æ€§</td><td>valueï¼ˆé»˜è®¤ï¼‰ï¼šè¿è¡Œæ‰€ä½¿ç”¨çš„è¿è¡ŒæœŸ</td></tr></tbody></table><h4 id=çŸ¥è¯†ç‚¹2contextconfiguration>çŸ¥è¯†ç‚¹2ï¼š@ContextConfiguration
<a class=header-anchor href=#%e7%9f%a5%e8%af%86%e7%82%b92contextconfiguration></a></h4><table><thead><tr><th>åç§°</th><th>@ContextConfiguration</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>æµ‹è¯•ç±»æ³¨è§£</td></tr><tr><td>ä½ç½®</td><td>æµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®JUnitåŠ è½½çš„Springæ ¸å¿ƒé…ç½®</td></tr><tr><td>å±æ€§</td><td>classesï¼šæ ¸å¿ƒé…ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ ¼å¼è®¾å®šåŠ è½½å¤šä¸ªé…ç½®ç±»<br>locations:é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ ¼å¼è®¾å®šåŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶åç§°</td></tr></tbody></table></div><footer class=post-footer><div class=post-tags><a href=/tags/spring>spring</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/22.%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/ rel=next title=22.æ‹¬å·ç”Ÿæˆ><i class="fa fa-chevron-left"></i> 22.æ‹¬å·ç”Ÿæˆ</a></div><div class="post-nav-prev post-nav-item"><a href=/post/208.%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%BC%80%E6%A0%91/ rel=prev title=208.å®ç°å‰ç¼€æ ‘>208.å®ç°å‰ç¼€æ ‘
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2024</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>zzziæä¾›æŠ€æœ¯æ”¯æŒ</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zzzicode.github.io/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"è¯·æ–‡æ˜å‘è¨€å“Ÿ ãƒ¾(â‰§â–½â‰¦*)o","reaction":true,"reactiontext":["ç‚¹èµ","è¸©ä¸€ä¸‹","å¾—æ„","ä¸å±‘","å°´å°¬","ç¡è§‰"],"reactiontitle":"ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"å¿«æ¥å‘è¡¨ä½ çš„æ„è§å§ (â‰§âˆ€â‰¦)ã‚","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.b0e26367f0461fb41ac6f947dc2af3620375dc44aa8945e6c2b1480d342c65d1.js defer></script>
<script type=text/javascript src=/js/math.min.a6ada19a368d85dad9ead2040d86ae561a867fafef89391d1aa2aa5909366509.js defer></script></body></html>