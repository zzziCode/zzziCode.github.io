<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.111.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon_next.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon_next.png><meta itemprop=name content="Small_spring13"><meta itemprop=description content="small_spring13"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zzzicode.github.io/imgs/avatar.png"><meta itemprop=keywords content="spring,æºç "><meta property="og:type" content="article"><meta property="og:title" content="Small_spring13"><meta property="og:description" content="small_spring13"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zzzicode.github.io/post/small_spring13/"><meta property="og:site_name" content="zzziçš„å°ç«™"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="zzzi"><meta property="article:published_time" content="2023-11-13 09:43:01 +0800 CST"><meta property="article:modified_time" content="2023-11-13 09:43:01 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4b7f3d9c4ef8db1505229a7dcd2c4e3ab17cd4960dd8a78b503c013770ad56a6.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"math":{"js":{"file":"es5/tex-mml-chtml.js","name":"mathjax","version":"3.2.0"},"render":"mathjax"},"path":"small_spring13","permalink":"https://zzzicode.github.io/post/small_spring13/","title":"Small_spring13"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Small_spring13 - zzziçš„å°ç«™</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>zzziçš„å°ç«™</h1><i class=logo-line></i></a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£
<span class=badge>217</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#åŸå› >åŸå› </a></li><li><a href=#æ€è·¯>æ€è·¯</a><ul><li><a href=#ç±»çš„å˜åŒ–>ç±»çš„å˜åŒ–</a><ul><li><a href=#æ–°å¢çš„ç±»>æ–°å¢çš„ç±»</a></li><li><a href=#ä¿®æ”¹çš„ç±»>ä¿®æ”¹çš„ç±»</a></li></ul></li><li><a href=#beançš„åˆ›å»ºå’Œè·å–>beançš„åˆ›å»ºå’Œè·å–</a></li></ul></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=zzzi src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>zzzi</p><div class=site-description itemprop=description>make_tuple("å·¥ä½œ","è®ºæ–‡")</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>217</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>5</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>46</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zzziCode title="Github â†’ https://github.com/zzziCode" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>å‡¡æ¢¦æ˜Ÿå°˜</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zzzicode.github.io/post/small_spring13/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="zzzi"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="zzzi"><meta itemprop=description content="make_tuple(&#34;å·¥ä½œ&#34;,&#34;è®ºæ–‡&#34;)"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Small_spring13"><meta itemprop=description content="small_spring13"></span><header class=post-header><h1 class=post-title itemprop="name headline">Small_spring13</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š</span>
<time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-13 09:43:01 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-11-13 09:43:01 +0800 CST">2023-11-13</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title=åˆ†ç±»äº>åˆ†ç±»äºï¼š</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0 itemprop=url rel=index><span itemprop=name>å­¦ä¹ ç¬”è®°</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=å­—æ•°><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>å­—æ•°ï¼š</span>
<span>5218</span></span>
<span class=post-meta-item title=é˜…è¯»><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>é˜…è¯»ï¼š&ap;</span>
<span>11åˆ†é’Ÿ</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><blockquote><p>ğŸŒ¶ï¸ small_spring13</p></blockquote><p>â€‹ ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸­beançš„æ³¨å†Œæ–¹å¼ï¼šåŒ…æ‰«æ+<code>@Component</code>æ³¨è§£ã€‚è¿™ç§æ–¹å¼å®ç°äº†åªç”¨æŒ‡å®šæ‰«æå“ªäº›åŒ…ï¼Œç¨‹åºè‡ªåŠ¨å°†è¿™äº›åŒ…ä¸‹ä½¿ç”¨äº†<code>@Component</code>æ³¨è§£çš„beanæ³¨å†Œåˆ°æ³¨å†Œè¡¨ä¸­ï¼ŒåŒæ—¶beanè¿˜å¯ä»¥ä½¿ç”¨äº†å ä½ç¬¦çš„å½¢å¼ä»å±æ€§æ–‡ä»¶ä¸­è¯»å–å±æ€§å€¼æ¥å¡«å……ï¼Œä½†æ˜¯è¿™ä¸¤éƒ¨åˆ†æ˜¯åˆ†å¼€çš„ï¼Œæ‰€ä»¥æœ¬èŠ‚ä¸­åœ¨beanè‡ªåŠ¨æ³¨å†Œè¿‡ç¨‹ä¸­å¼•å…¥äº†æ³¨è§£è¿›è¡Œå±æ€§æ³¨å…¥çš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨<code>@Value</code>æ³¨è§£å¯ä»¥æ³¨å…¥æ™®é€šå±æ€§ï¼Œä½¿ç”¨<code>@Autowired</code>å’Œ<code>@Qualifier</code>æ³¨è§£æ³¨å…¥beanå¯¹è±¡ï¼Œç›¸å…³çš„ä»£ç æˆ‘æ”¾åˆ°äº†
<a href=https://github.com/zzziCode/small-spring title=ä»“åº“ rel="noopener external nofollow noreferrer" target=_blank class=exturl>ä»“åº“
<i class="fa fa-external-link-alt"></i>
</a>ä¸­</p><h2 id=åŸå› >åŸå› 
<a class=header-anchor href=#%e5%8e%9f%e5%9b%a0></a></h2><p>â€‹ ä¸ŠèŠ‚ä¸­å®ç°äº†beançš„è‡ªåŠ¨æ‰«ææ³¨å†Œä»¥åŠå ä½ç¬¦å½¢å¼æ³¨å…¥beançš„å±æ€§ï¼Œä½†æ˜¯è¿™ä¸¤éƒ¨åˆ†æ˜¯åˆ†å¼€å¤„ç†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œbeançš„è‡ªåŠ¨æ‰«ææ³¨å†Œçš„è¿‡ç¨‹ä¸­æ²¡æœ‰å¼•å…¥ä»»ä½•å±æ€§ï¼Œæ³¨å†Œè¡¨å­˜å‚¨çš„<code>BeanDefinition</code>ä¸­çš„å±æ€§åˆ—è¡¨<code>PropertyValues</code>éƒ¨åˆ†æ²¡æœ‰åœ¨xmlæ–‡ä»¶ä¸­é…ç½®çš„å±æ€§ä¸ºç©ºï¼Œæ‰€ä»¥æœ¬èŠ‚ä¸­åœ¨beançš„è‡ªåŠ¨æ‰«ææ³¨å†Œçš„è¿‡ç¨‹ä¸­å¼•å…¥äº†å±æ€§å¡«å……çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œå±æ€§å¡«å……ï¼ŒåŠ å…¥çš„æ¨¡å—å…³ç³»å¦‚ä¸‹å›¾ï¼š</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131054285.png alt=img style=zoom:67%><p>ä¸»è¦æ˜¯åœ¨<code>refresh</code>å‡½æ•°ä¸­è¿›è¡Œå±æ€§å ä½ç¬¦çš„æ›¿æ¢ï¼Œç„¶ååœ¨ç©ºbeanåˆ›å»ºä¹‹åï¼Œå±æ€§å¡«å……ä¹‹å‰å°†å±æ€§åˆ—è¡¨æ„é€ å¥½ç›´æ¥å¡«å……ï¼Œç„¶ååœ¨å±æ€§å¡«å……æ—¶åªéœ€è¦å¡«å……xmlæ–‡ä»¶ä¸­é…ç½®çš„beanå±æ€§</p><h2 id=æ€è·¯>æ€è·¯
<a class=header-anchor href=#%e6%80%9d%e8%b7%af></a></h2><p>â€‹ ä¸ºäº†åœ¨è‡ªåŠ¨æ‰«ææ³¨å†Œä¹‹åå¼•å…¥æ³¨è§£å±æ€§å¡«å……çš„åŠŸèƒ½ï¼Œè‚¯å®šéœ€è¦åœ¨beançš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œæ”¹é€ ï¼Œæœ¬èŠ‚ä¸­ä¸ºäº†å¼•å…¥æ³¨è§£å±æ€§å¡«å……çš„åŠŸèƒ½ï¼Œéœ€è¦åœ¨ç©ºbeanåˆ›å»ºä¹‹åï¼Œå±æ€§å¡«å……ä¹‹å‰æ‰§è¡Œæ³¨è§£å±æ€§å¡«å……çš„åŠŸèƒ½ï¼Œä»è€ŒåŠ è½½é€šè¿‡æ³¨è§£é…ç½®çš„å±æ€§æ¥è¿›è¡Œå¡«å……ï¼Œä¹‹åå†è¿›è¡Œæ­£å¸¸çš„xmlé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å¡«å……ã€‚åœ¨xmlæ–‡ä»¶è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦é…ç½®äº†åŒ…æ‰«æè·¯å¾„ï¼Œæ­¤æ—¶å°±ä¼šæ‰§è¡Œbeançš„è‡ªåŠ¨æ‰«ææ³¨å†Œï¼Œæ³¨å†Œè¡¨ä¸­beançš„<code>BeanDefinition</code>ä¸­çš„<code>PropertyValues</code>ä¸ºç©ºï¼Œä¹‹åå†è¯»å–xmlé…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ­¤æ—¶è¿˜é…ç½®äº†beanï¼Œå°±ä¼šè¯»å–ä¸€ä»½æ–°çš„<code>PropertyValues</code>ï¼Œå°†å…¶å­˜å…¥æ³¨å†Œè¡¨ä¸­æ—¶ä¼šæ›´æ–°æ³¨å†Œè¡¨ï¼Œä»è€Œæ­¤æ—¶çš„beançš„<code>BeanDefinition</code>å­˜å‚¨äº†ä¸¤éƒ¨åˆ†æ•°æ®ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯xmlç›´æ¥é…ç½®çš„å±æ€§ï¼Œä¸ä¸ºç©ºï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯ä½¿ç”¨æ³¨è§£é…ç½®çš„å±æ€§ï¼Œä¸ºç©ºã€‚</p><p>â€‹ ä¸‹é¢çš„æ­¥éª¤å°±æ˜¯å°†æ‰§è¡Œå ä½ç¬¦æ›¿æ¢ï¼Œå¦‚æœxmlé…ç½®å±æ€§çš„è¿‡ç¨‹ä¸­å­˜åœ¨å ä½ç¬¦ï¼Œå°±åœ¨è¿™ä¸€æ­¥è¿›è¡Œæ›¿æ¢ï¼Œç„¶åå°±æ˜¯ç©ºbeançš„åˆ›å»ºï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ³¨è§£å±æ€§å¡«å……çš„éƒ¨åˆ†ï¼Œæ ¹æ®æ³¨è§£ä¸­é…ç½®çš„å±æ€§ç›´æ¥å¡«å……ç©ºbeanä¸­çš„å±æ€§ï¼Œè¿™ä¸€æ­¥è¡¥å…¨äº†ä¸Šé¢è¯´çš„<code>BeanDefinition</code>ä¸­çš„ç¬¬äºŒéƒ¨åˆ†ä¸ºç©ºçš„å±æ€§ï¼Œä¸‹æ¥å°±æ˜¯æ­£å¸¸çš„å±æ€§å¡«å……ï¼Œè¿™ä¸€æ­¥åˆ©ç”¨ä¸Šé¢æ‰€è¯´çš„<code>BeanDefinition</code>ä¸­çš„ç¬¬ä¸€éƒ¨åˆ†ä¸ä¸ºç©ºçš„å±æ€§è¿›è¡Œå¡«å……ã€‚ç»è¿‡è¿™ä¸€æ­¥ä¹‹åï¼Œbeançš„åˆ›å»ºå°±å®Œæˆäº†ï¼Œä¹‹åå®Œæˆä¸€äº›å‰©ä¸‹çš„æ­¥éª¤ï¼Œå°±å¯ä»¥è·å–beanæ‰§è¡Œä¸€äº›ä¸šåŠ¡äº†ã€‚ä¸‹é¢åˆ†æ­¥éª¤ä»‹ç»æ³¨è§£å±æ€§å¡«å……çš„å¼•å…¥æµç¨‹ï¼š</p><ol><li>åŠ è½½xmlé…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œå°†åŒ…æ‰«æè·¯å¾„ä¸‹çš„æ‰€æœ‰beanåŠ å…¥æ³¨å†Œè¡¨ï¼ŒåŒæ—¶å°†æ³¨è§£å¤„ç†å™¨<code>AutowiredAnnotationBeanPostProcessor</code>çš„beanä¹Ÿ<strong>æ‰‹åŠ¨</strong>åŠ å…¥æ³¨å†Œè¡¨</li><li>è§¦å‘å®ä¾‹åŒ–å‰çš„ä¿®æ”¹é€»è¾‘ï¼Œå°†ä¸Šä¸€æ­¥beanä¸­çš„å ä½ç¬¦æ›¿æ¢æˆçœŸæ­£çš„å€¼ï¼Œ<strong>åŒæ—¶</strong>ä¿å­˜ä¸€ä¸ªå­—ç¬¦ä¸²å¤„ç†å™¨ä¾¿äºåé¢ä½¿ç”¨</li><li>ä¿å­˜å®ä¾‹åŒ–åçš„ä¿®æ”¹é€»è¾‘ï¼Œæœ¬èŠ‚ä¸­çš„é‡ç‚¹å°±æ˜¯ä¿å­˜<code>AutowiredAnnotationBeanPostProcessor</code>çš„beanåˆ°å®¹å™¨ä¸­ï¼Œä¾¿äºåæœŸè§¦å‘</li><li>ä»<code>createBean</code>æ–¹æ³•ä¸­çš„<code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code>ä¸ºå…¥å£ï¼Œé‡Œé¢è§¦å‘<code>AutowiredAnnotationBeanPostProcessor</code>çš„<code>postProcessPropertyValues</code>æ–¹æ³•ï¼Œå†…éƒ¨å¤„ç†<strong>æ³¨è§£å±æ€§å¡«å……</strong>ã€‚é’ˆå¯¹Valueä¸­çš„å ä½ç¬¦ä½¿ç”¨åˆ°äº†ä¹‹å‰ä¿å­˜çš„<strong>å­—ç¬¦ä¸²å¤„ç†å™¨</strong>è¿›è¡Œå±æ€§å¡«å……ï¼Œé’ˆå¯¹<code>Autowired</code>å’Œ<code>Qualifier</code>ä½¿ç”¨**<code>getBean</code>**çš„æ–¹å¼è¿›è¡Œå±æ€§å¡«å……</li><li>æ‰§è¡Œ<code>createBean</code>ä¹‹åçš„æ“ä½œæ­£å¸¸çš„ä»xmlæ–‡ä»¶ä¸­è¯»å–åˆ°çš„<strong>æ­£å¸¸å±æ€§å¡«å……</strong>ï¼Œç„¶åå®¹å™¨èµ„æºæ³¨å…¥ï¼Œåˆå§‹åŒ–å‰æ“ä½œï¼Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åæ“ä½œï¼Œä¿å­˜é”€æ¯é€»è¾‘ï¼Œè¿”å›bean</li></ol><p>æ€»ç»“èµ·æ¥å°±æ˜¯å››æ­¥ï¼š</p><ol><li>å°†æ³¨è§£å¤„ç†å™¨åŠ å…¥æ³¨å†Œè¡¨ä¸­</li><li>å°†å­—ç¬¦ä¸²å¤„ç†å™¨åŠ å…¥å®¹å™¨ä¸­</li><li>å°†æ³¨è§£å¤„ç†å™¨åŠ å…¥å®¹å™¨ä¸­</li><li>è§¦å‘å®¹å™¨ä¸­çš„æ³¨è§£å¤„ç†å™¨çš„æ‰§è¡Œè¿›è¡Œå±æ€§å¡«å……</li></ol><p>å…·ä½“çš„<strong>æµç¨‹å›¾</strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910828.png alt=image-20231113142204520 style=zoom:67%><p>å¯ä»¥å‘ç°ï¼Œåœ¨ç©ºbeanåˆ›å»ºä¹‹å‰éƒ½æ˜¯ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä¸ºäº†å°†æ³¨è§£å±æ€§å¡«å……å¼•å…¥ç°æœ‰çš„é¡¹ç›®ä¸­ï¼Œæ ¸å¿ƒçš„æ­¥éª¤å°±æ˜¯åœ¨<code>createBean</code>ä¸­çš„ç©ºbeanåˆ›å»ºä¹‹åå¼•å…¥äº†æ–°çš„ä¸€æ­¥<code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code></p><h3 id=ç±»çš„å˜åŒ–>ç±»çš„å˜åŒ–
<a class=header-anchor href=#%e7%b1%bb%e7%9a%84%e5%8f%98%e5%8c%96></a></h3><p>ä¸‹é¢ä»‹ç»ä¸ºäº†å¼•å…¥æ³¨è§£å±æ€§å¡«å……ï¼Œé¡¹ç›®ä¸­ç±»çš„å˜åŒ–æƒ…å†µï¼š</p><h4 id=æ–°å¢çš„ç±»>æ–°å¢çš„ç±»
<a class=header-anchor href=#%e6%96%b0%e5%a2%9e%e7%9a%84%e7%b1%bb></a></h4><ol><li><p><code>StringValueResolver</code>ï¼šæ˜¯ä¸€ä¸ªå¾…å®ç°çš„æ¥å£ï¼Œå†…éƒ¨æä¾›ä¸€ä¸ªå¾…å®ç°çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®ä¼ å…¥çš„å¸¦å ä½ç¬¦çš„å­—ç¬¦ä¸²åˆ©ç”¨èµ„æºæ–‡ä»¶å°†å ä½ç¬¦æ›¿æ¢æˆçœŸæ­£çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„<strong>å­—ç¬¦ä¸²å¤„ç†å™¨</strong>ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910831.png alt=image-20231113135057652></p></li><li><p><code>Value</code>ï¼Œ<code>Autowired</code>ï¼Œ<code>Qualifier</code>ï¼šè¿™æ˜¯ä¸‰ä¸ªä¸ºäº†å®ç°æ³¨è§£å±æ€§å¡«å……è€Œå¼•å…¥çš„æ³¨è§£ï¼Œ<code>Value</code>æ˜¯ä¸ºäº†è¿›è¡Œæ™®é€šå±æ€§å¡«å……ï¼Œ<code>Autowired</code>å’Œ<code>Qualifier</code>æ˜¯é…åˆèµ·æ¥è¿›è¡Œbeançš„ä¾èµ–æ³¨å…¥</p></li><li><p><code>AutowiredAnnotationBeanPostProcessor</code>ï¼šæ³¨è§£å±æ€§å¡«å……çš„æ ¸å¿ƒç±»ï¼Œå®ç°äº†<code>InstantiationAwareBeanPostProcessor</code>æ¥å£ï¼Œæ ¹æ¥å£æ˜¯<code>BeanPostProcessor</code>ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªå®ä¾‹åŒ–åçš„ä¿®æ”¹é€»è¾‘ï¼Œæœ€ç»ˆä¼šä»å®¹å™¨ä¸­è·å–åˆ°è¿™ä¸ªä¿®æ”¹é€»è¾‘ï¼Œæ‰§è¡Œå…¶ä¸­çš„<code>postProcessPropertyValues</code>æ–¹æ³•ï¼Œä»è€Œè¿›è¡Œæ³¨è§£å±æ€§å¡«å……ï¼Œè€Œè¿™ä¸ªç±»çš„è§¦å‘æ—¶æœºåœ¨<code>createBean</code>ä¸­çš„ç©ºbeanåˆ›å»ºä¹‹åï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910832.png alt=image-20231113135553577></p></li></ol><h4 id=ä¿®æ”¹çš„ç±»>ä¿®æ”¹çš„ç±»
<a class=header-anchor href=#%e4%bf%ae%e6%94%b9%e7%9a%84%e7%b1%bb></a></h4><ol><li><p><code>PropertyPlaceholderConfigurer</code>ï¼šä¸»è¦ä¿®æ”¹çš„åœ°æ–¹æ˜¯å†…éƒ¨æ–°å¢äº†ä¸€ä¸ªå­—ç¬¦ä¸²å¤„ç†å™¨ç±»ï¼Œå­—ç¬¦ä¸²å¤„ç†å™¨å†…éƒ¨çš„<code>resolveStringValue</code>æ–¹æ³•è°ƒç”¨ä¸€ä¸ªæŠ½è±¡å‡ºæ¥çš„<code>resolvePlaceholder</code>æ–¹æ³•å®ç°å ä½ç¬¦çš„æ›¿æ¢ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¤„ç†å™¨ä¸ä¸ä»…åœ¨xmlå±æ€§å ä½ç¬¦çš„æ›¿æ¢æ—¶ä½¿ç”¨ï¼Œè¿˜åœ¨Valueæ³¨è§£å ä½ç¬¦æ›¿æ¢çš„æ—¶å€™ä½¿ç”¨ã€‚åœ¨æ‰§è¡Œå®Œxmlé…ç½®ä¸­çš„å±æ€§å ä½ç¬¦çš„æ›¿æ¢æ—¶ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¤„ç†å™¨ä¼šè¢«<strong>ä¿å­˜</strong>åˆ°<code>beanFactory</code>ä¸­çš„ä¸€ä¸ªå®¹å™¨ä¸­ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910833.png alt=image-20231113140009587></p></li><li><p><code>ConfigurableBeanFactory</code>ï¼šæ–°å¢ä¸¤ä¸ªå¾…å®ç°çš„æ–¹æ³•ï¼Œ<code>addEmbeddedValueResolver</code>æ–¹æ³•æ˜¯åœ¨xmlå±æ€§å ä½ç¬¦æ›¿æ¢çš„æ—¶å€™è°ƒç”¨ï¼Œç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²å¤„ç†å™¨ä¾¿äºåé¢ä½¿ç”¨ã€‚<code>resolveEmbeddedValue</code>æ–¹æ³•æ˜¯åœ¨æ³¨è§£å±æ€§å¡«å……ä¸­å¤„ç†Valueæ³¨è§£ä¸­çš„å ä½ç¬¦æ—¶è°ƒç”¨ï¼Œå†…éƒ¨è°ƒç”¨æ‰€æœ‰ä¿å­˜çš„å­—ç¬¦ä¸²å¤„ç†å™¨ï¼Œå°è¯•å¤„ç†å½“å‰è¿™ä¸ªå ä½ç¬¦ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910834.png alt=image-20231113140518352></p></li><li><p><code>AbstractBeanFactory</code>ï¼šå®ç°äº†<code>ConfigurableBeanFactory</code>æ¥å£ï¼Œä»è€Œå®ç°äº†ä¸Šé¢æ–°å¢çš„ä¸¤ä¸ªæ–¹æ³•ï¼ŒåŒæ—¶<strong>æ–°å¢äº†ä¸€ä¸ªå®¹å™¨</strong>ç”¨æ¥ä¿å­˜æ‰€æœ‰çš„å­—ç¬¦ä¸²å¤„ç†å™¨ï¼Œä¾¿äºåé¢ç›´æ¥è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¿å­˜å­—ç¬¦ä¸²å¤„ç†å™¨å’Œè°ƒç”¨å­—ç¬¦ä¸²å¤„ç†å™¨ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910835.png alt=image-20231113140629943></p></li><li><p><code>ClassPathBeanDefinitionScanner</code>ï¼šåœ¨åŒ…è·¯å¾„æ‰«æå®Œæ¯•ï¼Œbeanè‡ªåŠ¨æ³¨å†Œä¹‹åï¼Œæ·»åŠ ä¸€æ­¥è¿›è¡Œæ‰‹åŠ¨ä¿å­˜<code>AutowiredAnnotationBeanPostProcessor</code>çš„beanæ³¨å†Œä¿¡æ¯ï¼Œä¾¿äºåé¢ä»å®¹å™¨ä¸­è·å–åˆ°<code>AutowiredAnnotationBeanPostProcessor</code>è¿™ä¸ªå®ä¾‹åŒ–åçš„ä¿®æ”¹ç­–ç•¥ï¼Œä»è€Œè®°æ€§æ³¨è§£å±æ€§å¡«å……ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910836.png alt=image-20231113140910814></p></li><li><p><code>InstantiationAwareBeanPostProcessor</code>ï¼šæ–°å¢ä¸€ä¸ªå¾…å®ç°çš„æ–¹æ³•<code>postProcessPropertyValues</code>ï¼Œåœ¨å…¶ä¸­å®šä¹‰æ³¨è§£å±æ€§å¡«å……çš„é€»è¾‘ï¼Œæœ€ç»ˆåœ¨<code>AutowiredAnnotationBeanPostProcessor</code>ç±»ä¸­å®ç°ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910838.png alt=image-20231113141311588></p></li><li><p><code>DefaultAdvisorAutoProxyCreator</code>ï¼šç”±äºå…¶å®ç°äº†<code>InstantiationAwareBeanPostProcessor</code>æ¥å£ï¼Œè€Œè¿™ä¸ªæ¥å£ä¸­æ–°å¢äº†å¾…å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œç®€å•å®ç°äº†æ–°å¢çš„<code>postProcessPropertyValues</code>æ–¹æ³•ï¼Œ<strong>å†…éƒ¨æ²¡åšä»»ä½•å®ç°</strong>ï¼Œåªæ˜¯ä¸ºäº†è¯­æ³•ç¼–è¯‘é€šè¿‡ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910839.png alt=image-20231113141342753></p></li><li><p><code>AbstractAutowireCapableBeanFactory</code>ï¼šåœ¨<code>createBean</code>æ–¹æ³•ä¸­åˆ›å»ºç©ºbeanä¹‹åå¼•å…¥ä¸€æ­¥<code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code>ï¼Œä¸»è¦æ˜¯è°ƒç”¨æ³¨è§£å±æ€§å¡«å……çš„é€»è¾‘ï¼Œå†…éƒ¨åˆ©ç”¨<code>instanceof</code>æ‰¾åˆ°å®ç°äº†<code>InstantiationAwareBeanPostProcessor</code>æ¥å£çš„<code>AutowiredAnnotationBeanPostProcessor</code>ç±»ï¼Œè°ƒç”¨å…¶ä¸­çš„<code>postProcessPropertyValues</code>æ–¹æ³•ï¼Œå†…éƒ¨æ ¹æ®æ™®é€šå±æ€§å¡«å……å’Œbeanå±æ€§å¡«å……åˆ†å¼€æ“ä½œï¼Œé’ˆå¯¹æ™®é€šå±æ€§è°ƒç”¨<code>beanFactory</code>ä¸­çš„<code>resolveEmbeddedValue</code>æ–¹æ³•æ¥æ“ä½œï¼Œé’ˆå¯¹beanå±æ€§è°ƒç”¨<code>getBean</code>æ–¹æ³•æ¥æ“ä½œï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910840.png alt=image-20231113141603542></p><p><code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code>æ–¹æ³•çš„ä»£ç ä¸ºï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>applyBeanPostProcessorsBeforeApplyingPropertyValues</span><span style=color:#f92672>(</span>String beanName<span style=color:#f92672>,</span> Object bean<span style=color:#f92672>,</span> BeanDefinition beanDefinition<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>BeanPostProcessor beanPostProcessor <span style=color:#f92672>:</span> getBeanPostProcessors<span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>beanPostProcessor <span style=color:#66d9ef>instanceof</span> InstantiationAwareBeanPostProcessor<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>//æ ¹æ®é…ç½®çš„æ³¨è§£å¾—åˆ°æ‰€æœ‰çš„å±æ€§æ³¨å…¥å€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>//è¿™é‡Œé’ˆå¯¹åŸæœ‰çš„å±æ€§åˆ—è¡¨æ²¡æœ‰åšä»»ä½•æ”¹å˜ï¼ŒåŸå°ä¸åŠ¨çš„è¿”å›ï¼Œå¦‚æœæ­¤æ—¶
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            PropertyValues pvs <span style=color:#f92672>=</span> <span style=color:#f92672>((</span>InstantiationAwareBeanPostProcessor<span style=color:#f92672>)</span> beanPostProcessor<span style=color:#f92672>).</span><span style=color:#a6e22e>postProcessPropertyValues</span><span style=color:#f92672>(</span>beanDefinition<span style=color:#f92672>.</span><span style=color:#a6e22e>getPropertyValues</span><span style=color:#f92672>(),</span> bean<span style=color:#f92672>,</span> beanName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>null</span> <span style=color:#f92672>!=</span> pvs<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>PropertyValue propertyValue <span style=color:#f92672>:</span> pvs<span style=color:#f92672>.</span><span style=color:#a6e22e>getPropertyValues</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span><span style=color:#75715e>//åªè¦è·å–åˆ°çš„å±æ€§åˆ—è¡¨ä¸æ˜¯ç©ºï¼Œå°±æ–°å¢ä¸€ä»½
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    beanDefinition<span style=color:#f92672>.</span><span style=color:#a6e22e>getPropertyValues</span><span style=color:#f92672>().</span><span style=color:#a6e22e>addPropertyValue</span><span style=color:#f92672>(</span>propertyValue<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>BeanFactory</code>ï¼šå†…éƒ¨æ–°å¢ä¸€ä¸ª<strong>åªæŒ‰ç…§ç±»å‹</strong>è·å–beanå¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨<code>DefaultListableBeanFactory</code>ç±»ä¸­å®ç°ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910841.png alt=image-20231113161706111></p></li><li><p><code>DefaultListableBeanFactory</code>ï¼šå¯¹ä¸Šé¢çš„åªæŒ‰ç…§ç±»å‹è·å–beanå¯¹è±¡çš„æ–¹æ³•è¿›è¡Œå®ç°ï¼Œå¦‚æœåŒä¸€ä¸ªç±»å‹åªè·å–åˆ°ä¸€ä¸ªå°±æ­£å¸¸è¿”å›è¿™ä¸ªbeanï¼Œå¦‚æœè·å–åˆ°å¤šä¸ªå°±ä¸çŸ¥é“é€‰å“ªä¸€ä¸ªï¼Œæ­¤æ—¶<strong>æŠ›å‡ºå¼‚å¸¸</strong>ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> T <span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> requiredType<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> BeansException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> beanNames <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> BeanDefinition<span style=color:#f92672>&gt;</span> entry <span style=color:#f92672>:</span> beanDefinitionMap<span style=color:#f92672>.</span><span style=color:#a6e22e>entrySet</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Class beanClass <span style=color:#f92672>=</span> entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBeanClass</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>requiredType<span style=color:#f92672>.</span><span style=color:#a6e22e>isAssignableFrom</span><span style=color:#f92672>(</span>beanClass<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            beanNames<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//å¦‚æœä¸€ä¸ªç±»å‹ä¸‹æœ‰ä¸€ä¸ªå¯¹è±¡æ‰è¿”å›
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> beanNames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> getBean<span style=color:#f92672>(</span>beanNames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#ae81ff>0</span><span style=color:#f92672>),</span> requiredType<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ä¸€ä¸ªç±»å‹ä¸‹æœ‰å¤šä¸ªbeanå¯¹è±¡å°±æŠ›å‡ºå¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BeansException<span style=color:#f92672>(</span>requiredType <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;expected single bean but found &#34;</span> <span style=color:#f92672>+</span> beanNames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>+</span> beanNames<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><p>â€‹ æ ¹æ®ä¸Šé¢çš„åˆ†æå¯ä»¥å¾—å‡ºï¼Œæœ€æ ¸å¿ƒçš„ä»£ç å°±æ˜¯åœ¨<code>createBean</code>ä¸­å¼•å…¥äº†<code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code>æ–¹æ³•ä»è€Œåœ¨beançš„ç”Ÿå‘½å‘¨æœŸä¸­å¼•å…¥äº†æ³¨è§£å±æ€§å¡«å……çš„åŠŸèƒ½ï¼Œå‰©ä¸‹çš„ä¸€äº›ç±»çš„å˜åŒ–éƒ½æ˜¯ä¸ºäº†è¾…åŠ©æ³¨è§£å±æ€§å¡«å……åŠŸèƒ½çš„åŠ å…¥</p><h3 id=beançš„åˆ›å»ºå’Œè·å–>beançš„åˆ›å»ºå’Œè·å–
<a class=header-anchor href=#bean%e7%9a%84%e5%88%9b%e5%bb%ba%e5%92%8c%e8%8e%b7%e5%8f%96></a></h3><p>â€‹ æ ¹æ®ä¸Šé¢çš„åˆ†æè¿‡ç¨‹ï¼Œä¸‹é¢ä½¿ç”¨<strong>debug</strong>æ¥æè¿°æ³¨è§£å±æ€§å¡«å……çš„æµç¨‹ï¼Œå‰ææ˜¯æœ¬é¡¹ç›®ä¸­æœ‰ä¸¤ä¸ªbeanï¼Œå…¶ä¸­<code>userService</code>ä¾èµ–äº<code>userDao</code>ï¼Œä¾èµ–å…³ç³»é€šè¿‡<code>Autowired</code>æ³¨è§£çš„å½¢å¼æ³¨å…¥ï¼Œå¹¶ä¸”<code>userService</code>ä¸­è¿˜æœ‰ä¸€ä¸ªä½¿ç”¨<code>Value</code>æ³¨å…¥çš„æ™®é€šå±æ€§ï¼Œxmlé…ç½®æ–‡ä»¶ä¸­åªé…ç½®äº†åŒ…æ‰«æè·¯å¾„ï¼š</p><ol><li><p>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè¿›å…¥<code>doLoadBeanDefinitions</code>æ–¹æ³•ä¸­è¯»å–xmlé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910842.png alt=image-20231113183441327></p></li><li><p>è°ƒç”¨<code>scanPackage</code>ä¸­çš„<code>doScan</code>æ–¹æ³•è¯»å–åŒ…æ‰«æè·¯å¾„ä¸‹çš„ç±»</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910843.png alt=image-20231113183558520></p></li><li><p>åŒ…æ‰«æå®Œæ¯•ä¹‹åï¼Œå°†æ³¨è§£å±æ€§å¡«å……æ¨¡å—çš„æ ¸å¿ƒç±»<code>AutowiredAnnotationBeanPostProcessor</code>æ‰‹åŠ¨å­˜å…¥æ³¨å†Œè¡¨ä¸­ï¼Œä¾¿äºåæœŸæŒ‰ç…§ç±»å‹å–å‡ºè¿™ä¸ªæ¨¡å—æ‰§è¡Œæ³¨è§£å¡«å……å±æ€§çš„åŠŸèƒ½ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910844.png alt=image-20231113183850762></p></li><li><p>æ­£å¸¸æ‰«æxmlæ–‡ä»¶ä¸­å•ç‹¬é…ç½®çš„beanï¼Œè¿™é‡Œä¼šæ‰«æåˆ°å­—ç¬¦ä¸²å¤„ç†çš„é€»è¾‘ï¼Œå°†å…¶ä¿å­˜åˆ°æ³¨å†Œè¡¨ä¸­ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910845.png alt=image-20231113184041628></p></li><li><p><code>invokeBeanFactoryPostProcessors</code>æ–¹æ³•ä¸­è§¦å‘å®ä¾‹åŒ–ä¹‹å‰çš„ä¿®æ”¹é€»è¾‘ï¼Œè¿™é‡Œå°è¯•æ›¿æ¢beanå±æ€§ä¸­æ‰€æœ‰çš„å ä½ç¬¦ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªbeançš„æ¯ä¸€ä¸ªå±æ€§éƒ½å°è¯•æ›¿æ¢å ä½ç¬¦ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910846.png alt=image-20231113184318404></p></li><li><p>æ‰€æœ‰çš„å±æ€§æ›¿æ¢å®Œæ¯•ä¹‹åï¼Œä¿å­˜ä¸€ä¸ªå­—ç¬¦ä¸²å¤„ç†å™¨ï¼Œä¾¿äºåé¢<code>@Value</code>æ³¨è§£æ‰§è¡Œå±æ€§æ³¨å…¥çš„æ—¶å€™ä½¿ç”¨ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910847.png alt=image-20231113184545140></p></li><li><p>ä¿å­˜å®ä¾‹åŒ–åçš„ä¿®æ”¹é€»è¾‘åˆ°å®¹å™¨ä¸­ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¿å­˜<code>AutowiredAnnotationBeanPostProcessor</code>æ ¸å¿ƒç±»åˆ°å®¹å™¨ä¸­ï¼Œç„¶ååœ¨åˆé€‚çš„æ—¶æœºè§¦å‘ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910848.png alt=image-20231113184743779></p></li><li><p>å®ä¾‹åŒ–æ‰€æœ‰çš„beanï¼Œåœ¨è¿™é‡Œå¢åŠ ä¸€æ­¥æ³¨è§£å¡«å……å±æ€§çš„æ­¥éª¤ï¼Œä»¥<code>userService</code>ä¸ºä¾‹ï¼Œä¸€å…±ç»å†ä¸‹é¢å‡ æ­¥ï¼š</p><ol><li><p>ç©ºbeançš„åˆ›å»ºï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910849.png alt=image-20231113185145096></p></li><li><p>è§¦å‘ä¹‹å‰ä¿å­˜çš„æŒ‰ç…§æ³¨è§£å¡«å……å±æ€§ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910850.png alt=image-20231113185350259></p></li><li><p>è°ƒç”¨ä¹‹å‰ä¿å­˜çš„å­—ç¬¦ä¸²å¤„ç†å™¨å¤„ç†<code>@Value</code>æ³¨è§£çš„å±æ€§å¡«å……ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910852.png alt=image-20231113190114695></p></li><li><p>è°ƒç”¨<code>getBean</code>æ–¹æ³•å¤„ç†<code>@Autowired</code>æ³¨è§£çš„å±æ€§å¡«å……ï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910853.png alt=image-20231113190211328></p></li></ol></li><li><p>æ‰§è¡Œåé¢çš„æ­¥éª¤ï¼Œå¾—åˆ°æœ€ç»ˆçš„beanï¼Œæ‰§è¡Œç›¸å…³çš„ä¸šåŠ¡ï¼Œæœ€ç»ˆçš„ç»“æœä¸ºï¼š</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://zzzi-img-1313100942.cos.ap-beijing.myqcloud.com/img/202311131910854.png alt=image-20231113185758180></p></li></ol><h2 id=æ€»ç»“>æ€»ç»“
<a class=header-anchor href=#%e6%80%bb%e7%bb%93></a></h2><p>â€‹ æœ¬èŠ‚ä¸­å¼•å…¥äº†æ³¨è§£å¡«å……å±æ€§çš„åŠŸèƒ½ï¼Œå¼•å…¥æ—¶æœºåœ¨ç©ºbeanåˆ›å»ºä¹‹åï¼Œæ­£å¸¸æ–¹å¼å±æ€§å¡«å……ä¹‹å‰ã€‚ä¸ºäº†å®ç°æ³¨è§£å¡«å……å±æ€§çš„åŠŸèƒ½ï¼Œæ ¸å¿ƒç±»æ˜¯å®ç°äº†<code>InstantiationAwareBeanPostProcessor</code>æ¥å£çš„<code>AutowiredAnnotationBeanPostProcessor</code>ç±»ï¼Œå†…éƒ¨æ ¹æ®ä½¿ç”¨çš„æ³¨è§£è¿›è¡Œå±æ€§å¡«å……ï¼Œé’ˆå¯¹æ™®é€šå±æ€§æ³¨å…¥æ—¶ä½¿ç”¨çš„å ä½ç¬¦è®¾è®¡äº†å­—ç¬¦ä¸²å¤„ç†å™¨æ¥æ›¿æ¢ï¼Œé’ˆå¯¹beanå±æ€§æ–°å¢äº†ä¸€ä¸ªåªæŒ‰ç…§ç±»å‹è·å–beanå¯¹è±¡çš„æ–¹æ³•ï¼Œæœ€ç»ˆå®ç°äº†æ³¨è§£å¡«å……å±æ€§çš„åŠŸèƒ½</p></div><footer class=post-footer><div class=post-tags><a href=/tags/spring>spring</a>
<a href=/tags/%e6%ba%90%e7%a0%81>æºç </a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/small_spring14/ rel=next title=Small_spring14><i class="fa fa-chevron-left"></i> Small_spring14</a></div><div class="post-nav-prev post-nav-item"><a href=/post/12.%E5%8C%85%E6%89%AB%E6%8F%8F%E5%92%8C%E5%B1%9E%E6%80%A7%E5%8D%A0%E4%BD%8D%E7%AC%A6/ rel=prev title=12.åŒ…æ‰«æå’Œå±æ€§å ä½ç¬¦>12.åŒ…æ‰«æå’Œå±æ€§å ä½ç¬¦
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2024</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>zzziæä¾›æŠ€æœ¯æ”¯æŒ</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zzzicode.github.io/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"è¯·æ–‡æ˜å‘è¨€å“Ÿ ãƒ¾(â‰§â–½â‰¦*)o","reaction":true,"reactiontext":["ç‚¹èµ","è¸©ä¸€ä¸‹","å¾—æ„","ä¸å±‘","å°´å°¬","ç¡è§‰"],"reactiontitle":"ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"å¿«æ¥å‘è¡¨ä½ çš„æ„è§å§ (â‰§âˆ€â‰¦)ã‚","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.b0e26367f0461fb41ac6f947dc2af3620375dc44aa8945e6c2b1480d342c65d1.js defer></script>
<script type=text/javascript src=/js/math.min.a6ada19a368d85dad9ead2040d86ae561a867fafef89391d1aa2aa5909366509.js defer></script></body></html>